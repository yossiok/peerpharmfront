<div class="container-fluid text-center bg-white p-2">

  <div class="row">
    <div class="col-12">
      <h1 style="text-shadow: 2px 2px 4px #000000;" class="text-info p-2">Supplier Index</h1>
    </div>
  </div>

  <div class="row p-2 mt-2">
    <div class="col-1">
      <img src="../../../../assets/images/excel.png" alt="export to excel" style="width: 40px;"
      (click)="exportAsXLSX(suppliers, 'ספקים')">
    </div>
    <div class="col-1"></div>
    <div class="col-8 d-flex flex-row justify-content-around p-2">
      <div class="cool">
        <h4>Filter by:</h4>
      </div>
      <div>
        <input type="text" placeholder="Supplier Name" (keyup)="filterSuppliers('supplierName', $event)" />
      </div>
      <div>
        <input type="text" placeholder="Supplier Number" (keyup)="filterSuppliers('supplierNumber', $event)" />
      </div>
      <div>
        <input type="text" placeholder="Country" (keyup)="filterSuppliers('country', $event)" />
      </div>
      <div>
        <input type="text" placeholder="Item" (keyup)="filterSuppliersByItem($event)" />
      </div>
      <div>
        <button type="text" placeholder="Open Orders" (click)="filterSuppliersByOpenOrders()">open orders</button>
      </div>
    </div>
    <div class="col-2">
      <button class="form-control btn btn-info w-50" (click)="openData('Add Supplier
      ')">New Supplier</button>
    </div>
  </div>

  <div *ngIf="suppliers.length == 0" class="row text-center mt-4 mb-4">
    <div class="col-4"></div>
    <div class="col-4">
      <h2 class="peerLoader mx-auto my-auto">
        <span>P</span>
        <span>e</span>
        <span>e</span>
        <span>r</span>
        <span>P</span>
        <span>h</span>
        <span>a</span>
        <span>r</span>
        <span>m</span>
      </h2>
    </div>
    <div class="col-4"></div>
  </div>

  <div class="row mt-2">
    <div class="col-12">
      <table *ngIf="tableType=='suppliers'" class='table table-hover table-striped'>
        <thead class="bg-info text-center text-white">

          <tr>
            <th>#</th>
            <th>Supplier Number</th>
            <th>Name</th>
            <th>Currency</th>
            <th>Address</th>
            <th>Email</th>
            <th>Phone</th>
            <th>Remarks</th>
          </tr>
        </thead>
        <tbody class="text-center text-dark">
          <tr *ngFor="let supplier of suppliers; let i=index;">
            <td>{{i}}</td>
            <td style="text-decoration: underline;cursor: pointer;" (click)="openData('Update Supplier', i)">
              {{supplier.suplierNumber}}</td>
            <td>{{supplier.suplierName}}</td>
            <td>{{supplier.currency}}</td>
            <td>{{supplier.city}} , {{supplier.address}}</td>
            <td>{{supplier.email}}</td>
            <td>{{supplier.phoneNum}}</td>
            <td>{{supplier.remarks}}</td>

          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>



<div style="top:75px;" *ngIf="supplierModal == true"
  class="container fixed-top mx-auto my-auto text-center bg-light rounded p-3 shadow border border-info modal-inner">
  <div class="row mt-3">
    <div class="col-4">

    </div>
    <div class="col-4">
      <h3 class="text-info">Supplier Details</h3>
    </div>
    <div class="col-4">
      <i (click)="supplierModal = false" class="fa fa-times text-info" aria-hidden="true"></i>
    </div>
  </div>
  <div class='row mt-3'>
    <div class="col-3">
      <label class="form-control">Name</label>
      <label class="form-control">Number</label>
      <label class="form-control">Address</label>
      <label class="form-control">City</label>
      <label class="form-control">Phone Number</label>
      <label class="form-control">Cell Number</label>
    </div>
    <div class="col-3">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.suplierName">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.suplierNumber">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.address">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.city">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.phoneNum">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.cellularNum">
    </div>
    <div class="col-3">
      <label class="form-control">Fax Number</label>
      <label class="form-control">Country</label>
      <label class="form-control">Email</label>
      <label class="form-control">Contact</label>
      <label class="form-control">Currency</label>
      <label class="form-control">Import</label>
    </div>
    <div class="col-3">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.faxNum">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.country">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.email">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.contactName">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.currency">
      <select class="form-control" [(ngModel)]="currentSupplier.import">
        <option value=""></option>
        <option value="outOfIsrael">Out Of Israel</option>
        <option value="israel">Israel</option>
      </select>
    </div>
  </div>

  <div class="row mt-2">
    <div class="col-1"></div>
    <div class="col-2">
      <label class="form-control">Remarks</label>
    </div>
    <div class="col-8">
      <input type="text" class="form-control" [(ngModel)]="currentSupplier.remarks">
    </div>
    <div class="col-1"></div>
  </div>
  <div class="row mt-3">
    <div class="col-12">
      <button (click)="updateCurrSupplier()" class="btn w-50 btn-info form-control">{{addEditText}}</button>
    </div>
  </div>

  <div class="row p-2 mt-2 text-center">
    <div class="col-4">
    </div>
    <div class="col-4">
      <h3 style="text-shadow: 2px 2px 4px #000000;" class="text-info ">Items Purchased</h3>
    </div>
  </div>

  <div class="row mt-4">
    <div style="height:320px;overflow: scroll;" class="col-12">
      <table style="height:320px;overflow: scroll;" class="table table-hover table-striped">
        <thead class="bg-info text-white">
          <tr>
            <th>מספר פריט</th>
            <th>שם פריט</th>
            <th>מחיר</th>
            <th></th>
            <th>כמות</th>
            <th></th>
          </tr>
        </thead>
        <tbody style="height:320px;overflow: scroll;">

          <tr *ngFor="let item of supItems">
            <td (click)="showAllPurchases(item.itemNumber)" style="text-decoration: underline;cursor: pointer;">
              {{item.number}}</td>
            <td>{{item.name}}</td>
            <td>{{item.price}}</td>
            <td>{{item.coin}}</td>
            <td>{{item.quantity}}</td>
            <td>{{item.measurement}}</td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>

  <div class="row p-2 mt-2 text-center">
    <div class="col-4">
    </div>
    <div class="col-4">
      <h3 style="text-shadow: 2px 2px 4px #000000;" class="text-info ">Open Purchases</h3>
    </div>
  </div>

  <div class="row mt-4">
    <div style="height:320px;overflow: scroll;" class="col-12">
      <table style="height:320px;overflow: scroll;" class="table table-hover table-striped">
        <thead class="bg-info text-white">
          <tr>
            <th>מספר הזמנה</th>
            <th>תאריך הגעה</th>
            <th>פריטים</th>
            <th>מחיר כולל</th>
            <th>מזמין</th>
            <th>כמות</th>
            <th>מחיר העמסה</th>
          </tr>
        </thead>
        <tbody style="height:320px;overflow: scroll;">

          <tr *ngFor="let order of supPurchases">
            <td (click)="showAllPurchases(item.itemNumber)" style="text-decoration: underline;cursor: pointer;">
              {{order.orderNumber}}</td>
            <td>{{order.arrivalDate}}</td>
            <td><button (click)="openItems(order.stockitems, order.orderNumber)" class="btn btn-info">לחץ כדי
                לצפות</button> </td>
            <td>{{item.coin}}</td>
            <td>{{item.quantity}}</td>
            <td>{{item.measurement}}</td>
          </tr>

        </tbody>
      </table>
    </div>
  </div>


</div>


<div *ngIf="showPurchaseItems == true" style="top:200px;"
  class="container rounded fixed-top shadow-lg bg-white mx-auto my-auto text-center p-3">
  <div class="row">
    <div class="col-1"></div>

    <div class="col-10">
      <h2 class="text-info">Purchase {{purchaseNumber}} Items</h2>
    </div>
    <div class="col-1">
      <i style="cursor: pointer;" (click)="showPurchaseItems = false" class="fa fa-times text-info"></i>
    </div>
  </div>

  <div class="row mt-4">
    <div class="col-12">
      <table class="table table-striped table-hover">
        <thead class="text-white bg-info">
          <tr>
            <th>Item</th>
            <th></th>
            <th>Ordered</th>
            <th></th>
            <th>Price</th>
            <th></th>
            <th>Arrived</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let item of purchaseStockitems">
            <td>{{item.number}}</td>
            <td>{{item.name}}</td>
            <td>{{item.quantity}}</td>
            <td>{{item.measurement}}</td>
            <td>{{item.price}}</td>
            <td>{{item.coin}}</td>
            <td>{{item.arrivedAmount}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>

</div>