<div class='orderHeader' *ngIf="multi==false">
  <span class='spanTitle'>Order: </span><span>{{number}} </span><i class="ti-check text-success m-r-10" (click)="closeOrder()"></i>
  <span class='spanTitle'> Order Date:</span><span> {{orderDate}} </span><span class='spanTitle'> Delivery Date: </span><span>{{deliveryDate}}</span>
  <span class='spanTitle'> Costumer :</span><span> {{costumer}} </span><span class='spanTitle'> Remarks:</span><span>
    {{remarks}}</span>
</div>
<img src="assets/images/load_data2.gif" *ngIf="loadData==true" ><br>
<input matInput  placeholder="Item Name / Number" (keyup)="changeText($event)" class="form-control  mb-8" />
<table class='table' *ngIf="loadData==false">
  <thead class='bg-info text-white'>
    <tr>
      <th> #</th>
      <th *ngIf="multi==true">Order Number</th>
      <th>Item Number </th>
      <th>Description </th>
      <th>Volume </th>
      <th>Quantity </th>
      <th class='printTd'>Weight </th>
      <th>Remarks </th>
      <th class='printTd'>Status</th>
      <th class='printTd'>Compile</th>
      <th></th>
    </tr>
  </thead>

  <tbody>
    <tr *ngIf="multi==false" class='inputTr'>

      <td></td>
      <td><input class="form-control form-control-sm" [(ngModel)]="itemData.itemNumber" #itemNum (focusout)="searchItem(itemNum.value)"></td>
      <td><input class="form-control form-control-sm" [(ngModel)]="itemData.discription" style='width:350px' class="form-control form-control-sm"></td>
      <td><input class="form-control form-control-sm" [(ngModel)]="itemData.unitMeasure"></td>
      <td><input class="form-control form-control-sm" [(ngModel)]="itemData.quantity"></td>
      <td><input class="form-control form-control-sm" [(ngModel)]="itemData.qtyKg"></td>
      <td><input class="form-control form-control-sm" [(ngModel)]="itemData.itemRemarks"></td>
      <td></td>
      <td></td>
      <td><button (click)="addItemOrder()" class='btn btn-success'>Add</button></td>

    </tr>
    <tr>

    </tr>
    <ng-container *ngFor="let item of ordersItems; let i = index">
      <tr [style.background-color]="item.color">


        <td *ngIf="item._id===EditRowId"><input #id type='hidden' [value]="item._id" style='width:370px'><input
            #itemNumber type='hidden' [value]="item.itemNumber">{{i}}</td>
        <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)"><b>{{i}}</b></td>

        <td *ngIf="multi==true">{{item.orderNumber}}</td>
        <td>
          <button class='expendBtn' [style.background-color]="item.colorBtn" (click)="getDetails(item.itemNumber , item._id)">{{item.isExpand}}</button>&nbsp;&nbsp;
          <a target="_blank" routerLink="/peerpharm/items/itemDetails/{{item.itemNumber}}">
            {{item.itemNumber}}
          </a>
        </td>
        <td *ngIf="item._id===EditRowId"><input #itemname type='text' [value]="item.discription" style='width:370px'></td>
        <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.discription}}</td>
        <td *ngIf="item._id===EditRowId"><input #unitmeasure type='text' [value]="item.unitMeasure" style='width:70px'></td>
        <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.unitMeasure}}</td>
        <td *ngIf="item._id===EditRowId"><input #quantity type='text' [value]=item.quantity style='width:70px'></td>
        <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.quantity}}</td>
        <td *ngIf="item._id===EditRowId"><input #weight type='text' [value]=item.qtyKg style='width:70px' class='printTd'></td>
        <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.qtyKg}}</td>
        <td *ngIf="item._id===EditRowId"><input #itemRemarks type='text' [value]=item.itemRemarks style='width:130px' /></td>
        <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.itemRemarks}}</td>
        <td [style.background-color]="item.infoColor" class='printTd'>{{item.fillingStatus}}</td>
        <td></td>
        <!--<td><img  *ngIf="item._id!=EditRowId" src='/assets/images/deleteBtn.png' style='width:40px; cursor: pointer'  (click)="deleteItem(item)"><img  *ngIf="item._id===EditRowId" src='/assets/images/aprroved.png' style='width:30px; cursor: pointer' (click)="saveEdit()"></td>-->
        <td class='printTd'>
          <i class="ti-trash text-danger m-r-10" *ngIf="item._id!=EditRowId" (click)="deleteItem(item)"></i>
          <i class="ti-save text-success m-r-10" *ngIf="item._id===EditRowId" (click)="saveEdit()"></i>
        </td>
        <td class='printTd'></td>
      </tr>
      <tr *ngIf="item._id== EditRowId2nd && expand==true;">
        <td colspan="5">
          <table class='detilasTable'>
            <tr>
              <td></td>
              <td>
                <h5>Batch</h5>
              </td>
              <td>{{item.batch}}</td>
              <td><input #inputBatch></td>
              <td><button class='btn btn-success'  (click)="setBatch(item, inputBatch.value, item.batch)">set</button></td>
              <td></td>
              <td></td>
            </tr>
            <tr *ngFor="let det of detailsArr">
              <td></td>
              <td></td>
              <td>{{det.type}} &nbsp;&nbsp; {{det.number}} &nbsp;&nbsp;&nbsp;<button class='btn btn-info'>print</button></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
            </tr>
            <tr>
              <td></td>
              <td>
                <h5>Set Schedule: </h5>
              </td>
              <td><input #date type='date'></td>
              <td><input #shift type='text' placeholder="Shift"></td>
              <td><input #marks placeholder="Remarks" type='marks'></td>
              <td>
                <input type="radio" name="type" #type value='basic' [(ngModel)]="chosenType" checked>Basic<br>
                <input type="radio" name="type" #type value='tube' [(ngModel)]="chosenType">Tube<br>
                <input type="radio" name="type" #type value='mkp' [(ngModel)]="chosenType">Mkp<br>
              </td>
              <td><button (click)='setSchedule(item ,type.value)' class='btn btn-success'>Set</button></td>
            </tr>
          </table>
        </td>
      </tr>
    </ng-container>
  </tbody>


</table>
<br>
<div class='printTd'>omponents:
  <table>
    <tr *ngFor="let cmpt of components">
      <td>{{cmpt.componentN}}</td>
      <td>{{cmpt.quantity}}</td>
      <td>{{cmpt.amountExist}}</td>
      <td>{{cmpt.allocation}}</td>
      <td>{{cmpt.lack}}</td>
    </tr>
  </table>
</div>