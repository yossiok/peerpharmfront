<div *ngIf="!showingAllOrders">
  <div style='background-color: aquamarine;display:inline-table'>לוקט</div>&nbsp;
  <div style='background-color: #CE90FF; display:inline-table'>מולא</div>&nbsp;
  <div style='background-color: #ffff00; display:inline-table'>נמצא בתהליך</div>&nbsp;
  <div style='background-color: #FFC058; display:inline-table'>נארז</div>&nbsp;
  <div style='background-color: red; display:inline-table'>בעיה</div>&nbsp;
  <div style='background-color: lightblue; display:inline-table'>הודפס</div>&nbsp;
</div>

<div class='orderHeader' *ngIf="!showingAllOrders">
  <span class='spanTitle'>Order: </span><span class="orderSpanDetails">{{number}} </span><i
    class="ti-check text-success m-r-10" (click)="closeOrder()" style="cursor: pointer;"></i>
  <span class='spanTitle'> Order Date:</span><span class="orderSpanDetails"> {{orderDate}} </span><span
    class='spanTitle'> Delivery Date: </span><span class="orderSpanDetails">{{deliveryDate}}</span>
  <span class='spanTitle'> Costumer :</span><span class="orderSpanDetails"> {{costumer}} </span><span class='spanTitle'>
    Costumer Number:</span><span class="orderSpanDetails"> {{costumerInternalId}} </span>
  <span class='spanTitle'> Remarks:</span>
  <span class="orderSpanDetails">{{remarks}}</span>
  <ng-container *ngIf="(multi && !showingAllOrders) ||(!multi && !showingAllOrders)">
    <span class='spanTitle'>Costumer Important Remark:</span>
    <span *ngIf="costumersNumbers.length <= 1 && multiCostumerImpRemark.length > 0"> <b
        style="color: red ; font-size: 18px; "> {{costumerImpRemark}} </b> </span>
    <!-- <span *ngIf="costumersNumbers.length == 1 && multiCostumerImpRemark.length > 1"> <b style="color: red ; font-size: 18px; ">  {{costumerImpRemark}} </b>  </span> -->

    <span *ngIf="costumersNumbers.length > 1 && multiCostumerImpRemark.length  > 0"> <b style="color: red"> ריבוי
        לקוחות- לא ניתן לצפות בהערות חשובות</b> </span>


  </ng-container>
  <!-- <ng-container *ngIf="(multi && !showingAllOrders) ||(!multi && !showingAllOrders)">
  <span class='spanTitle' >Costumer Important Remark:</span>
  <span *ngIf="costumersNumbers.length < 2"> {{costumerImpRemark}} </span>
  <span *ngIf="costumersNumbers.length > 1"> <b style="color: red"> ריבוי לקוחות- לא ניתן לצפות בהערות חשובות</b> </span>
</ng-container > -->

</div>


<div *ngIf="!multi" style="border: 1px solid black; width:98% ; display: flex; justify-content: center;"
  [style.background-color]="stageColor">
  <div>
    <label style=" padding: 15px 40px 0px 0px; font-size: 22px; ">Stage:</label>
    <select #stage [value]='orderStage' (change)="updateSingleOrderStage($event)" style="font-size: 22px; "
      [style.background-color]="stageColor">
      <option value="new" style="background-color: white ;">חדש</option>
      <option value="partialCmpt" style="background-color: #ffa64d ;">רכיבים קיימים- חלקית</option>
      <option value="allCmpt" style="background-color: #ffff80 ;">כל הרכיבים קיימים</option>
      <option value="production" style="background-color: #b3ecff ;">נשלח לייצור</option>
      <option value="prodFinish" style="background-color: #d9b3ff ;">עבר ייצור</option>
      <option value="done" style="background-color: #9ae59a;">הזמנה סגורה</option>
    </select>
  </div>
</div>
<img src="assets/images/load_data2.gif" *ngIf="loadData==true"><br>
<div *ngIf="loadData==false">
  <p>Showing {{ordersItems.length}} items</p>
</div>

<!-- <div *ngIf="!multi && ordersItems.length!=0">
  <img class="showCmptBtn" src="../../../../assets/images/partsAssembly2.jpg"
        (click)="openCmptDemandsModal()" >
</div> -->


<input matInput placeholder="Search item by name" (change)="changeText($event)" class="form-control  mb-8" />

<mat-tab-group>
  <mat-tab label="Order Items"> <table style="border: 1px solid black;" class='table' *ngIf="loadData==false">
    <thead class='bg-info tableHeader text-white' (click)="edit('')">
      <tr>
        <th> # <button><img style="width:35px;height:35px;" (click)="exportAsXLSXOrders()" src="../../../assets/images/excel.png"/></button></th>
        <th></th>
        <th *ngIf="openFormule"></th>
        <th *ngIf="showingAllOrders || multi">Order Number</th>
        <th style="width:200px;" class="header">Item Number </th>
        <th class="header">Item Important Remark</th>
        <th class="header">Description </th>
        <th class="header">neto Weight(Gr) </th>
        <th class="header">Quantity </th>
        <th class="header">Printing/Filling </th>
        <!-- <th class='printTd header'>Weight</th> -->
        <th class="header">Remarks </th>
        <th class='printTd header'>Status</th>
        <th class='printTd header' *ngIf="!showingAllOrders && !multi">Compile</th>
        <th class="header">C & F</th>
        <th><button style="color:black;" class="btn btn-success" (click)="open(contentTwo)">Amounts</button></th>
        <th><button style="color:black;" class="btn btn-success" (click)="loadMaterialsForFormule()">Formule</button></th>
        
        <th>
          <img class="showCmptBtn" src="../../../../assets/images/partsAssembly2.jpg" (click)="openCmptDemandsModal()">
        </th>
      
      </tr>
    </thead>
  
    <tbody>
  
      <tr *ngIf="!showingAllOrders" class='inputTr' (click)="edit('')">
        <td></td>
        <td><input type="checkbox" (change)="checkboxAllOrders($event)"></td>
        <td></td>
        <td *ngIf="!showingAllOrders && multi"><input style="box-shadow:1px 1px 2px black;"
            class="form-control form-control-sm" placeholder="Order Number" [(ngModel)]="itemData.orderNumber" #orderNum
            (focusout)="searchItem(orderNumber.value)"></td>
        <td><input style="box-shadow:1px 1px 2px black;" class="form-control form-control-sm" placeholder="Item Number"
            [(ngModel)]="itemData.itemNumber" #itemNum (focusout)="searchItem(itemNum.value)"></td>
        <td><input style="box-shadow:1px 1px 2px black; color: red;" class="form-control form-control-sm"
            placeholder="Item Important Remark" [(ngModel)]="itemData.itemImpRemark" disabled>
          <!-- <img src="../../../../assets/images/alert3.gif" width="30px" alt="see important remarks from item tree"> -->
        </td>
        <td><input style="box-shadow:1px 1px 2px black; width:350px;" class="form-control form-control-sm"
            placeholder="Description" [(ngModel)]="itemData.discription"></td>
        <td><input style="box-shadow:1px 1px 2px black" class="form-control form-control-sm" placeholder="neto Weight(Gr)"
            [(ngModel)]="itemData.netWeightGr"></td>
        <td><input style="box-shadow:1px 1px 2px black" class="form-control form-control-sm" placeholder="Quantity"
            [(ngModel)]="itemData.quantity"></td>
        <td><input style="box-shadow:1px 1px 2px black" class="form-control form-control-sm" placeholder="Weight"
            [(ngModel)]="itemData.qtyKg"></td>
        <td><textarea style="box-shadow:1px 1px 2px black;width:185px" class="form-control form-control-sm" placeholder="Remarks"
            [(ngModel)]="itemData.itemRemarks"></textarea></td>
        
        <td></td>
        <td *ngIf="!multi"></td>
        <td><button style="box-shadow: 1px 1px 2px black;" (click)="addItemOrder()" class='btn btn-success'>Add</button>
        </td>
     
  
      </tr>
  
      <tr>
      </tr>
  
      <ng-container *ngFor="let item of ordersItems; let i = index">
        <!-- <tr [style.background-color]="item.color"  (click)="edit(item._id)" (blur)="edit('')"> -->
        <tr style="border: 2px solid black; box-shadow: inset 1px -1px 2px 0px black; margin-top: 1px;"
          [style.background-color]="item.color">
  
  
          <td *ngIf="item._id===EditRowId">
            <input #id type='hidden' [value]="item._id" style='width:370px'>
            <input #itemNumber type='hidden' [value]="item.itemNumber">{{i+1}}</td>
          <td *ngIf="item._id!==EditRowId"><b>{{i+1}}</b></td>
          <td><input type="checkbox" (change)="isSelected($event,item)"></td>
          <!-- <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)"><b>{{i+1}}</b></td> -->
  
          <td *ngIf="multi==true">{{item.orderNumber}}</td>
          
          <td *ngIf="openFormule"><button  (click)="showFormule(item,item.itemNumber,formuleByItem)" class="formuleBtn">F</button></td>
          <td *ngIf="item.licsensNumber!=''">
            <button class='expendBtn' [style.background-color]="item.colorBtn"
              (click)="getDetails(item.itemNumber , item._id)">{{item.isExpand}}</button>&nbsp;&nbsp;
            <a style="font-weight: bolder" target="_blank" routerLink="/peerpharm/items/itemDetails/{{item.itemNumber}}">
              {{item.itemNumber}}
            </a>
          </td>
          <td class="noLicense" *ngIf="item.licsensNumber==''">
            <button class='expendBtn' [style.background-color]="item.colorBtn"
              (click)="getDetails(item.itemNumber , item._id)">{{item.isExpand}}</button>&nbsp;&nbsp;
            <a style="font-weight: bolder" target="_blank" routerLink="/peerpharm/items/itemDetails/{{item.itemNumber}}">
              {{item.itemNumber}}
            </a>
          </td>
          <td *ngIf="item._id===EditRowId">
            <input #itemImpRemark type='text' *ngIf="item.itemImpRemark!=undefined" [value]="item.itemImpRemark"
              style='width:150px ; color:red;' disabled>
            <input #itemImpRemark type='text' *ngIf="item.itemImpRemark==undefined" [value]=""
              style='width:150px ; color:red;' disabled>
          </td>
          <td *ngIf="item._id!==EditRowId" style='width:150px ; color:red;' (click)="edit(item._id)">
            {{item.itemImpRemark}}</td>
  
          <td *ngIf="item._id===EditRowId"><input #itemname type='text' [value]="item.discription" style='width:370px'>
          </td>
          <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.discription}}</td>
          <td *ngIf="item._id===EditRowId"><input #netWeightGr type='text' [value]="item.netWeightGr" style='width:70px'>
          </td>
          <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.netWeightGr}}</td>
          <td *ngIf="item._id===EditRowId"><input #quantity type='text' [value]=item.quantity style='width:70px'></td>
          <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.quantity}}</td>
          <!-- <td *ngIf="item._id===EditRowId"><input #weight type='text' [value]=item.qtyKg style='width:70px'
              class='printTd'></td> -->
          <!-- <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.qtyKg}}</td> -->
          <td *ngIf="item._id!==EditRowId"><img *ngIf="item.printStatus ==='printed'" style="width:15px" src="../../../../assets/images/aprroved.png"/> / <img *ngIf="item.fillingStatus ==='filled'" style="width:15px" src="../../../../assets/images/aprroved.png"/></td>
          <td *ngIf="item._id===EditRowId"></td>
          <td *ngIf="item._id===EditRowId"><input #itemRemarks type='text' [value]=item.itemRemarks style='width:130px' />
          </td>
          <td *ngIf="item._id!==EditRowId" (click)="edit(item._id)">{{item.itemRemarks}}</td>
          <td [style.background-color]="item.infoColor" class='printTd'>{{item.fillingStatus}}</td>
  
          <td *ngIf="item.compiled && item.compiled.length==0 && !showingAllOrders && !multi" class='printTd'> </td>
          <td *ngIf="item.compiled && item.compiled.length>0 && !showingAllOrders && !multi" class='printTd'
            style="cursor: pointer;" (click)="openPackingModal(item.itemNumber, item.orderNumber,i)">
            {{item.compiled[0].sum}}</td>
            <td *ngIf="item._id!==EditRowId">
            <label (click)="openComponentsStatus(components,item.itemNumber,item.quantity,item.orderNumber)">Components - <label style="color:rgb(29, 187, 29);font-weight: bold">{{item.componentCheck}}</label></label><br>
            <label>Formules</label><input [(ngModel)]="item.formuleCheck" (change)="isChecked($event,item._id)" id="formuleCheckBox" type="checkbox">
           
            </td>
            <!-- <td *ngIf="item._id===EditRowId"><label>Components</label>
              <select [value]="item.componentCheck" #componentCheck >
              <option value="0">0</option>
              <option value="ordered">הוזמן</option>
              <option value="inStock">במלאי</option>
            </select>
            <br><br>
            
          </td> -->
          
          <td></td>
          <td></td>
          <!--<td><img  *ngIf="item._id!=EditRowId" src='/assets/images/deleteBtn.png' style='width:40px; cursor: pointer'  (click)="deleteItem(item)"><img  *ngIf="item._id===EditRowId" src='/assets/images/aprroved.png' style='width:30px; cursor: pointer' (click)="saveEdit()"></td>-->
  
          <td class='printTd'>
            <i class="ti-trash text-danger m-r-10" *ngIf="item._id!=EditRowId" (click)="deleteItem(item)"
              style="cursor: pointer;"></i>
            <i class="ti-check text-success m-r-10" *ngIf="item._id!=EditRowId"
              (click)="setOrderItemDone(item)" style="cursor: pointer;"></i>
            <i class="ti-save text-success m-r-10" *ngIf="item._id===EditRowId"
              (click)="saveEdit()" style="cursor: pointer;"></i>
          </td>
  
        </tr>
        <tr *ngIf="item._id== EditRowId2nd && expand==true;">
          <td colspan="5">
  
            <table class='detilasTable' width='105%'>
              <tr>
                <td></td>
                <td>
                  <h5>Batch</h5>
                </td>
                <!-- <td>{{item.batch}}</td> -->
                <td colspan="2"><label *ngIf="!editBatchN" (click)="editBatch(item.batch)"
                    style="cursor: pointer; margin-right: 10px;">{{item.batch}}</label>
                  <input *ngIf="editBatchN || item.batch == '' || item.batch == null || item.batch == undefined"
                    type='text' style="width:50%" #inputBatch></td>
                <td><button class='btn btn-success' (click)="setBatch(item, inputBatch.value, item.batch)">set</button>
                </td>
                <td><i class="ti-check text-success m-r-10" (click)="updateBatchExist(item , item.batch)"
                    style='cursor: pointer;'></i></td>
                <td></td>
              </tr>
              <tr *ngFor="let det of detailsArr">
                <td></td>
                <td>
                  <h5>Set Printing Schedule: </h5>
                </td>
                <td>{{det.type}} &nbsp;&nbsp; {{det.number}} &nbsp;&nbsp;&nbsp;<button class='btn btn-info'
                    (click)="setToPrintDetails(content, item, det)">print</button></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <h5>Set Filling Schedule: </h5>
                </td>
                <td><input #date type='date'></td>
                <td><input #shift type='text' placeholder="Shift"></td>
                <td><input #marks placeholder="Remarks" type='marks' [value]="item.itemRemarks"></td>
                <td style="width:100px">
                  <input type="radio" name="type" #type value='basic' [(ngModel)]="chosenType" checked>Basic<br>
                  <input type="radio" name="type" #type value='tube' [(ngModel)]="chosenType">Tube<br>
                  <input type="radio" name="type" #type value='mkp' [(ngModel)]="chosenType">Mkp<br>
                  <input type="radio" name="type" #type value='sachet' [(ngModel)]="chosenType">Sachet<br>
                  <input type="radio" name="type" #type value='laser' [(ngModel)]="chosenType">Laser<br>
                  <input type="radio" name="type" #type value='stickers' [(ngModel)]="chosenType">Stickers<br>
                </td>
                <td><button (click)='setSchedule(item ,type.value)' class='btn btn-success'>Set</button></td>
              </tr>
              <tr>
                <td></td>
                <td>
                  <h5>Set Barcode Print: </h5>
                </td>
                <td><input #mkpProdDate type='date'></td>
                <td><input #mkpProdRemarks placeholder="PO" type='marks' [value]="item.itemRemarks"></td>
                <td><input #mkpProdInvoice placeholder="Invoice" type='text'></td>
                <td>
                </td>
                <td><button (click)='setMkpSchedule(item , mkpProdDate.value, mkpProdRemarks.value , mkpProdInvoice.value)'
                    class='btn btn-success'>Set</button></td>
              </tr>
            </table>
            <br>
            <!-- <table class='detilasTable' width='105%'>
              <tr>
                <td></td>
                <td></td>
                <td></td>
                <td>
                  <h5>תיעוד מוצרים מוגמרים לפני משלוח</h5>
                </td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr>
                <td>Costumer Number:<input [(ngModel)]="documentationBeforeSend.costumerNumber" type="number" /></td>
                <td></td>
                <td></td>
                <td>Costumer Name:<input [(ngModel)]="documentationBeforeSend.costumerName" type="text" /></td>
                <td></td>
                <td></td>
                <td>Date:<input [(ngModel)]="documentationBeforeSend.date" type="date" /></td>
              </tr>
              <tr>
                <td>Item Number:<input [(ngModel)]="documentationBeforeSend.itemNumber" type="text" /></td>
                <td>Batch:<input [(ngModel)]="documentationBeforeSend.batchNumber" type="text" /></td>
                <td>Cartons Number:<input [(ngModel)]="documentationBeforeSend.cartonsNumber" type="number" /></td>
                <td>Units Number In Carton:<input [(ngModel)]="documentationBeforeSend.unitCartonNumber" type="number" />
                </td>
                <td>Units Number in Part Carton:<input [(ngModel)]="documentationBeforeSend.partCartonNumber"
                    type="number" /></td>
                <td>Sum:<input (click)="calculateAllUnits()" [(ngModel)]="documentationBeforeSend.sum" type="text" /></td>
                <td><button class="btn btn-success" (click)="saveProductDoc()">Save</button></td>
              </tr>
             <tr>
                <td></td>
                <td>
                  <h5>Set MKP Production Schedule: </h5>
                </td>
                <td><input #mkpProdDate type='date'></td>
                <td><input #mkpProdRemarks placeholder="Remarks" type='marks' [value]="item.itemRemarks"></td>
                <td></td>
                <td>
                  <input type="radio" name="mkpType" #mkpType value='liquid' [(ngModel)]="chosenMkpType" checked>Liquid<br>
                  <input type="radio" name="mkpType" #mkpType value='powder' [(ngModel)]="chosenMkpType">Powder<br>
                </td>
                <td><button (click)='setMkpSchedule(item ,mkpType.value, mkpProdDate.value, mkpProdRemarks.value)' class='btn btn-success'>Set</button></td>
              </tr>
            </table> -->
  
          </td>
        </tr>
  
      </ng-container>
  
    </tbody>
  
  </table> 
</mat-tab>
  <mat-tab label="Production Requirements">
    <div class="container-fluid">
      <div class="row">
        <div class="col-4 text-center">
         <button style="background:green;width:130px" class="btn">In Stock</button>
         <button style="background:lightcoral;width:130px" class="btn">Not In Stock</button>
         <button style="background:lightblue;width:130px" class="btn">Ordered</button>
        </div>
        <div class="col-4 text-center">
          <button class="btn btn-success" (click)="createProdRequirements()">Create Report</button>
        </div>
        <div class="col-4 text-center">
         
        </div>
      </div>
      <div class="row">
        <div class="col-12">
         <table class="table table-bordered">
      <thead style="box-shadow: inset 0px 0px 4px 1px black;">
        <tr>
          <th style="width:5%">Item Number</th>
          <th style="width:10%">Item Name</th>
          <th style="width:5%">Quantity</th>
          <th style="width:20%">Components</th>
          <th style="width:20%">Packages</th>
          <th style="width:20%"> Carton Master</th>
          <th style="width:20%">Stickers</th>
          <th></th>

        </tr>
      </thead>
      <tbody>
        <tr style="border-bottom: 1px solid black !important;box-shadow: inset 0px 0px 4px 1px black;" *ngFor="let item of productionRequirements">
          <td style="width:5%">{{item.itemNumber}}</td>
          <td style="width:10%">{{item.discription}}</td>
          <td style="width:5%">{{item.quantity}}</td>
          <td style="width:20%" [ngClass]="{'inStock': item.componentStatus =='inStock', 'noStock':item.componentStatus=='noStock' , 'ordered':item.componentStatus=='ordered' }">
            <table>
              <tbody>
                <tr>
                  <td *ngIf="item.bottleNumber && item.bottleNumber != '---'">Bottle: {{item.bottleNumber}}</td>
                  <td *ngIf="item.sealNumber && item.sealNumber != '---'">Seal: {{item.sealNumber}}</td>
                  <td *ngIf="item.capNumber && item.capNumber != '---'">Cap: {{item.capNumber}}</td>
                  <td *ngIf="item.pumpNumber && item.pumpNumber != '---'">Pump: {{item.pumpNumber}}</td>
                  <td *ngIf="EditRowId !== item._id && item.bottleNumber && item.bottleNumber != '---' || item.sealNumber && item.sealNumber != '---' || item.capNumber && item.capNumber != '---' || item.pumpNumber && item.pumpNumber != '---' " (click)="edit(item._id)">{{item.componentRemarks}}</td>
                  <td *ngIf="EditRowId === item._id"><textarea [(ngModel)]="item.componentRemarks" #componentRemarks></textarea></td>
                </tr>
              </tbody>
            </table>
            <select *ngIf="item.bottleNumber && item.bottleNumber != '---' || item.sealNumber && item.sealNumber != '---' || item.capNumber && item.capNumber != '---' || item.pumpNumber && item.pumpNumber != '---' " (change)="changeReqStatus($event,item._id,'component')" class="form-control" style="margin-top:20px;width:95px;">
              <option value=""></option>
              <option value="noCheck">לא נבדק</option>
              <option value="inStock">יש במלאי</option>
              <option value="noStock">אין במלאי</option>
              <option value="ordered">הוזמן</option>
            </select>
          </td>
          <td style="width:20%" [ngClass]="{'inStock': item.packageStatus =='inStock', 'noStock':item.packageStatus=='noStock' , 'ordered':item.packageStatus=='ordered' }">
            <table>
              <tbody>
                <tr>
                  <td *ngIf="item.boxNumber">{{item.boxNumber}}</td>
                  <td *ngIf="EditRowId !== item._id && item.boxNumber" (click)="edit(item._id)">{{item.packageRemarks}}</td>
                  <td *ngIf="EditRowId === item._id"><textarea [(ngModel)]="item.packageRemarks" #packageRemarks></textarea></td>
                </tr>
              </tbody>
            </table>
            <select *ngIf="item.boxNumber" (change)="changeReqStatus($event,item._id,'package')" class="form-control" style="margin-top:20px;width:95px;display:flex">
              <option value=""></option>
              <option value="noCheck">No Check</option>
              <option value="inStock">In Stock</option>
              <option value="noStock">Not In Stock</option>
              <option value="ordered">Orderd</option>
            </select>
          </td>
          <td style="width:20%" [ngClass]="{'inStock': item.cartonStatus =='inStock', 'noStock':item.cartonStatus=='noStock' , 'ordered':item.cartonStatus=='ordered' }">
            
            <table>
              <tbody>
                <tr>
                  <td *ngIf="item.cartonNumber">Carton: {{item.cartonNumber}}</td>
                  <td *ngIf="item.cartonNumber">Pcs: {{item.PcsCarton}}</td>
                  <td *ngIf="EditRowId !== item._id && item.cartonNumber" (click)="edit(item._id)">{{item.cartonRemarks}}</td>
                  <td *ngIf="EditRowId === item._id"><textarea [(ngModel)]="item.cartonRemarks" #cartonRemarks ></textarea></td>
                </tr>
              </tbody>
            </table>
            <select *ngIf="item.cartonNumber" (change)="changeReqStatus($event,item._id,'carton')" class="form-control" style="margin-top:20px;width:95px;">
              <option value=""></option>
            <option value="noCheck">No Check</option>
              <option value="inStock">In Stock</option>
              <option value="noStock">Not In Stock</option>
              <option value="ordered">Orderd</option>
            </select>
          </td>
          <td style="width:20%" [ngClass]="{'inStock': item.stickerStatus =='inStock', 'noStock':item.stickerStatus=='noStock' , 'ordered':item.stickerStatus=='ordered' }">
            <table>
              <tbody>
                <tr>
                  <td *ngIf="item.stickerNumber">{{item.stickerNumber}}</td>
                  <td *ngIf="EditRowId !== item._id && item.stickerNumber" (click)="edit(item._id)">{{item.stickerRemarks}}</td>
                  <td *ngIf="EditRowId === item._id"><textarea [(ngModel)]="item.stickerRemarks" #stickerRemarks></textarea></td>
                </tr>
              </tbody>
            </table>
            <select *ngIf="item.stickerNumber" (change)="changeReqStatus($event,item._id,'sticker')" class="form-control" style="margin-top:20px;width:95px;">
              <option value=""></option>
            <option value="noCheck">No Check</option>
              <option value="inStock">In Stock</option>
              <option value="noStock">Not In Stock</option>
              <option value="ordered">Orderd</option>
            </select>
          </td>
          <td><i (click)="saveItemRemarks(item._id)" *ngIf="EditRowId === item._id" class="fa fa-save"></i></td>
        </tr>
      </tbody>
    </table> 
        </div>
      </div>
    </div> 
    
  </mat-tab>
</mat-tab-group>


<br>


















<!-- Print schedule Modal for open order items -->

<ng-template #content let-c="close" let-d="dismiss">

  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Print Schedule</h4>
    <!--<button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">-->
    <button type="button" class="close" aria-label="Close" (click)="c('Cross click')">
      <!--  <button type="button" class="close" aria-label="Close" (click)="d('Cross click')">-->
      <span aria-hidden="true">&times;</span>
    </button>
  </div>

  <div class="modal-body">
    <div class="form-group">
      <label for="a">Amount</label>
      <div class="input-group">
        <input class="form-control mb-4" placeholder="Amount" [(ngModel)]="printSchedule.qty">
      </div>
    </div>

    <div class="form-group">
      <label for="a">Schedule Date</label>
      <div class="input-group">
        <input type="date" class="form-control mb-4" placeholder="Schedule Date"
          [(ngModel)]="printSchedule.scheduleDate">
      </div>
    </div>

    <div class="form-group">
      <label for="a">Date</label>
      <div class="input-group">
        <input type="date" class="form-control mb-4" placeholder="Date" [(ngModel)]="printSchedule.date">
      </div>
    </div>




    <div class="form-group">
      <label for="a">Transfer to</label>
      <div class="input-group">
        <select name="nextStage" id="nextStage" class="form-control mb-4" [(ngModel)]="printSchedule.nextStation">
          <option value="production">Production</option>
          <option value="filling">Filling</option>
          <option value="packing">Packing</option>
        </select><br>
        <!-- <input class="form-control mb-4" placeholder="Invoice Adress" [(ngModel)]="costumer.invoice"> -->
      </div>
    </div>


    <div class="form-group">
      <label for="a">Color</label>
      <div class="input-group">
        <input class="form-control mb-8" placeholder="color" [(ngModel)]="printSchedule.color">
      </div>
    </div>

    <div class="form-group">
      <label for="a">Print type</label>
      <div class="input-group">
        <select name="printType" id="printType" class="form-control mb-4" [(ngModel)]="printSchedule.printType">
          <option value="round">Round</option>
          <option value="Straight">Straight</option>
        </select><br>
      </div>
    </div>

    <div class="form-group">
      <label for="a">Remarks </label>
      <div class="input-group">
        <textarea [(ngModel)]="printSchedule.marks" class="form-control"></textarea>
      </div>
    </div>

    <div class="form-group">
      <label for="a">Image </label>
      <div class="input-group" id='img-conatiner'>
        <img *ngIf="plateImg!=''" [src]='plateImg' style='width:100%;height:100%;'>
        <p *ngIf="plateImg==''">Printing Plate Image Missing</p>
      </div>
      <!-- <div #container>
      </div> -->
    </div>

  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-outline-dark" (click)="c('Saved')">Save</button>
  </div>

</ng-template>





<div *ngIf="packingModal==true" id="myModal" class="modal2"
  style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:230px;top:130px; box-shadow: 0px 0px 39px 8px rgba(0,0,0,0.3);'>

  <!-- Modal content -->
  <div dir="ltr" class="modal-content" style='width:650px' id='modelB'>
    <div class="modal-header">
      <button class="btn-success" [printStyle]="{tr : {'border': 'solid 1px black'}, td : {'border': 'solid 1px black'}}" printSectionId="modelB" ngxPrint>Print</button>
      <span class="close" id="closeId2" (click)="packingModal=false;newItem='';">&times;</span>
      <h2 id='div_h3'>{{openOrderPackingModalHeader}}</h2><br>
    </div>

    <div class="modal-body" style="overflow-y:scroll; overflow-x:hidden; height: auto; padding-left: 0px;text-align: center;">
      <!-- <div clas="modalFullWidth" width="100%">

        </div> -->
      <!-- <h4>{{openItemPackingModalHeader}}</h4>
      <table class="itemPackings" width="100%">
        <thead>
          <tr>
            <th><b>מספר פריט</b></th>
            <th><b>יח' בקרטון</b></th>
            <th><b>קרטונים במשטח</b></th>
            <th><b>מספר משטח</b></th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let itemPackingPallet of itemPackingList">
            <td>{{itemPackingPallet.itemNumber}}</td>
            <td>{{itemPackingPallet.pcsCtn}}</td>
            <td>{{itemPackingPallet.ctnPallet}}</td>
            <td>{{itemPackingPallet.palletNumber}}</td>
          </tr>
        </tbody>
      </table>
      <br><br> -->

      <div class="container">
        <h4 width="100%" class="text-center">כל הפריטים הארוזים</h4> <br>
        <div class="orerPallets row" *ngFor="let orderPallet of orderPalletsArr" class="width: 100%; ">
          <br>
          <div class="row" style="width: 100%; text-align: right">
            <div style="width: 100%;" class="">
              <span class="float-sm-right" style="display: inline-block"> משטח מספר {{orderPallet.palletNumber}}
                &nbsp;&nbsp;</span>
              <span class="float-sm-right" style="display: inline-block"> {{orderPallet.palletMesures}} מידות
                &nbsp;&nbsp;</span>
              <span class="float-sm-right" style="display: inline-block"> משקל {{orderPallet.palletWeight}}
                &nbsp;&nbsp;</span>
            </div>

            <table class="orerPalletsTable" width="100%">
              <thead>
                <tr>
                  <th><b>סה"כ</b></th>
                  <th><b>יח' בקרטון</b></th>
                  <th><b>קרטונים במשטח</b></th>
                  <th><b>מספר פריט</b></th>

                </tr>
              </thead>
              <tbody>
                <ng-container *ngFor="let orderitemPackingPallet of orderPackingList">
                  <tr *ngIf="orderitemPackingPallet.palletId == orderPallet.palletId "
                    [style.background-color]="orderitemPackingPallet.lineColor">
                    <td>{{orderitemPackingPallet.totalAmount}}</td>
                    <td>{{orderitemPackingPallet.pcsCtn}}</td>
                    <td>{{orderitemPackingPallet.ctnPallet}}</td>
                    <td>{{orderitemPackingPallet.itemNumber}}</td>
                  </tr>
                </ng-container>
                <!-- <tr *ngFor="let orderitemPackingPallet of orderPackingList" [style.background-color]="orderitemPackingPallet.lineColor">
                
                <ng-container *ngIf="orderitemPackingPallet.palletId == orderPallet.palletId "  >
                  <td>{{orderitemPackingPallet.itemNumber}}</td>
                  <td>{{orderitemPackingPallet.pcsCtn}}</td>
                  <td>{{orderitemPackingPallet.ctnPallet}}</td>
                </ng-container>
              </tr> -->
              </tbody>
            </table>
          </div>
        </div>
      </div>

    </div>
    <div class="modal-footer">
      <!-- <button  class="btn btn-success" (click)="updateItemPacking(itemNumber)" >עדכן</button> -->
    </div>
  </div>
</div>











<div *ngIf="cmptModal==true" id="cmptModal" class="modal3"
  style='width: 90%;border:1px; border-radius:5px;z-index: 1;position: fixed; left:100px;top:130px; box-shadow: 0px 0px 39px 8px rgba(0,0,0,0.3);'>

  <!-- Modal content -->
  <div class="modal-content" id='modelC'>
    <div class="modal-header">

      <span class="close" id="closeId3" (click)="cmptModal=false ; newItem='';">&times;</span>
      <h2 id='div_h3'>{{openOrderPackingModalHeader}}</h2><br>
    </div>

    <div class="modal-body" style="overflow-y:scroll; ">
      <div *ngIf="itemTreeRemarks.length>0" style="width: 100%;">
        <p style="font-size: 20px; color:red; direction: rtl; float: right; padding-right:10px "><b>יתכן מידע נוסף
            בהערות של הפריט קרטון ביניים/צלופן/אריזות אישיות</b></p>
      </div>
      <div class="cmptListContainer">


        <div *ngIf="bottleList.length>0" class="cmptListDiv">
          <h5>Bottles</h5>
          <div *ngFor="let bottle of bottleList" class="cmptListData">
            <label>Number: {{bottle.bottleNumber}}</label> &nbsp;&nbsp;
            <label>Quantity: {{bottle.qnt}}</label> &nbsp;&nbsp;
            <label [ngClass]="{ minAmount: bottle.qnt > bottle.amount}">Amount: {{bottle.amount}}</label>
          </div>
        </div>

        <div *ngIf="capList.length>0" class="cmptListDiv">
          <h5>Caps</h5>
          <div *ngFor="let cap of capList" class="cmptListData">
            <label>Number: {{cap.capNumber}}</label> &nbsp;&nbsp;
            <label>Quantity: {{cap.qnt}}</label> &nbsp;&nbsp;
            <label>Amount: {{cap.amount}}</label>
          </div>
        </div>
        <div *ngIf="pumpList.length>0" class="cmptListDiv">
          <h5>Pumps</h5>
          <div *ngFor="let pump of pumpList" class="cmptListData">
            <label>Number: {{pump.pumpNumber}}</label> &nbsp;&nbsp;
            <label>Quantity: {{pump.qnt}}</label> &nbsp;&nbsp;
            <label>Amount: {{pump.amount}}</label>
          </div>
        </div>
        <div *ngIf="sealList.length>0" class="cmptListDiv">
          <h5>Seals</h5>
          <div *ngFor="let seal of sealList" class="cmptListData">
            <label>Number: {{seal.sealNumber}}</label> &nbsp;&nbsp;
            <label>Quantity: {{seal.qnt}}</label> &nbsp;&nbsp;
            <label>Amount: {{seal.amount}}</label>
          </div>
        </div>
        <div *ngIf="stickerList.length>0" class="cmptListDiv">
          <h5>Stickers</h5>
          <div *ngFor="let sticker of stickerList" class="cmptListData">
            <label>Number: {{sticker.stickerNumber}}</label> &nbsp;&nbsp;
            <label>Quantity: {{sticker.qnt}}</label> &nbsp;&nbsp;

          </div>
        </div>
        <div *ngIf="boxList.length>0" class="cmptListDiv">
          <h5>Boxes</h5>
          <div *ngFor="let box of boxList" class="cmptListData">
            <label>Number: {{box.boxNumber}}</label> &nbsp;&nbsp;
            <label>Quantity: {{box.qnt}}</label> &nbsp;&nbsp;
            <label>Amount: {{box.amount}}</label>
          </div>
        </div>
        <div *ngIf="cartonList.length>0" class="cmptListDiv">
          <h5>Master Catons</h5>
          <div *ngFor="let carton of cartonList" class="cmptListData">
            <label>Number: {{carton.cartonNumber}}</label> &nbsp;&nbsp;
            <label>Quantity: {{carton.qnt}}</label> &nbsp;&nbsp;
            <label>Amount: {{carton.amount}}</label>
          </div>
        </div>
        <div *ngIf="platesList.length>0" class="cmptListDiv">
          <h5>Plates</h5>
          <div *ngFor="let plate of platesList" class="cmptListData">
            <label>Number: {{plate.palletNumber}}</label> &nbsp;&nbsp;
          </div>
        </div>
      </div>

      <br><br>
      <!-- <div clas="modalFullWidth" width="100%">

      </div> -->

      <div style="width: 100%; float: right ;" class="itemTreesTb">

        <table class="table table-bordered" style="width: 98% ; ">
          <thead>
            <!-- <tr scope="row">

                  </tr> -->
            <tr scope="row">
              <th scope="col">
                <img src="../../../assets/images/excel.png" alt="excel export"
                  (click)="exportAsXLSX(orderItemsComponents)" style="width: 35px; float: left; cursor: pointer;">
                <b>#</b></th>
              <th scope="col"><b>Item Number</b></th>
              <th scope="col"><b>Name</b></th>
              <th scope="col"><b>Quantity in Stock</b></th>
              <th scope="col"><b>Quantity</b></th>
              <th scope="col"><b>Bottle</b></th>
              <th scope="col"><b>Net Weight</b></th>
              <th scope="col"><b>Cap</b></th>
              <th scope="col"><b>Pump</b></th>
              <th scope="col"><b>Seal</b></th>
              <th scope="col"><b>Sticker1</b></th>
              <th scope="col"><b>Sticker2</b></th>
              <th scope="col"><b>Box1</b></th>
              <th scope="col"><b>Box2</b></th>
              <th scope="col"><b>Master Carton</b></th>
              <th scope="col"><b>PcsCaton</b></th>
              <th scope="col"><b>Plate1</b></th>
              <th scope="col"><b>Plate2</b></th>
              <th scope="col"><b>Plate3</b></th>
              <th scope="col"><b>Remarks</b></th>
              <th scope="col"><b>Important Note</b></th>
            </tr>
          </thead>
          <tbody *ngFor="let item of ordersItems">
            <tr scope="row" *ngFor="let itemCmpts of orderItemsComponents; let i =index">
              <td scope="col">{{i+1}}</td>
              <td scope="col">{{itemCmpts.itemNumber}}</td>
              <td scope="col">{{itemCmpts.itemName}}</td>
              <td scope="col" style=" background-color:aliceblue; ">{{itemCmpts.currStock}}</td>
              <td scope="col">{{itemCmpts.quantity}}</td>
              <td scope="col">{{itemCmpts.bottleNumber}}</td>
              <td scope="col">{{item.netWeightGr}}</td>
              <td scope="col">{{itemCmpts.capNumber}}</td>
              <td scope="col">{{itemCmpts.pumpNumber}}</td>
              <td scope="col">{{itemCmpts.sealNumber}}</td>
              <td scope="col">{{itemCmpts.stickerNumber}}</td>
              <td scope="col">{{itemCmpts.stickerTypeK}}</td>
              <td scope="col">{{itemCmpts.boxNumber}}</td>
              <td scope="col">{{itemCmpts.boxTypeK}}</td>
              <td scope="col">{{itemCmpts.cartonNumber}}</td>
              <td scope="col">{{itemCmpts.PcsCarton}}</td>
              <td scope="col">{{itemCmpts.pallet}}</td>
              <td scope="col">{{itemCmpts.pallet2}}</td>
              <td scope="col">{{itemCmpts.pallet3}}</td>
              <td scope="col">{{itemCmpts.proRemarks}}</td>
              <td scope="col">{{itemCmpts.impRemarks}}</td>
            </tr>
          </tbody>
        </table>
      </div>

    </div>
    <div class="modal-footer">
      <!-- <button  class="btn btn-success" (click)="updateItemPacking(itemNumber)" >עדכן</button> -->
    </div>
  </div>
</div>




<!-- Modal -->

<ng-template #components let-modal>

    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title" id="modal-basic-title">Order Amounts</h4>
      </div>
      <div class="modal-body">
        <table class='table'>
          <thead class='tableHeader'>
  
            <tr>
              <th>Bottle</th>
              <th>Pump</th>
              <th>Seal</th>
              <th>Cap</th>
              <th>Carton</th>
              
            </tr>
          </thead>
          <tbody id="table_body">
            <tr>
            <td [ngClass]="itemDetails.hasEnoughBottles?'lightgreen':'lightred'" *ngIf="itemDetails.bottleNumber != '---'">Quantity: {{itemDetails.orderItemQuantity}} <br> Bottle: {{itemDetails.bottleNumber}}</td>
            <td *ngIf="itemDetails.bottleNumber == '---'" ></td>
            <td [ngClass]="itemDetails.hasEnoughPumps?'lightgreen':'lightred'" *ngIf="itemDetails.pumpNumber != '---'">Quantity: {{itemDetails.orderItemQuantity}} <br> Pump: {{itemDetails.pumpNumber}}</td>
            <td *ngIf="itemDetails.pumpNumber == '---'" ></td>
            <td [ngClass]="itemDetails.hasEnoughSeals?'lightgreen':'lightred'"  *ngIf="itemDetails.sealNumber != '---'">Quantity: {{itemDetails.orderItemQuantity}} <br> Seal: {{itemDetails.sealNumber}}</td>
            <td *ngIf="itemDetails.sealNumber == '---'" ></td>
            <td [ngClass]="itemDetails.hasEnoughCaps?'lightgreen':'lightred'" *ngIf="itemDetails.capNumber != '---'">Quantity: {{itemDetails.orderItemQuantity}} <br> Cap: {{itemDetails.capNumber}}</td>
            <td *ngIf="itemDetails.capNumber == '---'" ></td>
            <td [ngClass]="itemDetails.hasEnoughCartons?'lightgreen':'lightred'" *ngIf="itemDetails.cartonNumber != '---'">Quantity: {{itemDetails.cartons}} <br> Carton: {{itemDetails.cartonNumber}}</td>
            <td *ngIf="itemDetails.cartonNumber == '---'" ></td>
          
            </tr>
          </tbody>
        </table>
        <br>
        <table class='table'>
            <thead class='tableHeader'>
              <tr>
                <th>Total Order Amounts</th>
              </tr>
            </thead>
            <tbody id="table_body">
              <tr>

              </tr>
            </tbody>
          </table>
      </div>
      <div class="modal-footer">
      </div>
    </div>
  
  </ng-template>
  

<ng-template #contentTwo let-modal>

  <div class="modal-content">
    <div class="modal-header">
      <h4 class="modal-title" id="modal-basic-title">Order Amounts</h4>
    </div>
    <div class="modal-body">
      <table class='table'>
        <thead class='tableHeader'>

          <tr>
            
            <th>מק"ט</th>
            <th>אצווה</th>
            <th>כמות הזמנה</th>
            <th>כמות טופס מילוי</th>
            <th>כמות טופס אריזה</th>
           
            <th></th>
          </tr>
        </thead>
        <tbody id="table_body">
          <tr *ngFor="let item of ordersItems;" style="box-shadow: inset 1px -1px 2px 0px black; margin-top: 1px;">
            
            <td>{{item.itemNumber}}</td>
            <td>{{item.batch}}</td>
            <td>{{item.quantity}}</td>
            <td>{{item.quantityProduced}}</td>
            <td>{{item.totalUnits}}</td>
            <td><i class="ti-check text-success m-r-10" (click)="setOrderItemDone(item)" style="cursor: pointer;"></i></td>


          </tr>
        </tbody>
      </table>
    </div>
    <div class="modal-footer">
    </div>
  </div>

</ng-template>

<ng-template #formuleByItem let-modal>
  <div class="modal-header text-center">
    <h4 class="modal-title" id="modal-basic-title">Formule {{currFormule.formuleNumber}}</h4>
    <!-- <button class="btn btn-success"  printSectionId="print-section" [printStyle]="{td : {'border': 'solid 1px black'},button : {'display':'none'}}" ngxPrint>print</button> &nbsp; -->
  </div>
  <div class="modal-body">
    <div class="row p-3">
      <div class="col-6">
      <input placeholder="Quantity" [(ngModel)]="newProductionQuantity" class="form-control" type="number">
      </div>
      <div class="col-6">
        <input placeholder="Net Weight gr"  [(ngModel)]="newProductionNetWeightGr" class="form-control" type="number">
      </div>
    </div>
    <div class="row p-3">
      <div class="col-12">
       <button class="btn btn-success form-control" (click)="sendToProduction()"  >Send To Production</button>   
      </div>
    </div>
   
  </div>
  <!-- <div class="modal-body">
  
      <div id="print-section">
    <table style="width:100%" class='table'>
      <thead style="box-shadow:1px 1px 3px black; background-color: rgb(90, 149, 197)">
        <div>
        <tr *ngFor="let formule of currFormule">
          <th>Number: {{formule.number}}</th>
          <th></th>
          <th>Name: {{formule.name}}</th>
          <th></th>
          <th></th>
          <th>Last Updated: {{formule.lastUpdate | date: 'dd/MM/yyyy' }}</th>
        </tr>
      </div>
      </thead>
      <tbody class="formuleTable" id="table_body">
     
       <div *ngIf="currPhase[0]">
        <tr style="background-color: rgb(192, 197, 201)" *ngIf="currPhase[0].phaseName">
          <td>Phase: {{currPhase[0].phaseName}}</td>
          <td></td>
          <td>Number: {{currPhase[0].phaseNumber}}</td>
          <td></td>
          <td></td>
          <td>Instructions: {{currPhase[0].instructions}}</td>
        </tr>
        <tr>
          <td><strong>Item Name</strong></td>
          <td><strong>Item Number</strong></td>
          <td><strong>Quantity</strong></td>
          <td><strong>Unit Measure</strong></td>
          <td><strong>Percentage</strong></td>
          <td><strong>Temp</strong></td>
        </tr>
        <tr>
          <td style="width:20%">{{currPhase[0].items[0].itemName}}</td>
          <td>{{currPhase[0].items[0].itemNumber}}</td>
          <td>{{currPhase[0].items[0].quantity}}</td>
          <td>{{currPhase[0].items[0].quantityUnits}}</td>
          <td>{{currPhase[0].items[0].percentage}}</td>
          <td>{{currPhase[0].items[0].temp}}</td>
        </tr>
        <tr>
          <td style="width:20%">{{currPhase[0].items[1].itemName}}</td>
          <td>{{currPhase[0].items[1].itemNumber}}</td>
          <td>{{currPhase[0].items[1].quantity}}</td>
          <td>{{currPhase[0].items[1].quantityUnits}}</td>
          <td>{{currPhase[0].items[1].percentage}}</td>
          <td>{{currPhase[0].items[1].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[2]">
          <td style="width:20%">{{currPhase[0].items[2].itemName}}</td>
          <td>{{currPhase[0].items[2].itemNumber}}</td>
          <td>{{currPhase[0].items[2].quantity}}</td>
          <td>{{currPhase[0].items[2].quantityUnits}}</td>
          <td>{{currPhase[0].items[2].percentage}}</td>
          <td>{{currPhase[0].items[2].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[3]">
          <td style="width:20%">{{currPhase[0].items[3].itemName}}</td>
          <td>{{currPhase[0].items[3].itemNumber}}</td>
          <td>{{currPhase[0].items[3].quantity}}</td>
          <td>{{currPhase[0].items[3].quantityUnits}}</td>
          <td>{{currPhase[0].items[3].percentage}}</td>
          <td>{{currPhase[0].items[3].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[4]">
          <td style="width:20%">{{currPhase[0].items[4].itemName}}</td>
          <td>{{currPhase[0].items[4].itemNumber}}</td>
          <td>{{currPhase[0].items[4].quantity}}</td>
          <td>{{currPhase[0].items[4].quantityUnits}}</td>
          <td>{{currPhase[0].items[4].percentage}}</td>
          <td>{{currPhase[0].items[4].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[5]">
          <td style="width:20%">{{currPhase[0].items[5].itemName}}</td>
          <td>{{currPhase[0].items[5].itemNumber}}</td>
          <td>{{currPhase[0].items[5].quantity}}</td>
          <td>{{currPhase[0].items[5].quantityUnits}}</td>
          <td>{{currPhase[0].items[5].percentage}}</td>
          <td>{{currPhase[0].items[5].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[6]">
          <td style="width:20%">{{currPhase[0].items[6].itemName}}</td>
          <td>{{currPhase[0].items[6].itemNumber}}</td>
          <td>{{currPhase[0].items[6].quantity}}</td>
          <td>{{currPhase[0].items[6].quantityUnits}}</td>
          <td>{{currPhase[0].items[6].percentage}}</td>
          <td>{{currPhase[0].items[6].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[7]">
          <td style="width:20%">{{currPhase[0].items[7].itemName}}</td>
          <td>{{currPhase[0].items[7].itemNumber}}</td>
          <td>{{currPhase[0].items[7].quantity}}</td>
          <td>{{currPhase[0].items[7].quantityUnits}}</td>
          <td>{{currPhase[0].items[7].percentage}}</td>
          <td>{{currPhase[0].items[7].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[8]">
          <td style="width:20%">{{currPhase[0].items[8].itemName}}</td>
          <td>{{currPhase[0].items[8].itemNumber}}</td>
          <td>{{currPhase[0].items[8].quantity}}</td>
          <td>{{currPhase[0].items[8].quantityUnits}}</td>
          <td>{{currPhase[0].items[8].percentage}}</td>
          <td>{{currPhase[0].items[8].temp}}</td>
        </tr>
        <tr *ngIf="currPhase[0].items[9]">
          <td style="width:20%">{{currPhase[0].items[9].itemName}}</td>
          <td>{{currPhase[0].items[9].itemNumber}}</td>
          <td>{{currPhase[0].items[9].quantity}}</td>
          <td>{{currPhase[0].items[9].quantityUnits}}</td>
          <td>{{currPhase[0].items[9].percentage}}</td>
          <td>{{currPhase[0].items[9].temp}}</td>
        </tr>
      </div>
      
        <div *ngIf="currPhase[1]">
        <tr style="background-color: rgb(192, 197, 201)" *ngIf="currPhase[1].phaseName">
          <td>Phase: {{currPhase[1].phaseName}}</td>
          <td></td>
          <td>Number: {{currPhase[1].phaseNumber}}</td>
          <td></td>
          <td></td>
          <td>Instructions: {{currPhase[1].instructions}}</td>
        </tr>
        <tr>
          <td><strong>Item Name</strong></td>
          <td><strong>Item Number</strong></td>
          <td><strong>Quantity</strong></td>
          <td><strong>Unit Measure</strong></td>
          <td><strong>Percentage</strong></td>
          <td><strong>Temp</strong></td>
        </tr>
        <tr>
            <td style="width:20%">{{currPhase[1].items[0].itemName}}</td>
            <td>{{currPhase[1].items[0].itemNumber}}</td>
            <td>{{currPhase[1].items[0].quantity}}</td>
            <td>{{currPhase[1].items[0].quantityUnits}}</td>
            <td>{{currPhase[1].items[0].percentage}}</td>
            <td>{{currPhase[1].items[0].temp}}</td>
          </tr>
          <tr>
            <td style="width:20%">{{currPhase[1].items[1].itemName}}</td>
            <td>{{currPhase[1].items[1].itemNumber}}</td>
            <td>{{currPhase[1].items[1].quantity}}</td>
            <td>{{currPhase[1].items[1].quantityUnits}}</td>
            <td>{{currPhase[1].items[1].percentage}}</td>
            <td>{{currPhase[1].items[1].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[2]">
            <td style="width:20%">{{currPhase[1].items[2].itemName}}</td>
            <td>{{currPhase[1].items[2].itemNumber}}</td>
            <td>{{currPhase[1].items[2].quantity}}</td>
            <td>{{currPhase[1].items[2].quantityUnits}}</td>
            <td>{{currPhase[1].items[2].percentage}}</td>
            <td>{{currPhase[1].items[2].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[3]">
            <td style="width:20%">{{currPhase[1].items[3].itemName}}</td>
            <td>{{currPhase[1].items[3].itemNumber}}</td>
            <td>{{currPhase[1].items[3].quantity}}</td>
            <td>{{currPhase[1].items[3].quantityUnits}}</td>
            <td>{{currPhase[1].items[3].percentage}}</td>
            <td>{{currPhase[1].items[3].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[4]">
            <td style="width:20%">{{currPhase[1].items[4].itemName}}</td>
            <td>{{currPhase[1].items[4].itemNumber}}</td>
            <td>{{currPhase[1].items[4].quantity}}</td>
            <td>{{currPhase[1].items[4].quantityUnits}}</td>
            <td>{{currPhase[1].items[4].percentage}}</td>
            <td>{{currPhase[1].items[4].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[5]">
            <td style="width:20%">{{currPhase[1].items[5].itemName}}</td>
            <td>{{currPhase[1].items[5].itemNumber}}</td>
            <td>{{currPhase[1].items[5].quantity}}</td>
            <td>{{currPhase[1].items[5].quantityUnits}}</td>
            <td>{{currPhase[1].items[5].percentage}}</td>
            <td>{{currPhase[1].items[5].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[6]">
            <td style="width:20%">{{currPhase[1].items[6].itemName}}</td>
            <td>{{currPhase[1].items[6].itemNumber}}</td>
            <td>{{currPhase[1].items[6].quantity}}</td>
            <td>{{currPhase[1].items[6].quantityUnits}}</td>
            <td>{{currPhase[1].items[6].percentage}}</td>
            <td>{{currPhase[1].items[6].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[7]">
            <td style="width:20%">{{currPhase[1].items[7].itemName}}</td>
            <td>{{currPhase[1].items[7].itemNumber}}</td>
            <td>{{currPhase[1].items[7].quantity}}</td>
            <td>{{currPhase[1].items[7].quantityUnits}}</td>
            <td>{{currPhase[1].items[7].percentage}}</td>
            <td>{{currPhase[1].items[7].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[8]">
            <td style="width:20%">{{currPhase[1].items[8].itemName}}</td>
            <td>{{currPhase[1].items[8].itemNumber}}</td>
            <td>{{currPhase[1].items[8].quantity}}</td>
            <td>{{currPhase[1].items[8].quantityUnits}}</td>
            <td>{{currPhase[1].items[8].percentage}}</td>
            <td>{{currPhase[1].items[8].temp}}</td>
          </tr>
          <tr *ngIf="currPhase[1].items[9]">
            <td style="width:20%">{{currPhase[1].items[9].itemName}}</td>
            <td>{{currPhase[1].items[9].itemNumber}}</td>
            <td>{{currPhase[1].items[9].quantity}}</td>
            <td>{{currPhase[1].items[9].quantityUnits}}</td>
            <td>{{currPhase[1].items[9].percentage}}</td>
            <td>{{currPhase[1].items[9].temp}}</td>
          </tr>
        </div>
        
           <div *ngIf="currPhase[2]">
           <tr style="background-color: rgb(192, 197, 201)" *ngIf="currPhase[2].phaseName">
              <td>Phase: {{currPhase[2].phaseName}}</td>
              <td></td>
              <td>Number: {{currPhase[2].phaseNumber}}</td>
              <td></td>
              <td></td>
              <td>Instructions: {{currPhase[2].instructions}}</td>
            </tr>
            <tr *ngIf="currPhase[2].phaseName">
              <td><strong>Item Name</strong></td>
              <td><strong>Item Number</strong></td>
              <td><strong>Quantity</strong></td>
              <td><strong>Unit Measure</strong></td>
              <td><strong>Percentage</strong></td>
              <td><strong>Temp</strong></td>
            </tr>
          <tr *ngIf="currPhase[2].items[0] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[0].itemName}}</td>
                <td>{{currPhase[2].items[0].itemNumber}}</td>
                <td>{{currPhase[2].items[0].quantity}}</td>
                <td>{{currPhase[2].items[0].quantityUnits}}</td>
                <td>{{currPhase[2].items[0].percentage}}</td>
                <td>{{currPhase[2].items[0].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[1] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[1].itemName}}</td>
                <td>{{currPhase[2].items[1].itemNumber}}</td>
                <td>{{currPhase[2].items[1].quantity}}</td>
                <td>{{currPhase[2].items[1].quantityUnits}}</td>
                <td>{{currPhase[2].items[1].percentage}}</td>
                <td>{{currPhase[2].items[1].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[2] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[2].itemName}}</td>
                <td>{{currPhase[2].items[2].itemNumber}}</td>
                <td>{{currPhase[2].items[2].quantity}}</td>
                <td>{{currPhase[2].items[2].quantityUnits}}</td>
                <td>{{currPhase[2].items[2].percentage}}</td>
                <td>{{currPhase[2].items[2].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[3] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[3].itemName}}</td>
                <td>{{currPhase[2].items[3].itemNumber}}</td>
                <td>{{currPhase[2].items[3].quantity}}</td>
                <td>{{currPhase[2].items[3].quantityUnits}}</td>
                <td>{{currPhase[2].items[3].percentage}}</td>
                <td>{{currPhase[2].items[3].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[4] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[4].itemName}}</td>
                <td>{{currPhase[2].items[4].itemNumber}}</td>
                <td>{{currPhase[2].items[4].quantity}}</td>
                <td>{{currPhase[2].items[4].quantityUnits}}</td>
                <td>{{currPhase[2].items[4].percentage}}</td>
                <td>{{currPhase[2].items[4].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[5] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[5].itemName}}</td>
                <td>{{currPhase[2].items[5].itemNumber}}</td>
                <td>{{currPhase[2].items[5].quantity}}</td>
                <td>{{currPhase[2].items[5].quantityUnits}}</td>
                <td>{{currPhase[2].items[5].percentage}}</td>
                <td>{{currPhase[2].items[5].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[6] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[6].itemName}}</td>
                <td>{{currPhase[2].items[6].itemNumber}}</td>
                <td>{{currPhase[2].items[6].quantity}}</td>
                <td>{{currPhase[2].items[6].quantityUnits}}</td>
                <td>{{currPhase[2].items[6].percentage}}</td>
                <td>{{currPhase[2].items[6].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[7] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[7].itemName}}</td>
                <td>{{currPhase[2].items[7].itemNumber}}</td>
                <td>{{currPhase[2].items[7].quantity}}</td>
                <td>{{currPhase[2].items[7].quantityUnits}}</td>
                <td>{{currPhase[2].items[7].percentage}}</td>
                <td>{{currPhase[2].items[7].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[8] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[8].itemName}}</td>
                <td>{{currPhase[2].items[8].itemNumber}}</td>
                <td>{{currPhase[2].items[8].quantity}}</td>
                <td>{{currPhase[2].items[8].quantityUnits}}</td>
                <td>{{currPhase[2].items[8].percentage}}</td>
                <td>{{currPhase[2].items[8].temp}}</td>
              </tr>
              <tr *ngIf="currPhase[2].items[9] && currPhase[2]">
                <td style="width:20%">{{currPhase[2].items[9].itemName}}</td>
                <td>{{currPhase[2].items[9].itemNumber}}</td>
                <td>{{currPhase[2].items[9].quantity}}</td>
                <td>{{currPhase[2].items[9].quantityUnits}}</td>
                <td>{{currPhase[2].items[9].percentage}}</td>
                <td>{{currPhase[2].items[9].temp}}</td>
              </tr> 
            </div>
              
              <div *ngIf="currPhase[3]">
               <tr style="background-color: rgb(192, 197, 201)" *ngIf="currPhase[3]">
                  <td>Phase: {{currPhase[3].phaseName}}</td>
                  <td></td>
                  <td>Number: {{currPhase[3].phaseNumber}}</td>
                  <td></td>
                  <td></td>
                  <td>Instructions: {{currPhase[3].instructions}}</td>
                </tr>
                <tr *ngIf="currPhase[3]">
                  <td><strong>Item Name</strong></td>
                  <td><strong>Item Number</strong></td>
                  <td><strong>Quantity</strong></td>
                  <td><strong>Unit Measure</strong></td>
                  <td><strong>Percentage</strong></td>
                  <td><strong>Temp</strong></td>
                </tr>
                <tr *ngIf="currPhase[3].items[0]">
                    <td style="width:20%">{{currPhase[3].items[0].itemName}}</td>
                    <td>{{currPhase[3].items[0].itemNumber}}</td>
                    <td>{{currPhase[3].items[0].quantity}}</td>
                    <td>{{currPhase[3].items[0].quantityUnits}}</td>
                    <td>{{currPhase[3].items[0].percentage}}</td>
                    <td>{{currPhase[3].items[0].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[1]">
                    <td style="width:20%">{{currPhase[3].items[1].itemName}}</td>
                    <td>{{currPhase[3].items[1].itemNumber}}</td>
                    <td>{{currPhase[3].items[1].quantity}}</td>
                    <td>{{currPhase[3].items[1].quantityUnits}}</td>
                    <td>{{currPhase[3].items[1].percentage}}</td>
                    <td>{{currPhase[3].items[1].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[2]">
                    <td style="width:20%">{{currPhase[3].items[2].itemName}}</td>
                    <td>{{currPhase[3].items[2].itemNumber}}</td>
                    <td>{{currPhase[3].items[2].quantity}}</td>
                    <td>{{currPhase[3].items[2].quantityUnits}}</td>
                    <td>{{currPhase[3].items[2].percentage}}</td>
                    <td>{{currPhase[3].items[2].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[3]">
                    <td style="width:20%">{{currPhase[3].items[3].itemName}}</td>
                    <td>{{currPhase[3].items[3].itemNumber}}</td>
                    <td>{{currPhase[3].items[3].quantity}}</td>
                    <td>{{currPhase[3].items[3].quantityUnits}}</td>
                    <td>{{currPhase[3].items[3].percentage}}</td>
                    <td>{{currPhase[3].items[3].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[4]">
                    <td style="width:20%">{{currPhase[3].items[4].itemName}}</td>
                    <td>{{currPhase[3].items[4].itemNumber}}</td>
                    <td>{{currPhase[3].items[4].quantity}}</td>
                    <td>{{currPhase[3].items[4].quantityUnits}}</td>
                    <td>{{currPhase[3].items[4].percentage}}</td>
                    <td>{{currPhase[3].items[4].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[5]">
                    <td style="width:20%">{{currPhase[3].items[5].itemName}}</td>
                    <td>{{currPhase[3].items[5].itemNumber}}</td>
                    <td>{{currPhase[3].items[5].quantity}}</td>
                    <td>{{currPhase[3].items[5].quantityUnits}}</td>
                    <td>{{currPhase[3].items[5].percentage}}</td>
                    <td>{{currPhase[3].items[5].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[6]">
                    <td style="width:20%">{{currPhase[3].items[6].itemName}}</td>
                    <td>{{currPhase[3].items[6].itemNumber}}</td>
                    <td>{{currPhase[3].items[6].quantity}}</td>
                    <td>{{currPhase[3].items[6].quantityUnits}}</td>
                    <td>{{currPhase[3].items[6].percentage}}</td>
                    <td>{{currPhase[3].items[6].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[7]">
                    <td style="width:20%">{{currPhase[3].items[7].itemName}}</td>
                    <td>{{currPhase[3].items[7].itemNumber}}</td>
                    <td>{{currPhase[3].items[7].quantity}}</td>
                    <td>{{currPhase[3].items[7].quantityUnits}}</td>
                    <td>{{currPhase[3].items[7].percentage}}</td>
                    <td>{{currPhase[3].items[7].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[8]">
                    <td style="width:20%">{{currPhase[3].items[8].itemName}}</td>
                    <td>{{currPhase[3].items[8].itemNumber}}</td>
                    <td>{{currPhase[3].items[8].quantity}}</td>
                    <td>{{currPhase[3].items[8].quantityUnits}}</td>
                    <td>{{currPhase[3].items[8].percentage}}</td>
                    <td>{{currPhase[3].items[8].temp}}</td>
                  </tr>
                  <tr *ngIf="currPhase[3].items[9]">
                    <td style="width:20%">{{currPhase[3].items[9].itemName}}</td>
                    <td>{{currPhase[3].items[9].itemNumber}}</td>
                    <td>{{currPhase[3].items[9].quantity}}</td>
                    <td>{{currPhase[3].items[9].quantityUnits}}</td>
                    <td>{{currPhase[3].items[9].percentage}}</td>
                    <td>{{currPhase[3].items[9].temp}}</td>
                  </tr>  
                </div>
                
                  <div *ngIf="currPhase[4]">
                  <tr style="background-color: rgb(192, 197, 201)" *ngIf="currPhase[4]">
                      <td>Phase: {{currPhase[4].phaseName}}</td>
                      <td></td>
                      <td>Number: {{currPhase[4].phaseNumber}}</td>
                      <td></td>
                      <td></td>
                      <td>Instructions: {{currPhase[4].instructions}}</td>
                    </tr>
                    <tr *ngIf="currPhase[4]">
                      <td><strong>Item Name</strong></td>
                      <td><strong>Item Number</strong></td>
                      <td><strong>Quantity</strong></td>
                      <td><strong>Unit Measure</strong></td>
                      <td><strong>Percentage</strong></td>
                      <td><strong>Temp</strong></td>
                    </tr>
                    <tr *ngIf="currPhase[4].items[0]">
                        <td style="width:20%">{{currPhase[4].items[0].itemName}}</td>
                        <td>{{currPhase[4].items[0].itemNumber}}</td>
                        <td>{{currPhase[4].items[0].quantity}}</td>
                        <td>{{currPhase[4].items[0].quantityUnits}}</td>
                        <td>{{currPhase[4].items[0].percentage}}</td>
                        <td>{{currPhase[4].items[0].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[1]">
                        <td style="width:20%">{{currPhase[4].items[1].itemName}}</td>
                        <td>{{currPhase[4].items[1].itemNumber}}</td>
                        <td>{{currPhase[4].items[1].quantity}}</td>
                        <td>{{currPhase[4].items[1].quantityUnits}}</td>
                        <td>{{currPhase[4].items[1].percentage}}</td>
                        <td>{{currPhase[4].items[1].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[2]">
                        <td style="width:20%">{{currPhase[4].items[2].itemName}}</td>
                        <td>{{currPhase[4].items[2].itemNumber}}</td>
                        <td>{{currPhase[4].items[2].quantity}}</td>
                        <td>{{currPhase[4].items[2].quantityUnits}}</td>
                        <td>{{currPhase[4].items[2].percentage}}</td>
                        <td>{{currPhase[4].items[2].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[3]">
                        <td style="width:20%">{{currPhase[4].items[3].itemName}}</td>
                        <td>{{currPhase[4].items[3].itemNumber}}</td>
                        <td>{{currPhase[4].items[3].quantity}}</td>
                        <td>{{currPhase[4].items[3].quantityUnits}}</td>
                        <td>{{currPhase[4].items[3].percentage}}</td>
                        <td>{{currPhase[4].items[3].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[4]">
                        <td style="width:20%">{{currPhase[4].items[4].itemName}}</td>
                        <td>{{currPhase[4].items[4].itemNumber}}</td>
                        <td>{{currPhase[4].items[4].quantity}}</td>
                        <td>{{currPhase[4].items[4].quantityUnits}}</td>
                        <td>{{currPhase[4].items[4].percentage}}</td>
                        <td>{{currPhase[4].items[4].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[5]">
                        <td style="width:20%">{{currPhase[4].items[5].itemName}}</td>
                        <td>{{currPhase[4].items[5].itemNumber}}</td>
                        <td>{{currPhase[4].items[5].quantity}}</td>
                        <td>{{currPhase[4].items[5].quantityUnits}}</td>
                        <td>{{currPhase[4].items[5].percentage}}</td>
                        <td>{{currPhase[4].items[5].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[6]">
                        <td style="width:20%">{{currPhase[4].items[6].itemName}}</td>
                        <td>{{currPhase[4].items[6].itemNumber}}</td>
                        <td>{{currPhase[4].items[6].quantity}}</td>
                        <td>{{currPhase[4].items[6].quantityUnits}}</td>
                        <td>{{currPhase[4].items[6].percentage}}</td>
                        <td>{{currPhase[4].items[6].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[7]">
                        <td style="width:20%">{{currPhase[4].items[7].itemName}}</td>
                        <td>{{currPhase[4].items[7].itemNumber}}</td>
                        <td>{{currPhase[4].items[7].quantity}}</td>
                        <td>{{currPhase[4].items[7].quantityUnits}}</td>
                        <td>{{currPhase[4].items[7].percentage}}</td>
                        <td>{{currPhase[4].items[7].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[8]">
                        <td style="width:20%">{{currPhase[4].items[8].itemName}}</td>
                        <td>{{currPhase[4].items[8].itemNumber}}</td>
                        <td>{{currPhase[4].items[8].quantity}}</td>
                        <td>{{currPhase[4].items[8].quantityUnits}}</td>
                        <td>{{currPhase[4].items[8].percentage}}</td>
                        <td>{{currPhase[4].items[8].temp}}</td>
                      </tr>
                      <tr *ngIf="currPhase[4].items[9]">
                        <td style="width:20%">{{currPhase[4].items[9].itemName}}</td>
                        <td>{{currPhase[4].items[9].itemNumber}}</td>
                        <td>{{currPhase[4].items[9].quantity}}</td>
                        <td>{{currPhase[4].items[9].quantityUnits}}</td>
                        <td>{{currPhase[4].items[9].percentage}}</td>
                        <td>{{currPhase[4].items[9].temp}}</td>
                      </tr>  
                    </div>
                    
                      <div *ngIf="currPhase[5]">
                          <tr style="background-color: rgb(192, 197, 201)" *ngIf="currPhase[5]">
                              <td>Phase: {{currPhase[5].phaseName}}</td>
                              <td></td>
                              <td>Number: {{currPhase[5].phaseNumber}}</td>
                              <td></td>
                              <td></td>
                              <td>Instructions: {{currPhase[5].instructions}}</td>
                            </tr>
                            <tr *ngIf="currPhase[5]">
                              <td><strong>Item Name</strong></td>
                              <td><strong>Item Number</strong></td>
                              <td><strong>Quantity</strong></td>
                              <td><strong>Unit Measure</strong></td>
                              <td><strong>Percentage</strong></td>
                              <td><strong>Temp</strong></td>
                            </tr>
                            <tr *ngIf="currPhase[5].items[0]">
                                <td style="width:20%">{{currPhase[5].items[0].itemName}}</td>
                                <td>{{currPhase[5].items[0].itemNumber}}</td>
                                <td>{{currPhase[5].items[0].quantity}}</td>
                                <td>{{currPhase[5].items[0].quantityUnits}}</td>
                                <td>{{currPhase[5].items[0].percentage}}</td>
                                <td>{{currPhase[5].items[0].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[1]">
                                <td style="width:20%">{{currPhase[5].items[1].itemName}}</td>
                                <td>{{currPhase[5].items[1].itemNumber}}</td>
                                <td>{{currPhase[5].items[1].quantity}}</td>
                                <td>{{currPhase[5].items[1].quantityUnits}}</td>
                                <td>{{currPhase[5].items[1].percentage}}</td>
                                <td>{{currPhase[5].items[1].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[2]">
                                <td style="width:20%">{{currPhase[5].items[2].itemName}}</td>
                                <td>{{currPhase[5].items[2].itemNumber}}</td>
                                <td>{{currPhase[5].items[2].quantity}}</td>
                                <td>{{currPhase[5].items[2].quantityUnits}}</td>
                                <td>{{currPhase[5].items[2].percentage}}</td>
                                <td>{{currPhase[5].items[2].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[3]">
                                <td style="width:20%">{{currPhase[5].items[3].itemName}}</td>
                                <td>{{currPhase[5].items[3].itemNumber}}</td>
                                <td>{{currPhase[5].items[3].quantity}}</td>
                                <td>{{currPhase[5].items[3].quantityUnits}}</td>
                                <td>{{currPhase[5].items[3].percentage}}</td>
                                <td>{{currPhase[5].items[3].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[4].items[4]">
                                <td style="width:20%">{{currPhase[5].items[4].itemName}}</td>
                                <td>{{currPhase[5].items[4].itemNumber}}</td>
                                <td>{{currPhase[5].items[4].quantity}}</td>
                                <td>{{currPhase[5].items[4].quantityUnits}}</td>
                                <td>{{currPhase[5].items[4].percentage}}</td>
                                <td>{{currPhase[5].items[4].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[5]">
                                <td style="width:20%">{{currPhase[5].items[5].itemName}}</td>
                                <td>{{currPhase[5].items[5].itemNumber}}</td>
                                <td>{{currPhase[5].items[5].quantity}}</td>
                                <td>{{currPhase[5].items[5].quantityUnits}}</td>
                                <td>{{currPhase[5].items[5].percentage}}</td>
                                <td>{{currPhase[5].items[5].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[6]">
                                <td style="width:20%">{{currPhase[5].items[6].itemName}}</td>
                                <td>{{currPhase[5].items[6].itemNumber}}</td>
                                <td>{{currPhase[5].items[6].quantity}}</td>
                                <td>{{currPhase[5].items[6].quantityUnits}}</td>
                                <td>{{currPhase[5].items[6].percentage}}</td>
                                <td>{{currPhase[5].items[6].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[7]">
                                <td style="width:20%">{{currPhase[5].items[7].itemName}}</td>
                                <td>{{currPhase[5].items[7].itemNumber}}</td>
                                <td>{{currPhase[5].items[7].quantity}}</td>
                                <td>{{currPhase[5].items[7].quantityUnits}}</td>
                                <td>{{currPhase[5].items[7].percentage}}</td>
                                <td>{{currPhase[5].items[7].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[8]">
                                <td style="width:20%">{{currPhase[5].items[8].itemName}}</td>
                                <td>{{currPhase[5].items[8].itemNumber}}</td>
                                <td>{{currPhase[5].items[8].quantity}}</td>
                                <td>{{currPhase[5].items[8].quantityUnits}}</td>
                                <td>{{currPhase[5].items[8].percentage}}</td>
                                <td>{{currPhase[5].items[8].temp}}</td>
                              </tr>
                              <tr *ngIf="currPhase[5].items[9]">
                                <td style="width:20%">{{currPhase[5].items[9].itemName}}</td>
                                <td>{{currPhase[5].items[9].itemNumber}}</td>
                                <td>{{currPhase[5].items[9].quantity}}</td>
                                <td>{{currPhase[5].items[9].quantityUnits}}</td>
                                <td>{{currPhase[5].items[9].percentage}}</td>
                                <td>{{currPhase[5].items[9].temp}}</td>
                              </tr>  
                            </div>
      </tbody>
    </table>
  </div>
  </div> -->
  <div class="modal-footer">
  </div>
</ng-template>


<div *ngIf="showMaterialsForFormules==true" id="myModal3" class="modal3"
style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:150px;top:70px;font-size:20px;'>

<div class="modal-content" id='modelC'>
  <div style="display: inline-block;" id="material-header" class="modal-header">
    <button class="btn btn-success" printSectionId="materialsPrint" [printStyle]="{td : {'border': 'solid 1px black'},tr : {'border': 'solid 1px black'}}" ngxPrint>Print</button>
    <span class="close" id="closeId3" (click)="showMaterialsForFormules=false">&times;</span>

  </div>


  <div class="container" style="overflow: auto;" id="materialsPrint" class="modal-body">
    <table id="procurementItems" class="table table-striped">
      <thead style="box-shadow: 1px 1px 2px 0px black;" class="bg-success text-white">
        <tr>
         
          <th>Material Number</th>
          <th>Material Name</th> 
          <th>KG Production</th>

        </tr>
      </thead>
      <tbody  id="table_body">
       <tr *ngFor="let material of materialsForFormules">
      
         <td>{{material.itemNumber}}</td>
         <td>{{material.itemName}}</td>
         <td>{{material.kgProduction}}</td>

       </tr>
      </tbody>
    </table>
  <br>
  <br>
    <table>
      <thead style="box-shadow: 1px 1px 2px 0px black;">
        <tr>
          <th>מספר הזמנה</th>
          <th>מספר פריט</th>
          <th>כמות לפני אחוזים</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let obj of selectedArr">
          <td>{{obj.orderNumber}}</td>
          <td (click)="changeItemQuantity(obj.itemNumber)">{{obj.itemNumber}}</td>
          <td>{{obj.calculatedAmount}}</td>
        </tr>
      </tbody>
    </table>

  </div>

</div>
</div>






















<!-- <table>
  <thead>
    <tr>
        <th>Bottles</th>
        <th>Caps</th>
        <th>Pumps</th>
        <th>Seals</th>
        <th>Stickers</th>
        <th>Boxes</th>
        <th>Master</th>
        <th>Plates</th>
    </tr>
  </thead>
  <tbody>
    <tr>
        <td *ngFor="let bottle of bottleList" class="cmptListData">
            <label>Number: {{bottle.bottleNumber}}</label> 
            <br>
            <label>Quantity: {{bottle.qnt}}</label>
        </td>
        <td *ngFor="let cap of capList" class="cmptListData">
            <label>Number: {{cap.capNumber}}</label> 
            <br>
            <label>Quantity: {{cap.qnt}}</label>
        </td>
        <td *ngFor="let pump of pumpList" class="cmptListData">
            <label>Number: {{pump.pumpNumber}}</label> 
            <br>
            <label>Quantity: {{pump.qnt}}</label>
        </td>   
        <td *ngFor="let seal of sealList" class="cmptListData">
            <label>Number: {{seal.sealNumber}}</label> 
            <br>
            <label>Quantity: {{seal.qnt}}</label>
        </td> 
        <td *ngFor="let sticker of stickerList" class="cmptListData">
            <label>Number: {{sticker.stickerNumber}}</label> 
            <br>
            <label>Quantity: {{sticker.qnt}}</label>
        </td> 
        <td *ngFor="let box of boxList" class="cmptListData">
            <label>Number: {{box.boxNumber}}</label> 
            <br>
            <label>Quantity: {{box.qnt}}</label>
        </td>    
        <td *ngFor="let carton of cartonList" class="cmptListData">
            <label>Number: {{carton.cartonNumber}}</label> 
            <br>
            <label>Quantity: {{carton.qnt}}</label>
        </td>
        <td *ngFor="let plate of platesList" class="cmptListData">
            <label>Number: {{plate.palletNumber}}</label> 
            <br>
        </td>      
    </tr>
  </tbody>
</table> -->