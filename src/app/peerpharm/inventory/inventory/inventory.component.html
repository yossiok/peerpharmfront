<!------------------------- מערכת מלאי חדשה ------------------------>

<div class="container-fluid bg-white text-center p-3">
    <div class="row">
        <div class="col-2">

        </div>
        <div class="col-2"></div>
        <div class="col-1">
            <button class="btn btn-info form-control">המלצות רכש קיימות</button>
        </div>
        <div class="col-2">

        </div>
        <div class="col-1">
            <button class="btn btn-info form-control">פריט חדש</button>
        </div>
        <div class="col-1">
            <button (click)="itemArrivals = true" class="btn btn-info form-control">קליטת/העברה פריטים</button>
        </div>
    </div>

    <div class="row mt-5">
        <div class="col-12">
            <table class="table table-hover table-striped">
                <thead class="text-white bg-info">
                    <tr>
                        <th>מספר פריט</th>
                        <th>מק"ט ספק</th>
                        <th>שם</th>
                        <th>סוג</th>
                        <th>כמות מוקצת</th>
                        <th>כמות במלאי</th>
                        <th>תמונה</th>
                        <th></th>
                        <th>צפי הגעה הזמנות רכש</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>12185</td>
                        <td>16411000</td>
                        <td>Bottle Plastic NY Clear 150ml Screw 24/410</td>
                        <td>bottle_Plastic</td>
                        <td>1000</td>
                        <td>8541</td>
                        <td></td>
                        <td></td>
                        <td>הזמנות רכש</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<!--------------------------------------------------------->





<!------------------ מודאל קליטת פריטים ------------------->

<div style="top:50px;" *ngIf="itemArrivals == true"
    class="container bg-white text-center rouneded shadow-lg mx-auto my-auto fixed-top p-2">
    <div class="row mt-2">
        <div class="col-1"></div>
        <div class="col-10">
            <h2 class="text-info">קליטת/העברת פריט במלאי</h2>
        </div>
        <div class="col-1">
            <i (click)="itemArrivals = false" class="fa fa-times text-info"></i>
        </div>
    </div>

    <hr>

    <div class="row mt-3">
        <div class="col-2"></div>
        <div class="col-2">
            <label class="form-control">Item Type</label>

        </div>
        <div class="col-2">
            <select (change)="setItemType($event)" class="form-control">
                <option selected="true" disabled="disabled" value="">Choose Item</option>
                <option value="material">Material</option>
                <option value="component">Component</option>
                <option value="product">Product</option>
                <option value="other">Other</option>
            </select>
        </div>
        <div class="col-1">
            <button (click)="setItemMovement('new')" class="btn btn-info form-control">חדש</button>
        </div>
        <div class="col-1">
            <button (click)="setItemMovement('exist')" class="btn btn-info form-control">קיים</button>
        </div>

        <div class="col-4"></div>
    </div>

    <hr>

    <!-------------------------- Component NEW ------------------------->
    <div *ngIf="itemType == 'component' && newItem == true">
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4">
                <h4>Component - חדש</h4>
                <small class="text-danger">קליטת פריט חדש למלאי</small>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-2">
            <div class="col-4"></div>
           
            <div class="col-4">
                <select style="text-align-last:center;" (change)="setWhareHouse($event)" class="form-control">
                    <option selected="true" disabled="disabled" value="">בחר מחסן</option>
                    <option *ngFor="let wh of whareHouses;" [value]="wh._id">{{wh.name}}</option>
                </select>
            </div>
            <div class="col-1">
                <span *ngIf='whareHouses.length == 0'><img src="../../../../assets/images/refreshData.png"
                    style="cursor: pointer; width: 40px; " (click)="getUserWhs()"> </span>
            </div>
            <div class="col-3"></div>
        </div>

        <div class="row m-3">
            <div class="col-1"></div>

            <div class="col-2">
                <input [(ngModel)]="componentArrival.item" (change)="searchItemShelfs($event)" class="form-control" placeholder="מספר פריט">
            </div>
            <div class="col-2">
                <input [(ngModel)]="componentArrival.position" class="form-control" placeholder="מדף">
            </div>
            <div class="col-2">
                <input [(ngModel)]="componentArrival.amount" class="form-control" placeholder="כמות">
            </div>
            <div class="col-2">
                <input [(ngModel)]="componentArrival.arrivalDate" class="form-control" type="date" placeholder="תאריך הגעה">
            </div>
            <div class="col-2">
                <input [(ngModel)]="componentArrival.deliveryNote" class="form-control" placeholder="תעודת משלוח">
            </div>
            <div class="col-1">
                <i (click)="addComponentToTable(componentArrival)" class="fa fa-plus text-info form-control"></i>
            </div>
        </div>

        <div class="row m-2">
            <div class="col-4"></div>
            <div class="col-4">
                <h5 class="text-success">רשימת מדפים</h5>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-1">
            <div style="display: inline-block;" class="col-12">
                <div (click)="fillShelfPosition(shelf)" style="width:15%;display: inline-block;border-radius: 10%;" *ngFor="let shelf of currItemShelfs"
                    class="shelf text-center rounded-top bg-light border border-success shadow p-2 m-2">
                    <div> <label class="form-control">Position: <span class="text-success">{{shelf.position}}</span></label></div>
                    <div> <label class="form-control">Amount: <span class="text-success">{{shelf.amount}}</span></label> </div>
                    <div> <label class="form-control">Date: <span class="text-success">{{shelf.arrivalDate | date: 'dd/MM/yyyy'}}</span></label> </div>
                </div>
            </div>
        </div>

        <div class="row mt-2">
            <div style="overflow-y: auto;height:350px;" class="col-12">
                <table class="table table-hover">
                    <thead class="bg-info text-white">
                        <tr>
                            <th>מספר פריט</th>
                            <th>מדף</th>
                            <th>כמות</th>
                            <th>תעודה</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let component of allArrivals">
                            <td>{{component.item}}</td>
                            <td>{{component.position}}</td>
                            <td>{{component.amount}}</td>
                            <td>{{component.deliveryNote}}</td>
                        </tr>
                    </tbody>
                </table>
            </div>
        </div>

        <div class="row mt-2">

            <div class="col-4"></div>
            <div class="col-4">
                <button (click)="recieveComponents()" class="btn btn-success form-control">קלוט פריט</button>
            </div>
            <div class="col-4"></div>
        </div>
    </div>

    <!----------------------- Component EXIST ------------------------>

    <div *ngIf="itemType == 'component' && existItem == true">
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4">
                <h4>Component - קיים</h4>
                <small class="text-danger">העברת פריט בין מדפים ומחסנים</small>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-5">
            <div class="col-4"></div>
           
            <div class="col-4">
                <select class="form-control">
                    <option selected="true" disabled="disabled" value="">בחר מחסן</option>
                    <option *ngFor="let wh of whareHouses;">{{wh.name}}</option>
                </select>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row m-3">
            <div class="col-1"></div>

            <div class="col-2">
                <input class="form-control" placeholder="מספר פריט">
            </div>
            <div class="col-2">
                <input class="form-control" placeholder="מדף">
            </div>
            <div class="col-2">
                <input class="form-control" placeholder="כמות">
            </div>
            <div class="col-2">
                <input class="form-control" type="date" placeholder="תאריך העברה">
            </div>
            <div class="col-1">
                <i class="fa fa-plus text-info form-control"></i>
            </div>
        </div>

        <div class="row m-2">
            <div class="col-4"></div>
            <div class="col-4">
                <h5 class="text-success">רשימת מדפים</h5>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-1">
            <div class="container">

            </div>
        </div>

        <div class="row mt-5">

            <div class="col-4"></div>
            <div class="col-4">
                <button class="btn btn-success form-control">העבר פריט</button>
            </div>
            <div class="col-4"></div>
        </div>
    </div>

    <!--------------------------Material NEW ----------------------------->
    <div *ngIf="itemType == 'material' && newItem == true">
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4">
                <h4>Material - חדש</h4>
                <small class="text-danger">קליטת חומר גלם חדש למלאי</small>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-5">
            <div class="col-4"></div>
           
            <div class="col-4">
                <select class="form-control">
                    <option selected="true" disabled="disabled" value="">בחר מחסן</option>
                    <option *ngFor="let wh of whareHouses;">{{wh.name}}</option>
                </select>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row m-3">
            <div class="col-1"></div>

            <div class="col-2">
                <input class="form-control" placeholder="מספר פריט">
            </div>
            <div class="col-2">
                <input class="form-control" placeholder="מדף">
            </div>
            <div class="col-2">
                <input class="form-control" placeholder="כמות">
            </div>
            <div class="col-2">
                <input class="form-control" type="date" placeholder="תאריך הגעה">
            </div>
            <div class="col-2">
                <input class="form-control" placeholder="תעודת משלוח">
            </div>
            <div class="col-1">
                <i class="fa fa-plus text-info form-control"></i>
            </div>
        </div>

        <div class="row m-2">
            <div class="col-4"></div>
            <div class="col-4">
                <h5 class="text-success">רשימת מדפים</h5>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-1">
            <div class="container">

            </div>
        </div>

        <div class="row mt-5">

            <div class="col-4"></div>
            <div class="col-4">
                <button class="btn btn-success form-control">קלוט פריט</button>
            </div>
            <div class="col-4"></div>
        </div>
    </div>

    <!--------------------------Material EXIST ----------------------------->

    <div *ngIf="itemType == 'material' && existItem == true">
        <div class="row">
            <div class="col-4"></div>
            <div class="col-4">
                <h4>Material - קיים</h4>
                <small class="text-danger">העברת חומר גלם בין מדפים ומחסנים</small>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-5">
            <div class="col-4"></div>
           
            <div class="col-4">
                <select class="form-control">
                    <option selected="true" disabled="disabled" value="">בחר מחסן</option>
                    <option *ngFor="let wh of whareHouses;">{{wh.name}}</option>
                </select>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row m-3">
            <div class="col-1"></div>

            <div class="col-2">
                <input class="form-control" placeholder="מספר פריט">
            </div>
            <div class="col-2">
                <input class="form-control" placeholder="מדף">
            </div>
            <div class="col-2">
                <input class="form-control" placeholder="כמות">
            </div>
            <div class="col-2">
                <input class="form-control" type="date" placeholder="תאריך העברה">
            </div>
            <div class="col-1">
                <i class="fa fa-plus text-info form-control"></i>
            </div>
        </div>

        <div class="row m-2">
            <div class="col-4"></div>
            <div class="col-4">
                <h5 class="text-success">רשימת מדפים</h5>
            </div>
            <div class="col-4"></div>
        </div>

        <div class="row mt-1">
            <div class="container">

            </div>
        </div>

        <div class="row mt-5">

            <div class="col-4"></div>
            <div class="col-4">
                <button class="btn btn-success form-control">העבר פריט</button>
            </div>
            <div class="col-4"></div>
        </div>
    </div>


</div>