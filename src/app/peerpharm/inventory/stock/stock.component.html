<!-- {{openModal}} -->

<div class="container-fluid bg-white p-2 text-center">

  <div [class.read-only]="checkPermission()" class="row fixNoaStupidStuff">
    <div class="col-1 fixNoaStupidStuff">
      <button (click)="itemsMovementModal = true" class="btn btn-info form-control rounded-pill">F9 - הוצאה/קבלת
        סחורה</button>
    </div>
    <div class="col-1 fixNoaStupidStuff">
      <button class="btn btn-info form-control rounded-pill">F8 - הזמנות מלאי</button>
    </div>
    <div class="col-3 fixNoaStupidStuff"></div>
    <div class="col-1 fixNoaStupidStuff">
      <button class="btn btn-warning form-control rounded-pill" (click)="procurementRecommendations('minimumStock')">F7
        - בדוק המלצה
        לרכש</button>
    </div>
    <div class="col-1 fixNoaStupidStuff">
      <button class="btn btn-warning form-control rounded-pill" (click)="newPurchaseRecommendModal = true">F10
        בקשה לרכש חדשה</button>
    </div>
    <div class="col-3 fixNoaStupidStuff"></div>
    <div class="col-1 fixNoaStupidStuff">
      <button class="btn btn-success form-control rounded-pill" (click)="inventoryNewReqModal = true">F4 - בקשת
        מלאי</button>
    </div>
    <div class="col-1 fixNoaStupidStuff">
      <button class="btn btn-success form-control rounded-pill" (click)="newCmpt('new')">F2 - פריט חדש</button>
    </div>
  </div>

  <!--filter components-->
  <div [class.read-only]="checkPermission()" class="fixNoaStupidStuff search rounded-pill ml-10">
    <form [formGroup]="filterParams" (ngSubmit)="filterComponents()">
      <div class="row mt-5 fixNoaStupidStuff">
        <div class="col-2 fixNoaStupidStuff"></div>
        <div class="col-2 fixNoaStupidStuff">
          <label for="">Component Number</label>
          <input formControlName="componentN" #numberSearchInput type="text" class="form-control rounded-pill"
            placeholder="Search By Number">
        </div>
        <div class="col-2 fixNoaStupidStuff">
          <label for="">Component Name</label>
          <input pattern="^[a-z0-9_-]{8,15}$" formControlName="componentName" type="text"
            class="form-control rounded-pill" placeholder="Search By Name">
        </div>
        <div class="col-2 fixNoaStupidStuff">
          <label for="">Component Type</label>
          <select formControlName="componentType" class="form-control rounded-pill">
            <option value="" selected="true">בחר קטגוריה</option>
            <option value='bottle_Glass'>בקבוק זכוכית</option>
            <option value='bottle_Plastic'>בקבוק פלסטיק</option>
            <option value='jar_Glass'>צנצנת זכוכית</option>
            <option value='jar_Plastic'>צנצנת פלסטיק</option>
            <option value='cap'>פקק</option>
            <option value='cover'>מכסה</option>
            <option value='pump'>משאבה</option>
            <option value='cosmetic_pump'>משאבה קוסמטית</option>
            <option value='over_cap'>מכסה עילי</option>
            <option value='tube'>שפורפרת</option>
            <option value='colons'>קולונים</option>
            <option value='hair_life'>היירלייפ</option>
            <option value='compacts'>קומפקטים</option>
            <option value='personal_package'>אריזות אישיות</option>
            <option value='master_carton'>קרטוני מאסטר</option>
            <option value='newsletter'>עלון לצרכן</option>
            <option value='irosol_valve'>אירוסול- שסתום</option>
            <option value='irosol_bottle'>איירוסול- בקבוק</option>
            <option value='irosol_hectotor'>אירוסול- הקטאטור</option>
            <option value='irosol_bottle'>איירוסול- בקבוק</option>
            <option value='cellophane'>צלופן</option>
            <option value='sticker'>מדבקה</option>
            <option value='sachet'>סאשט</option>
            <option value='godett'>גודט</option>
            <option value='plate'>גלופה</option>
          </select>
        </div>
        <div class="col-2 fixNoaStupidStuff">
          <label for="">Category</label>
          <select formControlName="componentCategory" class="form-control rounded-pill">
            <option value="" selected="true">בחר קטגוריה</option>
            <option *ngFor="let cmptCategory of cmptCategoryList">{{cmptCategory}}</option>
          </select>
        </div>
        <div class="col-2 fixNoaStupidStuff"></div>
      </div>
      <div dir="rtl" class="row mt-5 fixNoaStupidStuff">
        <div class="col-4 fixNoaStupidStuff"></div>
        <div class="col-2 fixNoaStupidStuff">
          <button (click)="clearSearchFields()" class="btn-secondary form-control rounded-pill"
            type="button"><b>נקה</b></button>
        </div>
        <div class="col-2 fixNoaStupidStuff">
          <button class="btn-primary form-control rounded-pill">חיפוש</button>
        </div>
        <div class="col-4 fixNoaStupidStuff"></div>
      </div>
    </form>
  </div>

  <div *ngIf="stockType == 'material'" class="row mt-10 fixNoaStupidStuff">
    <div class="col-4 fixNoaStupidStuff"></div>
    <div class="col-2 fixNoaStupidStuff">
      <select [(ngModel)]="materialFilterType" class="form-control rounded-pill">
        <option selected="true" disabled="disabled">בחר שדה לסינון</option>
        <option value="">כל החומרי גלם</option>
        <option value="location">מיקום במחסן</option>
        <option value="threatment">קבוצת סיכון</option>
        <option value="permissionDangerMaterials">היתר רעלים</option>
        <option value="function">function</option>
        <option value="stateOfMatter">מצב צבירה</option>
        <option value="inciName">INCI Name</option>
      </select>
    </div>
    <div class="col-2 fixNoaStupidStuff">
      <input *ngIf="materialFilterType != 'threatment' && materialFilterType != 'stateOfMatter'"
        [(ngModel)]="materialFilterValue" class="form-control rounded-pill">
      <select *ngIf="materialFilterType == 'threatment'" [(ngModel)]="materialFilterValue"
        class="form-control rounded-pill">
        <option value="flammableLiquid">3 - נוזל דליק</option>
        <option value="flammableSolid">4 - מוצק דליק</option>
        <option value="oxidizer">5.1 - מחמצן אי אורגני</option>
        <option value="toxic">6 - רעיל</option>
        <option value="acid">8 - חומצה</option>
        <option value="base">8 - בסיס</option>
        <option value="otherDangerMaterials">9 - חומרים מסוכנים שונים</option>
        <option value="regular">אין מספר או"מ</option>
        <option value="cooling">איחסון בקירור</option>
        <option value="blockedByType">חסום לפי סוג חומר</option>
      </select>
      <select *ngIf="materialFilterType == 'stateOfMatter'" [(ngModel)]="materialFilterValue"
        class="form-control rounded-pill">
        <option value="liquid">Liquid</option>
        <option value="solid">Solid</option>
        <option value="gell">Gell</option>
      </select>
    </div>
    <div class="col-1">
      <button (click)="filterMaterialsTable()" class="btn-info form-control rounded-pill">חפש</button>
    </div>
    <div class="col-4"></div>
  </div>

  <div style="margin-right:auto !important" *ngIf="smallLoader == true"
    class="smallLoader fixNoaStupidStuff mx-auto my-auto"></div>
  <div style="width:100%;">


    <!-- ------------------------------------------------------ -->


    <div  class="tableContainer" style="width: 100% ; padding:0px; ">

      <!-- <input #filterbyNum type="text" placeholder="Search Item Number..." (change)="filterRowsByItemNumber($event)"> -->
      <br>

      <div (click)='setType("component")' [ngStyle]="{'background-color': buttonColor,'color':fontColor}" class="navtab"
        style="cursor:pointer;box-shadow: black 0px -1px 3px inset;">Components</div>
      <div (click)='setType("product")' [ngStyle]="{'background-color': buttonColor3,'color':fontColor3}" class="navtab"
        style="cursor:pointer;box-shadow:black 0px -1px 3px inset;">Products</div>
      <div (click)='setType("material")' [ngStyle]="{'background-color': buttonColor2,'color':fontColor2}"
        class="navtab" style="cursor:pointer;box-shadow:black 0px -1px 3px inset;">Materials</div>
      <div class="export" style="cursor:pointer;">
        <img *ngIf="loadingExcel" style="width:50px"
          src="http://avacdn.com/wp-content/uploads/2018/05/motosha-spinner.gif" />
        <img src="../../../../assets/images/excel.png" alt="export to excel" style="width: 40px;"
          (click)="exportCurrTable()">
      </div>
      <div [class.read-only]="checkPermission()" class="export" style="cursor:pointer;" (click)="open(printInventoryValue)">
        <button class="btn btn-primary">Value For Money</button>
      </div>

      <!-- TABLE START -->
      <div *ngIf="stockType=='component'" class="tableFixHead">
        <table class='table stockTable table-fixed text-center' *ngIf="stockType=='component'">
          <thead class="text-white bg-info">
            <tr style="text-align: center;">
              <th style="width:3%;"></th>
              <th style="width:6%;"><b>מספר פריט</b></th>
              <th style="width:5%;"><b>מק"ט פריט-ספק</b></th>
              <th style="width:10%"><b>שם</b></th>
              <th style="width:5%;"><b>סוג</b></th>
              <th style="width:5%;"><b>כמות מוקצת</b></th>
              <th style="width:5%;"><b>כמות</b></th>
              <th style="width:5%;"><b>תמונה</b></th>
              <th style="width:12%;"><b>צפי הגעה הזמנת רכש</b></th>
              <th style="width:3%;"></th>
              <th style="width:3%;"></th>
            </tr>
          </thead>
          <tbody id="table_body" class="componentTable">
            <tr *ngFor="let component of components; let i = index">
              <td style="width:3%;">{{i+1}}</td>
              <td style="width:6%;" class="compNum" (click)="openData(component.componentN)"> {{component.componentN}}
              </td>
              <td style="width:5%; word-break: normal;">{{component.componentNs}}</td>
              <td style="width:10%;">{{component.componentName}}</td>
              <td style="width:5%; word-break: normal;">{{component.componentType}}</td>
              <td style="width:5%; cursor: pointer;border-right: 2px solid black;"
                (click)="openAllocatedOrders(component.componentN)" [ngClass]="calcIfLowThenMin(component)">
                {{component.alloAmount}}
                <img src="../../../../assets/images/search_plus_blue.png" alt="watch quantities"
                  style="width: 40px; margin-left: 15px; cursor: pointer; float: right;">
              </td>
              <td style="width:5%;cursor: pointer;" (click)="getCmptAmounts(component.componentN, component._id)">
                {{component.amount }}
                <img src="../../../../assets/images/search_plus_blue.png" alt="watch quantities"
                  style="width: 40px; margin-left: 15px; cursor: pointer; float: right;">
              </td>
              <td style="width:5%; text-align: center;">
                <img [src]="component.img" style='width:50px ; cursor: pointer;' (click)="openImg(component.img)">
              </td>

              <td>
                <!-- <button class="btn btn-success" *ngIf="!component.showPurch" (click)="getItemPurchases(component)">טען
                  הזמנות פתוחות</button> -->
                <div *ngIf="component.showPurch">
                  <img src="../../../../assets/images/refreshData.png" class="float-right small" alt="get user name"
                    (click)="getItemPurchases(component)">
                  <span *ngIf="component.purchaseOrders.length == 0">אין הזמנות פתוחות לפריט</span>
                  <table *ngIf="component.purchaseOrders.length > 0" style="zoom:0.7">
                    <thead class="text-white">
                      <tr>
                        <th class="text-white">Order Number</th>
                        <th class="text-white">Order Date</th>
                        <th class="text-white">Amount</th>
                        <th class="text-white">Arrival Date</th>
                      </tr>
                    </thead>
                    <tbody>

                      <ng-container *ngFor="let purchase of component.purchaseOrders">
                        <ng-container *ngFor="let item of purchase.stockitems">
                          <tr *ngIf="item.number == component.componentN">
                            <td>{{purchase.orderNumber}}</td>
                            <td>{{purchase.creationDate | date: 'dd/MM/yyyy'}}</td>
                            <td>{{item.quantity}}</td>
                            <td>{{purchase.arrivalDate | date: 'dd/MM/yyyy'}}</td>
                          </tr>
                        </ng-container>
                      </ng-container>
                    </tbody>
                  </table>
                </div>


              </td>


              <td style="width:3%;">
                <!-- <img *ngIf="stockAdmin" (click)="deleteStockItemValidation(component.componentN)"
                  src="../../../../assets/images/deleteBtn.png" alt="delete stock item"
                  style="width: 60px ; cursor: pointer; "> -->
                <img (click)="deleteComponent(component._id)" *ngIf="showDeleteBtn" style="width:30px"
                  src="../../../../assets/images/deleteBtn.png">

              </td>
            </tr>
          </tbody>

        </table>

      </div>

      <app-expected-arrivals *ngIf="openProcurementModal" [componentData]='resCmpt'
        (outPutItemsExpectedData)="getNewExpectedArrivalsData($event)"></app-expected-arrivals>


      <table class='table productTable Table table-fixed' style="width:100%" *ngIf="stockType=='product'">
        <thead class='text-white bg-success'>
          <tr>

            <th style="width:6%;"></th>
            <th style="width:10%;"><b>מספר פריט</b></th>
            <!-- <th style="><b>מק"ט פריט/ספק</b></th> -->
            <th style="width:25%;"><b>שם</b></th>
            <!-- <th style="><b>סוג</b></th> -->
            <th style="width:9%;"><b>כמות מוקצת</b></th>
            <th style="width:9%;"><b>כמות</b></th>
            <th style="width:9%;"></th>

            <th style="width:9;"><b>תמונה</b></th>
            <!-- <th style="><b>הזמנת רכש</b></th>
              <th style="><b>כמות להזמנת רכש</b></th> -->
            <th style="width:7%;"></th>
          </tr>

        </thead>



        <tbody id="table_body" class="productTable">
          <tr *ngFor="let component of components; let i = index">
            <td style="width:6%">{{i+1}}</td>
            <td style="width:10%" class="compNum">
              <a target="_blank" routerLink="/peerpharm/items/itemDetails/{{component.componentN}}">
                {{component.componentN}}
              </a>
            </td>

            <!-- <td>{{component.componentNS}}</td> -->
            <td style="width:25%;">{{component.componentName}}</td>
            <!-- <td>{{component.componentType}}</td> -->

            <td style="width:9%;border-right: 2px solid black;">{{component.productAlloAmount}} <img
                (click)="openAllocatedProducts(component.componentN)"
                src="../../../../assets/images/search_plus_blue.png" alt="watch quantities"
                style="width: 40px; margin-left: 15px; cursor: pointer; float: right;"></td>
            <td style="width:9%;">{{component.amount}}</td>
            <td style="width:9%;"><button [style.cursor]="callingForCmptAmounts ? 'not-allowed' : 'pointer'"
                [disabled]="callingForCmptAmounts" class="btn btn-info"
                (click)="getCmptAmounts(component.componentN, component._id)">צפיה בכמויות</button></td>
            <td style="width:9%;">
              <div *ngIf="component.allocAmount!=undefined || component.allocAmount!=null">{{component.allocAmount}}
              </div>
            </td>
            <td style="width:9%;"><img [src]=component.img style='width:50px ; cursor: pointer;'
                (click)="openImg(component.img)"></td>
            <!-- <td><button *ngIf="component.procurementSent==true" class="btn btn-warning" (click)="updateProcurment(component._id,component.componentN,'false')">מחק</button>{{component.procurementAmount}}</td>
              <td><div>
                <input #procurmentInput type="number" (keyup)="inputProcurment($event)" /><span> <button class="btn btn-success"
                  (click)="updateProcurment(component._id,component.componentN,'true')">עדכן</button></span>
                
              </div>
            </td> -->

            <!-- <td style="width:7%;">
              <img (click)="deleteStockItemValidation(component.componentN)" src="../../../../assets/images/deleteBtn.png"
                alt="delete stock item" style="width: 60px ; cursor: pointer; ">
            </td> -->
          </tr>
        </tbody>

      </table>

    </div>

    <!-- TABLE END -->


    <table class='table stockTable table-fixed' *ngIf="stockType=='material'">
      <thead class='bg-warning text-white'>
        <tr style="text-align: center">

          <th style="width:5%;"></th>
          <th style="width:10%;"><b>מספר פריט</b></th>
          <th style="width:15%;"><b>שם פריט</b></th>
          <th style="width:9%;"><b>כמות מוקצת</b></th>
          <th style="width:9%;"><b>כמות</b></th>
          <th>צפי הגעה המלצות רכש</th>
          <th></th>
        </tr>

      </thead>

      <tbody id="table_body" class="materialsTable">
        <tr *ngFor="let material of components ; let i = index">

          <td style="width:5%">{{i+1}}</td>
          <td style="width:10%" class="compNum">
            <fieldset>
              <div (click)="openDataMaterial(material.componentN)" style="float:none;">{{material.componentN}}</div>
            </fieldset>
          </td>

          <td [ngClass]="dangerColor(material.threatment)" style="width:15%">
            <div style="float:none;">{{material.componentName}}</div>
          </td>

          <td style="border-right: 2px solid black;"></td>
          <td style="width:5%;cursor: pointer;" (click)="getCmptAmounts(material.componentN, material._id)">

            {{material.amount | number:'1.2-2'}}
            <img src="../../../../assets/images/search_plus_blue.png" alt="watch quantities"
              style="width: 40px; margin-left: 15px; cursor: pointer; float: right;">

          </td>

          <td></td>
          <td>
            <img (click)="deleteComponent(material._id)" *ngIf="showDeleteBtn" style="width:30px"
              src="../../../../assets/images/deleteBtn.png">
          </td>

        </tr>
      </tbody>
    </table>

    <!-- <ng-template #supplierList let-modal>
      <div style="width:140% !important;" class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title" id="modal-basic-title">Alternative Suppliers</h4>
        </div>
        <div class="modal-body">
          <table class='table'>
            <thead style="box-shadow:1px 1px 3px black; background-color: rgb(90, 149, 197)">
  
              <tr>
                <th><input [(ngModel)]="alternativeSupplier.name" placeholder="Alternative Supplier" /></th>
                <th><input [(ngModel)]="alternativeSupplier.material" placeholder="Alternative Material" /></th>
                <th><input [(ngModel)]="alternativeSupplier.price" placeholder="Price" /></th>
                <th><button (click)="addSupplierToArray()">Add</button></th>
              </tr>
            </thead>
            <tbody id="table_body">
              <tr *ngFor="let alterSupplier of alterSuppliers"
                style="box-shadow: inset 1px -1px 2px 0px black; margin-top: 1px;">
                <td>{{alterSupplier.name}}</td>
                <td>{{alterSupplier.material}}</td>
                <td>{{alterSupplier.price}}</td>
              </tr>
            </tbody>
          </table>
        </div>
        <div class="modal-footer">
        </div>
      </div>
    </ng-template> -->


    <div class="modal fade" id="supplierModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalLongTitle"
      aria-hidden="true">
      <div class="modal-dialog" role="document">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="exampleModalLongTitle">Modal title</h5>
            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
              <span aria-hidden="true">&times;</span>
            </button>
          </div>
          <div class="modal-body">
            ...
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>
            <button type="button" class="btn btn-primary">Save changes</button>
          </div>
        </div>
      </div>
    </div>





    <div style="top:20px;" class="container bg-light rounded fixed-top shadow mx-auto my-auto border border-success"
      *ngIf="openModal == true && stockType=='component'">
      <mat-tab-group mat-align-tabs="center">
        <mat-tab label="Component Details">
          <div class="container modal-inner">
            <div class="row text-center fixNoaStupidStuff">
              <div class="col-4 fixNoaStupidStuff text-right">
                <!-- <button class="btn btn-success form-control" (click)="switchModalView()">{{itemmoveBtnTitle}}</button> -->
              </div>
              <div class="col-4 fixNoaStupidStuff">
                <h2 class="text-success" id='div_h3'>{{openModalHeader}}</h2><br>
              </div>
              <div class="col-4 fixNoaStupidStuff">
                <span class="close text-success" id="closeId2"
                  (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
              </div>
            </div>

            <div class="row text-center fixNoaStupidStuff">
              <div class="col-1"></div>

              <div class="col-8">
                <input class="form-control" type="text" [(ngModel)]="resCmpt.componentName">
              </div>
              <div class="col-2">
                <label class="form-control">שם פריט</label>
              </div>
              <div class="col-1"></div>
            </div>

            <div dir="rtl" class="row text-center fixNoaStupidStuff">
              <div class="col-4 fixNoaStupidStuff">
                <h5 class="text-success">פרטי פריט</h5>
              </div>
              <div class="col-4 fixNoaStupidStuff">
                <h5 class="text-success">פרטי ספק</h5>
              </div>
              <div class="col-4 fixNoaStupidStuff">
                <h5 class="text-success">פרטי מלאי</h5>
              </div>
            </div>
            <div dir="rtl" class="row text-center fixNoaStupidStuff">
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">מספר פריט</label>

                <label class="form-control">שם קומקס</label>
                <label class="form-control">פריט חלופי</label>
                <label class="form-control">מחיר אחרון (שקלים)</label>
                <!-- <label class="form-control">מחיר העמסה (שקלים)</label> -->
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <input (change)="checkIfItemExist($event)" class="form-control" type='text'
                  [(ngModel)]="resCmpt.componentN">

                <input class="form-control" type="text" [(ngModel)]="resCmpt.comaxName">
                <input class="form-control" type="text" [(ngModel)]="resCmpt.alternativeComponent">
                <input class="form-control" type="number" [(ngModel)]="resCmpt.finalPrice">
                <!-- <input class="form-control" type="text" [(ngModel)]="resCmpt.price">
                <input class="form-control" type="number" [(ngModel)]="resCmpt.shippingPrice"> -->

              </div>
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">מספר ספק</label>
                <label class="form-control">מק"ט ספק</label>
                <label class="form-control">מחיר ספק</label>
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <input class="form-control" list="suppliers" type='text' (change)="fillSupplierDetails()"
                  [(ngModel)]="resCmpt.suplierN">
                <datalist id="suppliers">
                  <option *ngFor="let supplier of allSuppliers" value="{{supplier.suplierName}}">
                    {{supplier.suplierNumber}}
                  </option>
                </datalist>
                <input class="form-control" type='text' [(ngModel)]="resCmpt.componentNs">
                <input class="form-control" type='text' [(ngModel)]="resCmpt.price">
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">מלאי מינימום</label>
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <input class="form-control" type='number' [(ngModel)]="resCmpt.minimumStock">
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">כמות מינימלית להזמנה</label>
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <input class="form-control" type='number' [(ngModel)]="resCmpt.minimumPurchaseAmount">
              </div>
            </div>

            <div dir="rtl" class="row text-center fixNoaStupidStuff">
              <div class="col-4 fixNoaStupidStuff">
                <h5 class="text-success">פרטים נוספים</h5>
              </div>
              <div class="col-4 fixNoaStupidStuff">
                <h5 class="text-success">הערות</h5>
              </div>
              <div class="col-4 fixNoaStupidStuff">
                <h5 class="text-success">תמונה</h5>
              </div>
            </div>

            <div dir="rtl" class="row text-center fixNoaStupidStuff">
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">קטגוריה</label>
                <label class="form-control">מותג</label>
                <label class="form-control">משקל/סוג</label>
                <label class="form-control">יח' מידה</label>
                <label class="form-control">כמות מל'</label>
                <label class="form-control">על חשבון</label>
                <!-- <label class="form-control">רשימת לקוחות</label> -->
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <select class="form-control" [(ngModel)]="resCmpt.componentType">
                  <option value='bottle_Glass'>בקבוק זכוכית</option>
                  <option value='bottle_Plastic'>בקבוק פלסטיק</option>
                  <option value='jar_Glass'>צנצנת זכוכית</option>
                  <option value='jar_Plastic'>צנצנת פלסטיק</option>
                  <option value='cap'>פקק</option>
                  <option value='cover'>מכסה</option>
                  <option value='pump'>משאבה</option>
                  <option value='cosmetic_pump'>משאבה קוסמטית</option>
                  <option value='over_cap'>מכסה עילי</option>
                  <option value='tube'>שפורפרת</option>
                  <option value='colons'>קולונים</option>
                  <option value='hair_life'>היירלייפ</option>
                  <option value='compacts'>קומפקטים</option>
                  <option value='personal_package'>אריזות אישיות</option>
                  <option value='master_carton'>קרטוני מאסטר</option>
                  <option value='newsletter'>עלון לצרכן</option>
                  <option value='irosol_valve'>אירוסול- שסתום</option>
                  <option value='irosol_bottle'>איירוסול- בקבוק</option>
                  <option value='irosol_hectotor'>אירוסול- הקטאטור</option>
                  <option value='irosol_bottle'>איירוסול- בקבוק</option>
                  <option value='cellophane'>צלופן</option>
                  <option value='sticker'>מדבקה</option>
                  <option value='sachet'>סאשט</option>
                  <option value='godett'>גודט</option>
                  <option value='plate'>גלופה</option>
                  <option value='other'>אחר</option>
                </select>

                <select class="form-control" [(ngModel)]="resCmpt.componentCategory">
                  <!-- <select #filterByCategory class="form-control" (change)="filterRowsByCmptTypeanCategory($event , 'category')"> -->
                  <option value=""></option>
                  <option *ngFor="let cmptCategory of cmptCategoryList">{{cmptCategory}}</option>
                </select>




                <select class="form-control" [(ngModel)]="resCmpt.packageType">
                  <option value='paperCarton'>נייר/קרטון</option>
                  <option value='drinkCarton'>קרטוניות משקה</option>
                  <option value='transperentGlass'>זכוכית שקופה</option>
                  <option value='colorGlass'>זכוכית צבעונית</option>
                  <option value='pet'>PET</option>
                  <option value='hdpe'>HDPE</option>
                  <option value='ldpe'>LDPE</option>
                  <option value='pp'>PP</option>
                  <option value='ps'>PS</option>
                  <option value='otherPlastic'>פלסטיק אחר</option>
                  <option value='metal'>מתכת</option>
                  <option value='wood'>עץ</option>
                  <option value='otherMaterial'>חומר אחר</option>
                </select>

                <select class="form-control" [(ngModel)]="resCmpt.measurement">
                  <option value="kilogram">kilogram</option>
                  <option value="liter">liter</option>
                  <option value="meter">meter</option>
                  <option value="ml">ml</option>
                  <option value="unit">Unit</option>
                  <option value="ton">טון</option>
                  <option value="unit">יחידה</option>
                  <option value="box">קופסא</option>
                </select>

                <input class="form-control" type="text" [(ngModel)]="resCmpt.actualMlCapacity">
                <select class="form-control" (change)="checkWhoPays($event)" [(ngModel)]="resCmpt.whoPays">
                  <option value="peerpharm">פארפארם</option>
                  <option value="customers">לקוח/לקוחות</option>
                </select><i (click)="customersModal = true" class="form-control fa fa-plus text-success "></i>
                <!-- <select class="form-control">
                        <option *ngFor="let customer of resCmpt.payingCustomersList" value="customer">{{customer}}</option>
                  </select> -->
              </div>
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">הערה</label>
                <label class="form-control mt-5">הערה קופצת</label>

              </div>
              <div class="col-2 fixNoaStupidStuff">
                <textarea rows="2" cols="20" class="form-control" type='text' [(ngModel)]="resCmpt.remarks"></textarea>
                <textarea rows="2" cols="20" class="form-control mt-4" type='text'
                  [(ngModel)]="resCmpt.jumpRemark"></textarea>
              </div>

              <div class="col-2 fixNoaStupidStuff">
                <button [disabled]="gettingProducts" [style.cursor]="gettingProducts ? 'not-allowed' : 'pointer'"
                  (click)="getProductsWithItem()">הצג מוצרים שמכילים את הפריט</button>
              </div>

              <div class="col-2 fixNoaStupidStuff modal-inner border" *ngIf="resCmpt.connectedProducts">
                <div *ngFor="let product of resCmpt.connectedProducts">
                  <h5>{{product.itemNumber}}</h5>
                  <h5>{{product.name}}</h5>
                  <h5>{{product.subName}}</h5>
                  <h5>{{product.discriptionK}}</h5>
                </div>
              </div>

              <div class="col-4 fixNoaStupidStuff">
                <img *ngIf="resCmpt.img!=''" [src]="resCmpt.img" style="max-height: 250px;"
                  class="hoverImg w-25 h-100 border border-success" alt="Item main image please wait ...">
                <p *ngIf="resCmpt.img==''"><b> -No Image- </b></p>
                <input class="form-control" type='file' id="input_itemImgID" (change)='uploadImg($event)'
                  style='display:block'>
                <input class="form-control" type='text' [(ngModel)]="tempHiddenImgSrc" id='tempHiddenImgSrc'
                  style='display:none'>
              </div>
            </div>
            <div class="row fixNoaStupidStuff text-center">
              <div class="col-6 fixNoaStupidStuff">
                <button class="btn btn-success form-control" id="newCbtn" (click)="writeNewComponent()"
                  *ngIf="newItem=='new'">הקם
                  מוצר</button>

              </div>
              <div class="col-6 fixNoaStupidStuff">
                <div *ngIf="allowUserEditItem">
                  <button class="btn btn-success form-control" id="updateDataBtn" (click)="editStockItemDetails()"
                    *ngIf="newItem!='new'">עדכן
                    מידע</button>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>
        <mat-tab label="Component Suppliers Details">
          <div class="container modal-inner">

            <div style="padding: 0rem;" class="row text-center fixNoaStupidStuff">
              <div class="col-1 fixNoaStupidStuff text-right">
                <!-- <button class="btn btn-success form-control" (click)="switchModalView()">{{itemmoveBtnTitle}}</button> -->
              </div>
              <div class="col-10 fixNoaStupidStuff">
                <h4 class="text-success">ספקים</h4>
              </div>
              <div class="col-1 fixNoaStupidStuff">
                <span class="close text-success" id="closeId2"
                  (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
              </div>
            </div>

            <div dir='rtl' class="row border border-success border-bottom-0 fixNoaStupidStuff text-center">
              <div class="col-1 fixNoaStupidStuff"></div>
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">ספק</label>
                <label class="form-control">יצרן</label>
                <label class="form-control">מספר פריט ספק</label>
                <label class="form-control">שם פריט ספק</label>
                <label class="form-control">סוג אריזה</label>
              </div>
              <div class="col-3 fixNoaStupidStuff">
                <input list="suppliers" class="form-control" [(ngModel)]="supplier.supplierName">
                <datalist id="suppliers">
                  <option *ngFor="let supplier of allSuppliers" value="{{supplier.suplierName}}">
                    {{supplier.suplierNumber}}
                  </option>
                </datalist>
                <input type="text" class="form-control" [(ngModel)]="supplier.manufacturer">
                <input [(ngModel)]="supplier.alternativeMaterial" class="form-control" type='text'>
                <input [(ngModel)]="supplier.alterName" class="form-control" type='text'>
                <input list="groups" [(ngModel)]="supplier.subGroup" class="form-control">
                <datalist id="groups">
                  <option value="Cube">קובייה</option>
                  <option value="barrel">חבית</option>
                  <option value="small barrel">חביונית</option>
                  <option value="packaging/cardboard">אריזות/קרטון</option>
                  <option value="plastic barrel">חבית פלסטיק</option>
                  <option value="jerrican">ג'ריקן</option>
                  <option value="bag">שק</option>
                  <option value="bottle barrel">דלי בקבוק</option>
                </datalist>

              </div>
              <div class="col-2 fixNoaStupidStuff">
                <label class="form-control">מחיר</label>
                <label class="form-control">מטבע</label>
                <label class="form-control"> מחיר העמסה (מטבע קניה)</label>
                <label class="form-control">מטבע לאחר טעינה</label>
                <label class="form-control">משקל יחידה</label>
              </div>
              <div class="col-3 fixNoaStupidStuff">
                <input [(ngModel)]="supplier.price" type="text" class="form-control">
                <input list="coins" [(ngModel)]="supplier.coin" class="form-control">
                <datalist id="coins">
                  <option value="usd">USD</option>
                  <option value="nis">NIS</option>
                  <option value="gbp">GBP</option>
                  <option value="eur">EUR</option>
                  <option value="yen">YEN</option>
                </datalist>
                <input [(ngModel)]="supplier.shippingPrice" type="number" class="form-control" />
                <input list="coinsLoading" [(ngModel)]="supplier.coinLoading" class="form-control">
                <datalist id="coinsLoading">
                  <option value="usd">USD</option>
                  <option value="nis">NIS</option>
                  <option value="gbp">GBP</option>
                  <option value="eur">EUR</option>
                  <option value="yen">YEN</option>
                </datalist>
                <input [(ngModel)]="supplier.packageWeight" type="text" class="form-control" />
              </div>
              <div class="col-1 fixNoaStupidStuff"></div>
            </div>

            <div dir='rtl' class="row border border-success border-top-0 text-center fixNoaStupidStuff">
              <div class="col-12">
                <button (click)="addSupplierToComponent()" class="btn btn-success form-control">הוסף ספק</button>
              </div>
            </div>
            <div dir='rtl' class="row text-center fixNoaStupidStuff">
              <div class="col-12">
                <table class="table table-striped table-hover">
                  <thead class="bg-success text-white">
                    <tr>
                      <th></th>
                      <th>ספק</th>
                      <th>יצרן</th>
                      <th>שם פריט</th>
                      <th>מספר פריט</th>
                      <th>מחיר</th>
                      <th>מטבע</th>
                      <th>משקל</th>
                      <th>מחיר העמסה (מטבע קניה)</th>
                      <th>מטבע לפני טעינה</th>
                      <th></th>
                    </tr>
                  </thead>
                  <tbody>

                    <ng-container *ngFor="let supplier of resCmpt.alternativeSuppliers;let i = index">

                      <tr [ngClass]="mainSupplier(supplier.isMain)" >

                        <td><button (click)="makeAsMainSupplier(i)" class="btn btn-success">ספק ראשי</button></td>
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.supplierName}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
    
                          <input [value]="supplier.supplierName" list="suppliers" class="form-control" #supplierName>
                          <datalist id="suppliers">
                            <option *ngFor="let supplier of allSuppliers" value="{{supplier.suplierName}}">
                              {{supplier.suplierName}}</option>
                          </datalist>
                        </td>
  
                        <!-- <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.supplierName}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.supplierName" class="form-control" #supplierName>
                        </td> -->
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.manufacturer}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.manufacturer" class="form-control" #manufacturer>
                        </td>
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.alterName}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.alterName" class="form-control" #alterName>
                        </td>
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.alternativeMaterial}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.alternativeMaterial" class="form-control"
                            #alternativeMaterial>
                        </td>
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.price}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.price" class="form-control" #price>
                        </td>
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.coin}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.coin" class="form-control" #coin>
                        </td>
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.packageWeight}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.packageWeight" class="form-control" #packageWeight>
                        </td>
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          {{supplier.priceLoading}}</td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.priceLoading" class="form-control" #priceLoading>
                        </td>
  
                        <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                          <span *ngIf="supplier.shippingPrice"> {{supplier.shippingPrice | currency: 'NIS'}}</span>
                        </td>
                        <td *ngIf="EditRowId == supplier.supplierName">
                          <input type="text" [value]="supplier.coinLoading" class="form-control" #coinLoading>
                        </td>
                        <td><i (click)="deleteSupplier(i,resCmpt.componentN)" class="fa fa-times text-danger"></i></td>
                      </tr>

                    </ng-container>
 
                  </tbody>
                </table>
              </div>
            </div>

            <div *ngIf="updateSupplier == true" class="row text-center fixNoaStupidStuff">
              <div class="col-5 fixNoaStupidStuff">

              </div>
              <div class="col-2 fixNoaStupidStuff">
                <button (click)="updateSupplierDetails(true)" class="btn btn-success form-control">שמור</button>
              </div>
              <div class="col-5 fixNoaStupidStuff">

              </div>

            </div>

            <div class="row text-center fixNoaStupidStuff">
              <div class="col-3 fixNoaStupidStuff">

              </div>
              <div class="col-3 fixNoaStupidStuff">
                <div *ngIf="allowUserEditItem">
                  <button class="btn btn-success form-control" id="updateDataBtn" (click)="editStockItemDetails()"
                    *ngIf="newItem!='new'">עדכן
                    מידע</button>
                </div>
              </div>
              <div class="col-3 fixNoaStupidStuff">
                <button class="btn btn-success form-control" id="newCbtn" (click)="clearFields()">Clear</button>
              </div>
              <div class="col-3 fixNoaStupidStuff">

              </div>
            </div>

          </div>
        </mat-tab>
        <mat-tab label="Item Movements">
          <div class="container modal-inner">

            <div class="row fixNoaStupidStuff text-center p-2">
              <div class="col-1 fixNoaStupidStuff">
                <img class="w-50 h-100" (click)="switchModalView(resCmpt.componentN)"
                  src="../../../../assets/images/refreshData.png">
              </div>
              <div class="col-10 fixNoaStupidStuff text-center">
                <h3 class="text-success">Item Movements</h3>
              </div>
              <div class="col-1 fixNoaStupidStuff">
                <span class="close text-success" id="closeId2"
                  (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
              </div>
            </div>

            <div class="row fixNoaStupidStuff text-center">
              <div class="col-4"></div>
              <div class="col-2">
                <label class="form-control"><b>{{lastYearOutAmount}}</b></label>
              </div>
              <div class="col-2">
                <label class="form-control">הוצאות שנה אחרונה</label>
              </div>
              <div class="col-4"></div>
            </div>

            <div class="row fixNoaStupidStuff text-center p-2">
              <div class="col-12 fixNoaStupidStuff">
                <div style="overflow:scroll;height:500px;width:100%">
                  <table class="table table-striped table-hover">
                    <thead class="bg-success text-white">
                      <tr>
                        <th>Amount</th>
                        <th>In Stock</th>
                        <th>Movement Type</th>
                        <th>Date</th>
                        <th>Shelf</th>
                        <th>WhareHouse</th>
                      </tr>
                    </thead>
                    <div class="fixNoaStupidStuff row text-center" *ngIf="itemMovements.length==0">
                      <div class="col-12 text-center">
                        <h4>No Movements for Item.</h4>
                      </div>
                    </div>
                    <tbody>
                      <ng-container *ngFor="let itemMovement of itemMovements">
                        <tr *ngIf="itemMovement.WH_originName != 'Filling'">
                          <td>{{itemMovement.amount}}</td>
                          <td>{{itemMovement.destShelfQntBefore}}</td>
                          <td>{{itemMovement.movementType}}</td>
                          <td>{{itemMovement.movementDate | date: 'dd/MM/yyyy'}}</td>
                          <td>{{itemMovement.shell_position_in_whareHouse_Origin}}</td>
                          <td>{{itemMovement.WH_originName}}</td>
                        </tr>
                      </ng-container>
                    </tbody>
                  </table>
                </div>
              </div>
            </div>
          </div>
        </mat-tab>

        <!--component-->
        <mat-tab *ngIf="isSuperAdmin" label="Item Purchase History">
          <span class="close text-success" id="closeId2"
            (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
          <div class="row">
            <label>Number of orders: </label> &nbsp;
            <input type="text" #numOfOrders />
            <div class="col-1"></div>
            <button (click)="getLastOrdersItem(numOfOrders.value, 'component')">Watch History</button>
          </div>
          <div class="container modal-inner">
            <div class="smallLoader" *ngIf="fetchingOrders"></div>
            <div *ngIf="lastOrdersOfItem.length > 0" class="row fixNoaStupidStuff text-center p-2">
              <div style="overflow:scroll;height:500px;width:100%">
                <h3>Purchase History for Item {{resCmpt.number}}</h3>
                <table class="table table-striped table-hover">
                  <thead class="bg-success text-white">
                    <tr>
                      <th>#</th>
                      <th>Order Number</th>
                      <th>Supplier</th>
                      <th>Status</th>
                      <th>Order Date</th>
                      <th>Arrival Date</th>
                      <th>Arrived Amount</th>
                      <th></th>
                      <th>Ordered Amount</th>
                      <th>Item Price (Foreign)</th>
                      <th>Item Price (NIS)</th>
                    </tr>
                  </thead>
                  <tbody>
                    <ng-container *ngFor="let lastorderitem of lastOrdersOfItem; let i = index">
                      <tr>
                        <td>{{i+1}}</td>
                        <td>{{lastorderitem.orderNumber}}</td>
                        <td>{{lastorderitem.supplierName}}</td>
                        <td>{{lastorderitem.status}}</td>
                        <td>{{lastorderitem.orderDate | date: 'dd/MM/yyyy'}}</td>
                        <td><span *ngIf="lastorderitem.arrivalDate">{{lastorderitem.arrivalDate | date:
                            'dd/MM/yyyy'}}</span></td>
                        <td>{{lastorderitem.arrivedAmount}}</td>
                        <td>/</td>
                        <td>{{lastorderitem.quantity}}</td>
                        <td>{{lastorderitem.price | currency: lastorderitem.coin}}</td>
                        <td>{{lastorderitem.localPrice | currency: 'NIS'}}</td>
                      </tr>
                    </ng-container>
                  </tbody>
                </table>
              </div>
            </div>
          </div>
        </mat-tab>


      </mat-tab-group>
    </div>

    <!-- <div dir="ltr" *ngIf="check==true" id="myModal2" class="modal2"
      style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:185px;top:130px; box-shadow: 0px 0px 39px 8px rgba(0,0,0,0.3);'>

      <div class="modal-content" style='width:700px; background: rgb(165, 185, 250);' id='modelC'>
        <div class="modal-header">
          <span class="close" id="closeId2" (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
          <h2 id='div_h3'>{{openModalHeader}}</h2><br>
          <button class="btn btn-primary" (click)="switchModalView()">{{itemmoveBtnTitle}}</button>
        </div>
        <div dir="rtl" class="modal-body"
          style="overflow-y:scroll; overflow-x:hidden; float:right; height: 500px; padding-left: 0px; background: rgb(165, 185, 250);">
          <div *ngIf="showItemDetails">
            <table id='detailsTable'>
              <tbody id='detailsTbody'>
                <tr style="box-shadow: 0px 0px 0px;">
                  <th>מספר פריט</th>
                  <td><input type='text' [(ngModel)]="resCmpt.componentN" id="input_componentNumber"></td>
                  <th>מק"ט ספק</th>
                  <td><input [(ngModel)]="resCmpt.componentNs" type='text' id="input_idSuplierNumber"></td>
                </tr>

                <tr>
                  <th>שם פריט</th>
                  <td><textarea rows='4' cols='30' [(ngModel)]="resCmpt.componentName" style='width:150px'
                      id='input_componentName'></textarea></td>
                  <th>מלאי מינימום</th>
                  <td><input type='number' id="input_minimumStock" [(ngModel)]="resCmpt.minimumStock"></td>
                </tr>
                <tr style="width:250px;">
                  <th>פריט חלופי</th>
                  <td><input [(ngModel)]="resCmpt.alternativeComponent" style='width:150px' id='input_componentName'>
                  </td>
                  <td></td>
                  <td></td>
                </tr>
                <tr>
                  <th>שם קומקס</th>
                  <td>
                    <input [(ngModel)]="resCmpt.comaxName" style='width:150px'>
                  </td>
                </tr>
                <tr>

                  <th>קטגוריה</th>
                  <td>

                    <input type="text" *ngIf="newItem!='new'" [(ngModel)]="resCmpt.componentType" disabled />

                    <select id='input_componentType' [(ngModel)]="resCmpt.componentType">
                      <option value='bottle_Glass'>בקבוק זכוכית</option>
                      <option value='bottle_Plastic'>בקבוק פלסטיק</option>
                      <option value='jar_Glass'>צנצנת זכוכית</option>
                      <option value='jar_Plastic'>צנצנת פלסטיק</option>
                      <option value='cap'>פקק</option>
                      <option value='cover'>מכסה</option>
                      <option value='pump'>משאבה</option>
                      <option value='cosmetic_pump'>משאבה קוסמטית</option>
                      <option value='over_cap'>מכסה עילי</option>
                      <option value='tube'>שפורפרת</option>
                      <option value='colons'>קולונים</option>
                      <option value='hair_life'>היירלייפ</option>
                      <option value='compacts'>קומפקטים</option>
                      <option value='personal_package'>אריזות אישיות</option>
                      <option value='master_carton'>קרטוני מאסטר</option>
                      <option value='newsletter'>עלון לצרכן</option>
                      <option value='irosol_valve'>אירוסול- שסתום</option>
                      <option value='irosol_bottle'>איירוסול- בקבוק</option>
                      <option value='irosol_hectotor'>אירוסול- הקטאטור</option>
                      <option value='irosol_bottle'>איירוסול- בקבוק</option>
                      <option value='cellophane'>צלופן</option>
                    </select>
                  </td>
                  <th>משקל/סוג</th>
                  <td>
                    <input type="text" id="input_packageWeight" style='width:55px; margin-left:5px' placeholder='גרם'
                      [(ngModel)]="resCmpt.packageWeight">
                    <select id='input_packageType' [(ngModel)]="resCmpt.packageType">
                      <option value='paperCarton'>נייר/קרטון</option>
                      <option value='drinkCarton'>קרטוניות משקה</option>
                      <option value='transperentGlass'>זכוכית שקופה</option>
                      <option value='colorGlass'>זכוכית צבעונית</option>
                      <option value='pet'>PET</option>
                      <option value='hdpe'>HDPE</option>
                      <option value='ldpe'>LDPE</option>
                      <option value='pp'>PP</option>
                      <option value='ps'>PS</option>
                      <option value='otherPlastic'>פלסטיק אחר</option>
                      <option value='metal'>מתכת</option>
                      <option value='wood'>עץ</option>
                      <option value='otherMaterial'>חומר אחר</option>
                    </select>
                  </td>
                </tr>
                <tr>
                  <th>מותג</th>
                  <td>
                    <input list="categories" [(ngModel)]="resCmpt.componentCategory">
                    <datalist id="categories">
                      <option value=""></option>
                      <option *ngFor="let cmptCategory of cmptCategoryList">{{cmptCategory}}</option>
                    </datalist>





                  </td>
                  <th>בפועל ml כמות</th>
                  <td><input type='number' [(ngModel)]="resCmpt.actualMlCapacity" id="input_actualMlCapacity"></td>
                </tr>
                <tr>
                  <th>אספקה</th>
                  <td><input type='text' placeholder="מקומי/חול" id='input_import' [(ngModel)]="resCmpt.importFrom">
                  </td>
                  <th>תמונה</th>
                  <td><input type='file' id="input_itemImgID" (change)='uploadImg($event)' style='display:block'><input
                      type='text' [(ngModel)]="tempHiddenImgSrc" id='tempHiddenImgSrc' style='display:none'></td>
                </tr>
                <tr>
                  <th>מספר ספק</th>
                  <td><input type='text' (change)="fillSupplierDetails()" id='input_suplierN'
                      [(ngModel)]="resCmpt.suplierN"></td>
                  <td colspan='2' rowspan='5'><img [src]='resCmpt.img' width="350px"
                      style='margin-top:20px; max-height: 420px;' id='imgID'><br><progress value="0" max="100"
                      id="uploader" style='width:300px' id="uploader">0%</progress></td>
                </tr>
                <tr>
                  <th>שם ספק</th>
                  <td><input type='text' id='input_suplierName' [(ngModel)]="resCmpt.suplierName"></td>
                </tr>
                <tr>
                  <th>מחיר ספק</th>
                  <td><input type='text' id='supplierPrice' [(ngModel)]="resCmpt.price"></td>
                </tr>
                <tr>
                  <th>הערות</th>
                  <td><textarea rows='4' cols='30' style='width:150px' id='input_remarks'
                      [(ngModel)]="resCmpt.remarks"></textarea><br>
                    <input type="checkbox" name="printed" value="printed" id='checkBox_need_print'> דרושה הדפסה
                  </td>
                </tr>
                <tr>
                  <th>הערה קופצת</th>
                  <td><textarea [(ngModel)]="resCmpt.jumpRemark" class="itemInput" rows="3" cols="20"></textarea>
                  </td>
                </tr>
                <tr>
                  <th>פריטים מקושרים</th>
                  <td><span *ngFor="let item of resCmpt.componentItems"
                      style="border: grey solid; border-style: outset; margin:3px;  padding: 3px; display:inline-block; ">
                      {{item.itemNumber}}&nbsp;</span></td>

                </tr>
                <tr>
                  <th></th>
                </tr>
              </tbody>
            </table>

          </div>
          <div *ngIf="!showItemDetails">
            <h5>Item Movements</h5>
            <div *ngIf="itemMovements.length==0">
              <img style="width:50px"
                src="http://avacdn.com/wp-content/uploads/2018/05/motosha-spinner.gif" /><span><b>loading
                  movements...</b></span>
              <br />
              <p *ngIf="!loadingMovements  && itemMovements.length==0 " style="font-weight: bold; color: red;">No Item
                Movements !</p>
            </div>
            <table class="table table-stipped" style="direction:ltr;text-align:left ">

              <tr>
                <th>Amount</th>
                <th>Movement Type</th>
                <th>Date</th>
                <th>Shelf</th>
                <th>New Shelf</th>
                <th>WhareHouse</th>
              </tr>
              <tr *ngFor="let itemMovement of itemMovements">
                <td>{{itemMovement.amount}}</td>
                <td>{{itemMovement.movementType}}</td>
                <td>{{itemMovement.movementDate | date: 'dd/MM/yyyy'}}</td>
                <td>{{itemMovement.shell_position_in_whareHouse_Origin}}</td>
                <td>{{itemMovement.shell_position_in_whareHouse_Dest}}</td>
                <td>{{itemMovement.WH_originName}}</td>


              </tr>

            </table>
          </div>
        </div>
        <div class="modal-footer">
          <button class="btn btn-success" id="newCbtn" (click)="writeNewComponent()" *ngIf="newItem=='new'">הקם
            מוצר</button>
          <div *ngIf="allowUserEditItem">
            <button class="btn btn-success" id="updateDataBtn" (click)="editStockItemDetails()"
              *ngIf="newItem!='new'">עדכן
              מידע</button>
          </div>
        </div>
      </div>

    </div> -->





    <div *ngIf="openModal==true && stockType=='product'" id="myModal2" class="modal2" style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:185px;top:130px; box-shadow: 0px 0px 39px 8px rgba(0,0,0,0.3); 
    height: 50vh;'>

      <!-- Modal content -->
      <div class="modal-content" style='width:700px; height: 50vh; background: rgb(165, 185, 250);' id='modelC'>
        <div class="modal-header">
          <span class="close" id="closeId2" (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
          <!-- <img src="peerpharm.png"  width='140px' align='left'> -->
          <h2 id='div_h3'>{{openModalHeader}}</h2><br>
        </div>
        <div class="modal-body flex-container"
          style="overflow-y:scroll; overflow-x:hidden; height: 500px; padding-left: 0px">
          <div *ngIf="showItemDetails">
            <table id='detailsTable'>
              <tbody id='detailsTbody'>
                <tr style="box-shadow: 0px 0px 0px">
                  <th>מספר פריט</th>
                  <td><input type='text' [(ngModel)]="productToFind">
                    <img (click)="searchProduct()" src="../../../../assets/images/search.png" alt=""
                      style="padding-right: 10px; width: 50px; cursor: pointer;">
                  </td>
                </tr>
                <tr>
                  <th>שם פריט</th>
                  <td>
                    <textarea rows='4' cols='30' [(ngModel)]="resCmpt.componentName" style='width:80%'
                      id='input_componentName'></textarea>
                  </td>
                </tr>
                <tr>
                  <th>סוג פריט</th>
                  <td>
                    <input type="text" [(ngModel)]="resCmpt.componentType">
                  </td>
                </tr>
                <tr>
                  <th>תמונה</th>
                  <td>
                    <img *ngIf="resCmpt.img!=''" [src]="resCmpt.img" style="min-width: 200px;"
                      alt="Item main image please wait ...">
                    <p *ngIf="resCmpt.img==''"><b> -No Image- </b></p>
                  </td>
                </tr>

              </tbody>
            </table>
          </div>

        </div>
        <div class="modal-footer">
          <button class="btn btn-success" id="newCbtn" (click)="writeNewComponent()" *ngIf="newItemBtn=='new'">הקם
            מוצר</button>
        </div>
      </div>

    </div>
















    <div *ngIf="openImgModal==true && currModalImgSrc!=''" id="myImgModal" class="modal2"
      style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:100px;top:130px; box-shadow: 0px 0px 39px 8px rgba(0,0,0,0.3);'>

      <!-- Modal content -->
      <div class="modal-content" style='width:700px' id='modelD'>
        <div class="modal-header">
          <span class="close" id="closeId2"
            (click)="ImgModal=false ; currModalImgSrc=''; lastOrdersOfItem = [] ">&times;</span>
        </div>
        <div class="modal-body" style="overflow-y:scroll; overflow-x:hidden; height: 500px; padding-left: 0px">
          <img [src]="currModalImgSrc" width="100%">
        </div>
        <div class="modal-footer">
        </div>
      </div>

    </div>
















    <!-- ************************************************************************** -->


    <!-- ************************************************************************** -->






    <div style="margin-right:auto !important;" *ngIf="openAmountsModal==true"
      class="container bg-light text-center rounded shadow p-2 fixed-top mx-auto my-auto border border-success modal-inner fixNoaStupidStuff">
      <div class="row fixNoaStupidStuff">
        <div class="col-1 fixNoaStupidStuff"></div>
        <div class="col-10 fixNoaStupidStuff">
          <h2 class="text-success">כמויות במלאי - {{resCmpt.componentN}}</h2>
          <i class=" click h3 fa fa-times text-success" (click)="openAmountsModal = false"></i>
        </div>
        <div class="col-1 fixNoaStupidStuff">
          <i class="fa fa-times text-success" (click)="openAmountsModal = false"></i>
        </div>
      </div>

      <hr class="mt-0 mb-0">

      <div class="row fixNoaStupidStuff">
        <div class="col-12 fixNoaStupidStuff">
          <div *ngIf="itemAmountsWh.length == 0">
            <h4>לא קיים במלאי</h4>
          </div>
          <div class="text-center" *ngFor="let whName of itemAmountsWh">
            <div style="width:210px;zoom:0.9" class="container bg-white shadow fr justify-content-end">
              <h4>{{whName}}</h4>
              <table id='amountsTable' class="table table-hover fr">
                <thead class="text-white bg-success">
                  <tr>
                    <th style="padding:5px">מדף</th>
                    <th style="padding:5px">כמות</th>
                  </tr>
                </thead>
                <tbody id='amountsInWhTbody'>
                  <tr *ngFor="let shelfAmount of itemAmountsData">
                    <td *ngIf="shelfAmount.whName==whName">{{shelfAmount.ps}}</td>
                    <td *ngIf="shelfAmount.whName==whName">{{shelfAmount.sumShelfAmounts | number}}</td>
                    <!-- <td *ngIf="shelfAmount.whName==whName">{{shelfAmount.batchNumArr}}</td> -->
                  </tr>
                </tbody>
              </table>

            </div>
          </div>
        </div>
      </div>

      <hr class="mt-0 mb-0">

      <div class="row fixNoaStupidStuff">
        <div class="container text-center fr addItemshelf fixNoaStupidStuff">

          <div class="row fixNoaStupidStuff">
            <div class="col-12 fixNoaStupidStuff">
              <h3 class="text-success">שינוי כמויות</h3>
            </div>
          </div>

          <div class="row fixNoaStupidStuff">
            <div class="col-4 fixNoaStupidStuff"></div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">WhareHouse</label>
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <select class="form-control" *ngIf="stockType=='product'" [(ngModel)]="newItemShelfWH"
                (change)="searchItemShelfs()">
                <option value="" selected>בחר מחסן</option>
                <ng-container *ngFor="let wh of whareHouses;">
                  <option *ngIf="wh.name!='Rosh HaAyin' && wh.name!='Kasem'" [value]="wh._id">{{wh.name}}</option>
                </ng-container>
              </select>

              <select class="form-control" *ngIf="stockType=='component' || stockType=='material'"
                [(ngModel)]="newItemShelfWH" (change)="searchItemShelfs()">
                <option value="" selected>בחר מחסן</option>
                <ng-container *ngFor="let wh of whareHouses;">
                  <option *ngIf="wh.name!='Rosh HaAyin products'" [value]="wh._id">{{wh.name}}</option>
                </ng-container>
              </select>
            </div>
            <div class="col-4 fixNoaStupidStuff"></div>
          </div>


          <div class="row fixNoaStupidStuff justify-content-end">
            <div class="col-12 fixNoaStupidStuff">
              <ul class="nav nav-tabs justify-content-end">
                <li class="nav-item">
                  <a class="nav-link" style="cursor:pointer;" (click)="dirSet('withdrawForPallet')"
                    [ngStyle]="{'background-color': amountForPalletBtnColor}">הוצאת סחורה למשטח</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" style="cursor:pointer;" (click)="dirSet('shelfChange')"
                    [ngStyle]="{'background-color': sehlfChangeNavBtnColor}">העברת סחורה למדף אחר</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" style="cursor:pointer;" (click)="dirSet('')"
                    [ngStyle]="{'background-color': amountChangeNavBtnColor}">הוצאת/קבלת סחורה</a>
                </li>
              </ul>
            </div>

          </div>

          <div class="row fixNoaStupidStuff justify-content-end" *ngIf="amountChangeDir=='shelfChange'">

            <div class="col-2 fixNoaStupidStuff"></div>
            <div class="col-2 fixNoaStupidStuff">
              <button class="btn btn-success" (click)="updateItemStockShelfChange('shelfChange')">בצע
                העברה</button>
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="text" placeholder="מדף חדש" [(ngModel)]="destShelf" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="number" placeholder="כמות" [(ngModel)]="newItemShelfQnt">
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="text" placeholder="מדף נוכחי" [(ngModel)]="newItemShelfPosition" />
            </div>
            <div class="col-2 fixNoaStupidStuff"></div>


          </div>
          <div class="row fixNoaStupidStuff justify-content-end" *ngIf="amountChangeDir=='withdrawForPallet'">

            <div class="col-2 fixNoaStupidStuff"></div>
            <div class="col-2 fixNoaStupidStuff">
              <button class="btn btn-success" (click)="createNewQAPallet()">הקם
                משטח</button>
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input list="costumers" class="form-control" type="text" placeholder="לקוח"
                [(ngModel)]="newQApallet.customerName" />
              <datalist id="costumers">
                <option *ngFor="let customer of allCustomers" [value]="customer.costumerName">{{customer.costumerName}}
                </option>
              </datalist>
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="number" placeholder="כמות קומות" [(ngModel)]="newQApallet.floorNumber">
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="number" placeholder="מס' קרטונים"
                [(ngModel)]="newQApallet.kartonQuantity" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="text" placeholder="מדף" [(ngModel)]="newQApallet.shelf" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="number" placeholder="כמות בקרטון"
                [(ngModel)]="newQApallet.unitsInKarton" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="text" placeholder="הזמנה" [(ngModel)]="newQApallet.orderNumber" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="number" placeholder="קרטון חלקי"
                [(ngModel)]="newQApallet.unitsQuantityPartKarton" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="number" placeholder="קומה אחרונה"
                [(ngModel)]="newQApallet.lastFloorQuantity">
            </div>


          </div>

          <div class="fixNoaStupidStuff row justify-content-end" *ngIf="amountChangeDir==''">
            <div class="col-2 fixNoaStupidStuff">
              <button class="form-control btn btn-success" (click)="updateItemStock('in')">קבלת סחורה</button>
              <button class="form-control btn btn-danger" (click)="updateItemStock('out')">הוצאת סחורה</button>
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input *ngIf="stockType=='component' || stockType =='material'" class="form-control" type="text"
                placeholder="תעודת משלוח" [(ngModel)]="relatedOrderNum" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="text" placeholder="מדף" [(ngModel)]="newItemShelfPosition" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" type="number" placeholder="כמות" [(ngModel)]="newItemShelfQnt">
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <select (change)="showBatchExpDate($event)" *ngIf="stockType=='product'" class="form-control" type="text"
                placeholder="אצווה" [(ngModel)]="newItemShelfBatchNumber">
                <option value="" selected>Batch</option>
                <option *ngFor="let batch of ItemBatchArr" [value]="batch.batchNumber">{{batch.batchNumber}}</option>

              </select>
            </div>
            <div class="col-2">

            </div>

            <!-- <div>
              <label>Exp Date: {{expirationBatchDate}}</label>
            </div> -->
          </div>

          <div class="fr row justify-content-end">
            <div class="col-sm-12">
              <label class="fr text-success">הפריט נמצא על המדפים</label>&nbsp;<br>
            </div>
            <ng-container *ngFor="let itemShelf of currItemShelfs">
              <div class="col-sm-3 bg-white rounded border border-success" (click)="loadShelfToInput(itemShelf, $event)"
                style="margin-left:5px; cursor:pointer; padding: 3px; ">
                <span><u>{{itemShelf.position}}</u>: <b>{{itemShelf.amount}}</b> Units </span>&nbsp;<br>
                <span *ngIf="itemShelf.arrivalDate!='undefined' && itemShelf.itemType=='product' ">Batch:
                  {{itemShelf.batchNumber }}</span>&nbsp;<br>
                <span *ngIf="itemShelf.itemType=='material'"><u>Exp Date:</u>: <b>{{itemShelf.expirationDate | date:
                    'dd/MM/yyyy'}}</b> Units </span>&nbsp;<br>
                <span *ngIf="itemShelf.itemType=='material'">Arrival Date: {{itemShelf.arrivalDate | date: 'dd/MM/yyyy'
                  }}</span>&nbsp;<br>
                <!--  <span *ngIf="itemShelf.itemType!='component' && itemShelf.expirationDate!='undefined'">expiration date: {{itemShelf.expirationDate}}</span>&nbsp;       -->
              </div>
            </ng-container>

          </div>

        </div>
      </div>

    </div>





  </div>


  <div class="container bg-light rounded shadow fixed-top mx-auto my-auto border border-success"
    *ngIf="openModal == true && stockType=='material'">
    <mat-tab-group mat-align-tabs="center">
      <mat-tab label="Material Details">
        <div class="container fixNoaStupidStuff p-2 modal-inner">
          <div style="padding: 0rem;" class="row text-center fixNoaStupidStuff">
            <div style="padding: 0rem;" class="col-1 fixNoaStupidStuff text-right">
              <!-- <button class="btn btn-success form-control" (click)="switchModalView()">{{itemmoveBtnTitle}}</button> -->
            </div>
            <div style="padding: 0rem;" class="col-10 fixNoaStupidStuff">
              <h2 style="padding: 0rem;" class="text-success" id='div_h3'>{{openModalHeader}}</h2><br>
            </div>
            <div style="padding: 0rem;" class="col-1 fixNoaStupidStuff">
              <span class="close text-success" id="closeId2"
                (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
            </div>
          </div>

          <div dir="rtl" style="padding: 0rem;" class="row text-center fixNoaStupidStuff">
            <div style="padding: 0rem;" class="col-12 fixNoaStupidStuff">
              <h5 style="padding: 0rem;" class="text-success">פרטים כלליים</h5>
            </div>
            <!-- <div class="col-8 fixNoaStupidStuff">
            <h5 class="text-success">מחסן/מחלקת בישול</h5>
          </div> -->

          </div>
          <div style="padding: 0rem;" class="row text-center fixNoaStupidStuff">
            <div class="col-2 fixNoaStupidStuff"><label class="form-control">Item Number</label></div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" (change)="checkIfExist($event)" [(ngModel)]="resMaterial.componentN">
            </div>
            <div class="col-2 fixNoaStupidStuff"><label class="form-control">Item Name</label></div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" (change)="checkIfExist($event)" [(ngModel)]="resMaterial.componentName">
            </div>
            <!-- <div class="col-2 fixNoaStupidStuff"><label class="form-control">Last Price (NIS)</label></div>
            <div class="col-2 fixNoaStupidStuff">
              <input class="form-control" [(ngModel)]="resMaterial.price">
            </div>
            <div class="col-2 fixNoaStupidStuff"><label class="form-control">Shipping (NIS)</label></div>
            <div class="col-2 fixNoaStupidStuff">
              <input type="number" class="form-control" [(ngModel)]="resMaterial.shippingPrice">
            </div> -->
            <div class="col-2 fixNoaStupidStuff"><label class="form-control">Last Price (NIS)</label></div>
            <div class="col-2 fixNoaStupidStuff">
              <input type="number" class="form-control" [(ngModel)]="resMaterial.finalPrice">
            </div>
          </div>

          <div dir="rtl" style="padding: 0rem;" class="row fixNoaStupidStuff text-center">
            <div class="col-1"></div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">INCI Name</label>
              <label class="form-control">Month Till Exp</label>
              <label class="form-control">CAS Number</label>
              <label class="form-control">Function</label>
              <label class="form-control">מצב צבירה</label>
              <label style="font-size:13px" class="form-control">חומרים מסוכנים בפירוק</label>
            </div>
            <div class="col-3 fixNoaStupidStuff">
              <input class="form-control" (change)="checkIfInciNameExist($event)" [(ngModel)]="resMaterial.inciName"
                type='text'>
              <input class="form-control" [(ngModel)]="resMaterial.monthTillExp" type="number" />
              <input class="form-control" [(ngModel)]="resMaterial.casNumber" type='text'>
              <input class="form-control" [(ngModel)]="resMaterial.function" type='text'>
              <input list="som" class="form-control" [(ngModel)]="resMaterial.stateOfMatter" type='text'>
              <datalist id="som">
                <option value="liquid">Liquid</option>
                <option value="solid">Solid</option>
                <option value="gell">Gell</option>
              </datalist>
              <input class="form-control" [(ngModel)]="resMaterial.dangerMaterials" type='text'>
            </div>

            <div class="2">
              <!-- <label class="form-control">COA</label>
            <label class="form-control">MSDS</label>
            <label class="form-control">הערות</label> -->
              <button class="btn btn-success form-control"><i (click)="addComposition()"
                  class="fa fa-plus"></i></button>
              <label class="form-control">הרכב</label>
            </div>
            <div style="height:210px;overflow-y: scroll;" class="col-3">
              <input [(ngModel)]="compositionName" class='form-control'>
              <table style="font-size: 9px;" class="table table-hover table-striped">
                <tbody>
                  <tr *ngFor="let comp of resMaterial.composition">
                    <td>{{comp.compName}}</td>
                    <td>{{comp.compPercentage}}</td>
                    <td><i (click)="deleteFromComposition(resMaterial._id,comp.compName)"
                        class="fa fa-times text-danger"></i></td>

                  </tr>
                </tbody>
              </table>
              <!-- <button class="btn btn-success form-control" (click)="coaMasterInput.click()"><i class="fa fa-upload"
                  aria-hidden="true"></i></button>
              <button class="btn btn-success form-control" (click)="msdsInput.click()"><i class="fa fa-upload"
                  aria-hidden="true"></i></button>
  
              <textarea [(ngModel)]="resMaterial.remarks" class="form-control mt-2" rows="6" cols="20"></textarea> -->

            </div>

            <div class="col-1">
              <input placeholder="%" [(ngModel)]="compositionPercentage" class="form-control">
            </div>
          </div>
          <div class="row fixNoaStupidStuff">
            <div class="col-10 fixNoaStupidStuff">
              <input class="form-control" [(ngModel)]="resMaterial.riskSentence" type='text'>

            </div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">משפטי סיכון</label>
            </div>
          </div>

          <div class="row fixNoaStupidStuff mt-3">

            <div class="col-2">
              <label class="form-control">COA Master</label>
              <label class="form-control">MSDS</label>
            </div>
            <div class="col-2">
              <button class="btn btn-success form-control" (click)="coaMasterInput.click()"><i class="fa fa-upload"
                  aria-hidden="true"></i></button>
              <button class="btn btn-success form-control" (click)="upload"><i class="fa fa-upload"
                  aria-hidden="true"></i></button>
            </div>
            <div class="col-3">

              <img style="height: 30px; width:30px;" src="../../../../assets/images/pdf.png" alt="PDF" />
              <input class="form-control" #coaMasterInput style="display:none" type="file"
                (change)="uploadCoaMaster($event)">


              <img style="height: 30px; width:30px;" src="../../../../assets/images/pdf.png" alt="PDF" />
              <input class="form-control" #msdsInput style="display:none" type="file" (change)="uploadMsds($event)">
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">Formule Remark</label>
            </div>
            <div class="col-3 fixNoaStupidStuff">
              <input type="text" [(ngModel)]="resMaterial.remarks" class="form-control">
            </div>
          </div>

          <div class="row text-center fixNoaStupidStuff">
            <div class="col-4 fixNoaStupidStuff">
              <button class="btn btn-success form-control" id="newCbtn" (click)="writeNewMaterial()">הקם
                מוצר</button>
            </div>
            <div class="col-4 fixNoaStupidStuff">
              <div *ngIf="allowUserEditItem">
                <button class="btn btn-success form-control" id="updateDataBtn" (click)="editMaterialItemDetails()"
                  *ngIf="newItem!='new'">עדכן
                  מידע</button>
              </div>
            </div>
            <div class="col-4 fixNoaStupidStuff">
              <button class="btn btn-success form-control" id="newCbtn" (click)="clearFields()">Clear</button>
            </div>
          </div>
        </div>
      </mat-tab>
      <mat-tab label="Storage/Cooking">
        <div class="container-fluid modal-inner">
          <div dir="rtl" style="padding: 0rem;" class="row text-center fixNoaStupidStuff">

            <div class="col-4 fixNoaStupidStuff">
              <span class="close" id="closeId2"
                (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
            </div>
            <div class="col-4 fixNoaStupidStuff">
              <h5 class="text-success">מחסן/מחלקת בישול</h5>
            </div>
            <div class="col-4 fixNoaStupidStuff">

            </div>

          </div>
          <div dir="rtl" style="padding: 0rem;" class="row fixNoaStupidStuff text-center">

            <div class="col-1"></div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">קבוצת סיכון</label>
              <label class="form-control">מספר או"מ</label>
              <label class="form-control">קוד חירום</label>
              <label class="form-control">טיפול בחירום</label>
              <label style="font-size: 13px;" class="form-control">כמות מותרת באחסון</label>
              <label class="form-control">היתר רעלים</label>
            </div>
            <div class="col-3 fixNoaStupidStuff">
              <select class="form-control" [(ngModel)]="resMaterial.threatment">

                <option value="flammableLiquid">3 - נוזל דליק</option>
                <option value="flammableSolid">4 - מוצק דליק</option>
                <option value="oxidizer">5.1 - מחמצן אי אורגני</option>
                <option value="toxic">6 - רעיל</option>
                <option value="acid">8 - חומצה</option>
                <option value="base">8 - בסיס</option>
                <option value="otherDangerMaterials">9 - חומרים מסוכנים שונים</option>
                <option value="regular">אין מספר או"מ</option>
                <option value="cooling">איחסון בקירור</option>
                <option value="blockedByType">חסום לפי סוג חומר</option>
              </select>

              <input [(ngModel)]="resMaterial.umNumber" type="text" class="form-control" />
              <input [(ngModel)]="resMaterial.imerCode" type="text" class="form-control" />
              <input [(ngModel)]="resMaterial.imerTreatment" type="text" class="form-control" />
              <input [(ngModel)]="resMaterial.allowQtyInStock" type="text" class="form-control" />
              <input [(ngModel)]="resMaterial.permissionDangerMaterials" type="checkbox" style="width:12px"
                class="form-control" />
            </div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">מיקום במחסן</label>
              <label class="form-control">כמות במלאי</label>
              <label class="form-control">כמות פג תוקף</label>

              <label class="form-control">טמפ' אחסון</label>
              <label class="form-control">הוראות אחסון</label>

            </div>
            <div class="col-3 fixNoaStupidStuff">
              <input class="form-control" list="locations" [(ngModel)]="resMaterial.location"
                (change)="getAllMaterialLocations($event)" type="text">
              <datalist id="locations">
                <option *ngFor="let material of materialLocations" [value]="material.location">
                  {{material.location}}</option>
              </datalist>

              <input [(ngModel)]="resMaterial.quantityInStock" type="text" class="form-control" />
              <input [(ngModel)]="resMaterial.expiredQty" type="text" class="form-control" />


              <input [(ngModel)]="resMaterial.storageTemp" type="text" class="form-control" />
              <input [(ngModel)]="resMaterial.storageDirections" type="text" class="form-control" />

            </div>
            <div class="col-1"></div>
          </div>

          <div class="row text-center fixNoaStupidStuff">
            <div class="col-4 fixNoaStupidStuff">
              <button class="btn btn-success form-control" id="newCbtn" (click)="writeNewMaterial()">הקם
                מוצר</button>
            </div>
            <div class="col-4 fixNoaStupidStuff">
              <div *ngIf="allowUserEditItem">
                <button class="btn btn-success form-control" id="updateDataBtn" (click)="editMaterialItemDetails()"
                  *ngIf="newItem!='new'">עדכן
                  מידע</button>
              </div>
            </div>
            <div class="col-4 fixNoaStupidStuff">
              <button class="btn btn-success form-control" id="newCbtn" (click)="clearFields()">Clear</button>
            </div>
          </div>

        </div>
      </mat-tab>
      <mat-tab label="Material Suppliers Details">
        <div class="container modal-inner">

          <div style="padding: 0rem;" class="row text-center fixNoaStupidStuff">
            <div class="col-1 fixNoaStupidStuff text-right">
              <!-- <button class="btn btn-success form-control" (click)="switchModalView()">{{itemmoveBtnTitle}}</button> -->
            </div>
            <div class="col-10 fixNoaStupidStuff">
              <h4 class="text-success">ספקים</h4>
            </div>
            <div class="col-1 fixNoaStupidStuff">
              <span class="close text-success" id="closeId2"
                (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
            </div>
          </div>

          <div dir='rtl' class="row border border-success border-bottom-0 fixNoaStupidStuff text-center">
            <div class="col-1 fixNoaStupidStuff"></div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">ספק</label>
              <label class="form-control">יצרן</label>
              <label class="form-control">מספר פריט ספק</label>
              <label class="form-control">שם פריט ספק</label>
              <label class="form-control">סוג אריזה</label>

            </div>
            <div class="col-3 fixNoaStupidStuff">
              <input list="suppliers" class="form-control" [(ngModel)]="supplier.supplierName">
              <datalist id="suppliers">
                <option *ngFor="let supplier of allSuppliers" value="{{supplier.suplierName}}">
                  {{supplier.suplierName}}</option>
              </datalist>
              <input type="text" class="form-control" [(ngModel)]="supplier.manufacturer">
              <input [(ngModel)]="supplier.alternativeMaterial" class="form-control" type='text'>
              <input [(ngModel)]="supplier.alterName" class="form-control" type='text'>
              <input list="groups" [(ngModel)]="supplier.subGroup" class="form-control">
              <datalist id="groups">
                <option value="Cube">קובייה</option>
                <option value="barrel">חבית</option>
                <option value="small barrel">חביונית</option>
                <option value="packaging/cardboard">אריזות/קרטון</option>
                <option value="plastic barrel">חבית פלסטיק</option>
                <option value="jerrican">ג'ריקן</option>
                <option value="bag">שק</option>
                <option value="bottle barrel">דלי בקבוק</option>
              </datalist>

            </div>
            <div class="col-2 fixNoaStupidStuff">
              <label class="form-control">מחיר</label>
              <label class="form-control">מטבע</label>
              <label class="form-control">מחיר העמסה</label>
              <label class="form-control">מטבע לאחר טעינה</label>
              <label class="form-control">משקל יחידה</label>
              <label class="form-control">יחידת מידה</label>
            </div>
            <div class="col-3 fixNoaStupidStuff">
              <input [(ngModel)]="supplier.price" type="text" class="form-control">
              <input list="coins" [(ngModel)]="supplier.coin" class="form-control">
              <datalist id="coins">
                <option value="usd">USD</option>
                <option value="nis">NIS</option>
                <option value="gbp">GBP</option>
                <option value="eur">EUR</option>
                <option value="yen">YEN</option>
              </datalist>
              <input [(ngModel)]="supplier.priceLoading" type="text" class="form-control" />
              <input list="coinsLoading" [(ngModel)]="supplier.coinLoading" class="form-control">
              <datalist id="coinsLoading">
                <option value="usd">USD</option>
                <option value="nis">NIS</option>
                <option value="gbp">GBP</option>
                <option value="eur">EUR</option>
                <option value="yen">YEN</option>
              </datalist>
              <input [(ngModel)]="supplier.packageWeight" type="text" class="form-control" />
              <input list="measurement" [(ngModel)]="resMaterial.unitOfMeasure" class="form-control">
              <datalist id="measurement">
                <option value="kilogram">קילוגרם</option>
                <option value="pcs">יחידות</option>
                <option value="liter">ליטר</option>
              </datalist>
            </div>
            <div class="col-1 fixNoaStupidStuff"></div>
          </div>

          <div dir='rtl' class="row border border-success border-top-0 text-center fixNoaStupidStuff">
            <div class="col-12">
              <button (click)="addSupplierToMaterial()" class="btn btn-success form-control">הוסף ספק</button>
            </div>
          </div>
          <div dir='rtl' class="row text-center fixNoaStupidStuff">
            <div class="col-12">
              <table class="table table-striped table-hover">
                <thead class="bg-success text-white">
                  <tr>
                    <th></th>
                    <th>ספק</th>
                    <th>יצרן</th>
                    <th>שם פריט ספק</th>
                    <th>מספר פריט ספק</th>
                    <th>מחיר</th>
                    <th>מטבע</th>
                    <th>משקל</th>
                    <th>מדינה</th>
                    <th>זמן הגעה משוער</th>
                    <th>מחיר העמסה</th>
                    <!--  <th>מחיר לפני טעינה</th> -->
                    <th></th>
                  </tr>
                </thead>
                <tbody>
                  
                  <ng-container *ngFor="let supplier of resMaterial.alternativeSuppliers;let i = index">

                    <tr [ngClass]="mainSupplier(supplier.isMain)" >

                      <td><button (click)="makeAsMainSupplier(i)" class="btn btn-success">ספק ראשי</button></td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.supplierName}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
  
                        <input [value]="supplier.supplierName" list="suppliers" class="form-control" #supplierName>
                        <datalist id="suppliers">
                          <option *ngFor="let supplier of allSuppliers" value="{{supplier.suplierName}}">
                            {{supplier.suplierName}}</option>
                        </datalist>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.manufacturer}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.manufacturer" class="form-control" #manufacturer>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.alterName}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.alterName" class="form-control" #alterName>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.alternativeMaterial}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.alternativeMaterial" class="form-control"
                          #alternativeMaterial>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.price}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.price" class="form-control" #price>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.coin}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <select [value]="supplier.coin" #coin>
                          <option value="NIS">NIS</option>
                          <option value="USD">USD</option>
                          <option value="EUR">EUR</option>
                          <option value="GBP">GBP</option>
                        </select>
                        <!-- <input type="text" > -->
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.packageWeight}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.packageWeight" class="form-control" #packageWeight>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.country}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.country" class="form-control" #country>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.expectedArrival}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.expectedArrival" class="form-control" #expectedArrival>
                      </td>
  
                      <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.shippingPrice | currency: 'NIS'}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="number" [value]="supplier.shippingPrice" class="form-control" #priceLoading>
                      </td>
  
                      <!-- <td *ngIf="EditRowId != supplier.supplierName" (click)="editSuppliers(supplier.supplierName)">
                        {{supplier.coinLoading}}</td>
                      <td *ngIf="EditRowId == supplier.supplierName">
                        <input type="text" [value]="supplier.coinLoading" class="form-control" #coinLoading>
                      </td> -->
                      <td><i (click)="deleteSupplier(i,resMaterial.componentN)" class="fa fa-times text-danger"></i></td>
  
                    </tr>

                  </ng-container>

                </tbody>
              </table>
            </div>
          </div>

          <div *ngIf="updateSupplier == true" class="row text-center fixNoaStupidStuff">
            <div class="col-5 fixNoaStupidStuff">

            </div>
            <div class="col-2 fixNoaStupidStuff">
              <button (click)="updateSupplierDetails(true)" class="btn btn-success form-control">שמור</button>
            </div>
            <div class="col-5 fixNoaStupidStuff">

            </div>

          </div>

          <div class="row text-center fixNoaStupidStuff">
            <div class="col-3 fixNoaStupidStuff">

            </div>
            <div class="col-3 fixNoaStupidStuff">
              <div *ngIf="allowUserEditItem">
                <button class="btn btn-success form-control" id="updateDataBtn" (click)="editMaterialItemDetails()"
                  *ngIf="newItem!='new'">עדכן
                  מידע</button>
              </div>
            </div>
            <div class="col-3 fixNoaStupidStuff">
              <button class="btn btn-success form-control" id="newCbtn" (click)="clearFields()">Clear</button>
            </div>
            <div class="col-3 fixNoaStupidStuff">

            </div>
          </div>

        </div>
      </mat-tab>
      <mat-tab label="Purchase Details">
        <div class="row fixNoaStupidStuff text-center modal-inner">
          <div class="col-1 fixNoaStupidStuff ">

          </div>
          <div class="col-10 fixNoaStupidStuff ">
            <h4 class="text-success">רכש</h4>
          </div>
          <div class="col-1 fixNoaStupidStuff ">
            <span class="close text-success" id="closeId2"
              (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
          </div>
        </div>
        <div class="row fixNoaStupidStuff text-center">
          <div class="col-12 fixNoaStupidStuff">
            <table class="table table-hover table-striped">
              <thead class="bg-success text-white">
                <tr>
                  <th>Order Number</th>
                  <th>Order Amount</th>
                  <th>Arrival Details</th>

                </tr>
              </thead>
              <tbody>
                <ng-container>
                  <tr *ngFor="let material of materialPurchases">
                    <td>{{material.orderNumber}}</td>
                    <td>{{material.supplierAmount}}</td>

                    <td>
                      <table *ngIf="material.arrivals">
                        <tr *ngFor="let arrival of material.arrivals">
                          <td>Date: {{arrival.arrivalDate | date: 'dd/MM/yyyy'}}</td>
                          <td>Amount: {{arrival.arrivedAmount}}</td>
                        </tr>
                      </table>
                    </td>

                  </tr>
                </ng-container>
              </tbody>
            </table>
          </div>
        </div>
      </mat-tab>

      <mat-tab label="Material Arrivals">
        <div class="container-fluid text-center modal-inner">
          <div class="row fixNoaStupidStuff">
            <div class="col-4 fixNoaStupidStuff"></div>
            <div class="col-4 fixNoaStupidStuff">
              <h3 class="text-success">הגעות חומרי גלם</h3>
            </div>
            <div class="col-4 fixNoaStupidStuff">
              <span class="close text-success" id="closeId2"
                (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
            </div>
          </div>

          <div class="row fixNoaStupidStuff">
            <div class="col-12 fixNoaStupidStuff">
              <h5 class="text-danger">Since 01.01.2019 - 01.01.2020 we ordered {{totalQuantity}}</h5>
            </div>
          </div>

          <div class="row fixNoaStupidStuff mt-2">
            <div style="height:500px" class="col-12 fixNoaStupidStuff">
              <table class="table table-hover table-striped">
                <thead class="text-white bg-success">
                  <tr>
                    <th>ספק</th>
                    <th>הזמנה</th>
                    <th>אצווה</th>
                    <th>כמות</th>
                    <th>תאריך תפוגה</th>
                    <th>תאריך הגעה</th>
                    <th>שם חומר</th>
                  </tr>
                </thead>
                <tbody style="overflow-y: scroll;">
                  <tr *ngFor="let arrival of materialArrivals">
                    <td>{{arrival.supplierName}}</td>
                    <td>{{arrival.cmxOrderN}}</td>
                    <td>{{arrival.lotNumber}}</td>
                    <td>{{arrival.totalQnt}}</td>
                    <td>{{arrival.expiryDate | date: 'dd/MM/yyyy'}}</td>
                    <td>{{arrival.arrivalDate | date: 'dd/MM/yyyy'}}</td>
                    <td>{{arrival.materialName}}</td>
                  </tr>
                </tbody>
              </table>
            </div>
          </div>

        </div>
      </mat-tab>

      <!--material-->
      <mat-tab *ngIf="isSuperAdmin" label="Item Purchase History">
        <span class="close text-success" id="closeId2"
          (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>
        <div class="row">
          <label>Number of orders: </label> &nbsp;
          <input type="text" #numOfOrders />
          <div class="col-1"></div>
          <button (click)="getLastOrdersItem(numOfOrders.value, 'material')">Watch History</button>
        </div>
        <div class="container modal-inner">
          <div class="smallLoader" *ngIf="fetchingOrders"></div>
          <div *ngIf="lastOrdersOfItem.length > 0" class="row fixNoaStupidStuff text-center p-2">
            <div style="overflow:scroll;height:500px;width:100%">
              <h3>Purchase History for Item {{lastOrdersOfItem[0].number}}</h3>
              <table class="table table-striped table-hover">
                <thead class="bg-success text-white">
                  <tr>
                    <th>#</th>
                    <th>Order Number</th>
                    <th>Supplier</th>
                    <th>Status</th>
                    <th>Order Date</th>
                    <th>Arrival Date</th>
                    <th>Arrived Amount</th>
                    <th></th>
                    <th>Ordered Amount</th>
                    <th>Item Price (Foreign)</th>
                    <th>Item Price (NIS)</th>
                  </tr>
                </thead>
                <tbody>
                  <ng-container *ngFor="let lastorderitem of lastOrdersOfItem; let i = index">
                    <tr>
                      <td>{{i+1}}</td>
                      <td>{{lastorderitem.orderNumber}}</td>
                      <td>{{lastorderitem.supplierName}}</td>
                      <td>{{lastorderitem.status}}</td>
                      <td>{{lastorderitem.orderDate | date: 'dd/MM/yyyy'}}</td>
                      <td><span *ngIf="lastorderitem.arrivalDate">{{lastorderitem.arrivalDate | date:
                          'dd/MM/yyyy'}}</span></td>
                      <td>{{lastorderitem.arrivedAmount}}</td>
                      <td>/</td>
                      <td>{{lastorderitem.quantity}}</td>
                      <td>{{lastorderitem.price | currency: lastorderitem.coin}}</td>
                      <td>{{lastorderitem.localPrice | currency: 'NIS'}}</td>
                    </tr>
                  </ng-container>
                </tbody>
              </table>
            </div>
          </div>
        </div>
      </mat-tab>

    </mat-tab-group>
  </div>

  <!-- <div *ngIf="check==true && stockType=='material'" id="myModal3" class="modal3"
    style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:185px;top:130px; box-shadow: 0px 0px 39px 8px rgba(0,0,0,0.3);'>

    <div class="modal-content" id='modelC'>
      <div id="material-header" class="modal-header">
        <span class="close" id="closeId2" (click)="openModal=false;newItem='';lastOrdersOfItem = []">&times;</span>

        <h2 id='div_h3'>{{openModalHeader}}</h2><br>
        <button class="btn btn-primary" (click)="switchModalView()">{{itemmoveBtnTitle}}</button>

      </div>
      <div class="container" id="material-body" class="modal-body"
        style="overflow-y:scroll; overflow-x:hidden; height: 900px; padding-left: 0px">

        <div *ngIf="showItemDetails">
          <table style="box-shadow: 0px 0px 0px" id='detailsTable'>
            <tbody style="box-shadow: 0px 0px 0px" id='detailsTbody'>
              <div style="width: 1200px;" class="row">

                <div style="margin-left: 10px;box-shadow: 0px 0px 0px;">
                  <tr>
                    <th>Item Number</th>
                    <td><input (change)="checkIfExist($event)" [(ngModel)]="resMaterial.componentN"
                        style="margin-left: 1px;" class="itemInput" type='text'>

                    </td>
                  </tr>
                  <tr>
                    <th>Item Name</th>
                    <td><input [(ngModel)]="resMaterial.componentName" class="itemInput" type='text'>
                    </td>
                  </tr>
                  <tr>
                    <th>Alternative Item</th>
                    <td><input [(ngModel)]="resMaterial.alternativeMaterial" class="itemInput" type='text'>
                    </td>
                  </tr>
                  <tr>
                    <th>INCI Name</th>
                    <td><input [(ngModel)]="resMaterial.inciName" class="itemInput" type='text'>
                    </td>
                  </tr>
                  <tr>
                    <th>CAS Number</th>
                    <td><input [(ngModel)]="resMaterial.casNumber" class="itemInput" type='text'>
                    </td>
                  </tr>
                  <tr>
                    <th>Remarks</th>
                    <td><textarea [(ngModel)]="resMaterial.remarks" class="itemInput" rows="5" cols="20"></textarea>
                    </td>
                  </tr>
                  <tr>
                    <th>Main Picture</th>
                    <td style="margin-left: 50px;"><img style="height: 250px;width: 200px;border: 1px solid white;"
                        [src]="resMaterial.img" alt="Material Photo" />
                      <input #fileInput style="display:none" type='file' (change)="onSelectFile($event)">
                      <br>
                      <button (click)="fileInput.click()">Select File</button>
                    </td>
                  </tr>
                  <tr>
                    <td>
                      <label>Not in stock</label><input [(ngModel)]="resMaterial.notInStock" type="checkbox">
                    </td>
                  </tr>
                  <tr>
                    <th>Frame Quantity (kg)</th>
                    <td>
                      <input [(ngModel)]="resMaterial.frameQuantity" type="text">
                    </td>
                  </tr>
                  <tr>
                    <th>Frame Supplier</th>
                    <td>
                      <input [(ngModel)]="resMaterial.frameSupplier" type="text">
                    </td>
                  </tr>
                  <br>
                  <tr>
                    <th>Location</th>
                    <td>
                      <input list="locations" [(ngModel)]="resMaterial.location"
                        (change)="getAllMaterialLocations($event)" type="text">
                      <datalist id="locations">
                        <option *ngFor="let material of materialLocations" [value]="material.location">
                          {{material.location}}</option>
                      </datalist>
                    </td>
                  </tr>
                  <tr>
                    <th>Quantity In Stock</th>
                    <td>
                      <input type="text" [(ngModel)]="resMaterial.quantityInStock">
                    </td>
                  </tr>
                  <tr>
                    <th>Mixed Material</th>
                    <td>
                      <input type="text" [(ngModel)]="mixMaterial">
                    </td>
                    <td>
                      <input type="number" style="width:50px;" [(ngModel)]="mixMaterialPercentage"><i
                        (click)="createMixedMaterial()" class="fa fa-plus"></i>
                    </td>
                  </tr>
                  <tr *ngFor="let mixedMaterial of resMaterial.mixedMaterial">
                    <td>
                      {{mixedMaterial.materialName}}
                    </td>
                  </tr>
                </div>

                <div style="margin-left: 20px;">
                  <tr>
                    <th>Unit Of Measure</th>
                    <td>
                      <select [(ngModel)]="resMaterial.unitOfMeasure" class="itemInput">
                        <option value="kilogram">קילוגרם</option>
                        <option value="pcs">יחידות</option>
                        <option value="liter">ליטר</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <th>Group</th>

                    <td><select [(ngModel)]="resMaterial.group" class="itemInput" type="text">
                        <option value="formule material">חומר גלם לפורמולה</option>
                        <option value="component">קומפוננט </option>
                        <option value="print material">חומרי דפוס</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <th>Sub Group</th>
                    <td>
                      <select [(ngModel)]="resMaterial.subGroup" class="itemInput">
                        <option value="Cube">קובייה</option>
                        <option value="barrel">חבית</option>
                        <option value="small barrel">חביונית</option>
                        <option value="packaging/cardboard">אריזות/קרטון</option>
                        <option value="plastic barrel">חבית פלסטיק</option>
                        <option value="jerrican">ג'ריקן</option>
                        <option value="bag">שק</option>
                        <option value="bottle barrel">דלי בקבוק</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <th>Sub Group 2</th>
                    <td><input [(ngModel)]="resMaterial.subGroupB" class="itemInput" type="text" disabled />
                    </td>
                  </tr>

                  <tr>
                    <th style="cursor: pointer" (click)="open(supplierList)"><u>Supplier</u></th>
                    <td>
                      <select class="itemInput" [(ngModel)]="resMaterial.suplierName">
                        <option *ngFor="let supplier of allSuppliers" value="{{supplier.suplierName}}">
                          {{supplier.suplierName}}</option>
                      </select>
                    </td>
                  </tr>

                  <tr>
                    <th>Manufacturer</th>
                    <td>
                      <input type="text" class="itemInput" [(ngModel)]="resMaterial.manufacturer" />
                    </td>
                  </tr>


                  <tr>
                    <th>Status</th>
                    <td>
                      <select [(ngModel)]="resMaterial.status" class="itemInput">
                        <option value="active">פעיל</option>
                        <option value="notActive">לא פעיל</option>
                        <option value="notForBuy">לא לקנייה</option>
                      </select>
                    </td>
                  </tr>

                  <tr>
                    <th>קבוצת סיכון</th>
                    <td>
                      <select [(ngModel)]="resMaterial.threatment" class="itemInput">
                        <option value="flammable">דליק</option>
                        <option value="toxic">רעיל</option>
                        <option value="attention">תשומת לב</option>
                        <option value="regular">רגיל</option>
                        <option value="cooling">איחסון בקירור</option>
                        <option value="blockedByType">חסום לפי סוג חומר</option>

                      </select>
                    </td>
                  </tr>

                  <tr>
                    <th>מס או"מ</th>
                    <td>
                      <input [(ngModel)]="resMaterial.umNumber" type="text" class="itemInput" />

                    </td>
                  </tr>

                  <tr>
                    <th>קוד חירום</th>
                    <td>
                      <input [(ngModel)]="resMaterial.imerCode" type="text" class="itemInput" />

                    </td>
                  </tr>


                  <tr>
                    <th>Month Till Exp</th>
                    <td>
                      <input [(ngModel)]="resMaterial.monthTillExp" type="number" class="itemInput" />

                    </td>
                  </tr>

                  <tr>
                    <th>Weight</th>
                    <td>
                      <input [(ngModel)]="resMaterial.packageWeight" type="text" class="itemInput" />
                    </td>
                  </tr>

                  <tr>
                    <th>Price</th>
                    <td>
                      <input [(ngModel)]="resMaterial.price" type="text" class="itemInput" />
                    </td>
                  </tr>
                  <tr>
                    <th>coin</th>
                    <td>
                      <select [(ngModel)]="resMaterial.coin" class="itemInput">
                        <option value="usd">USD</option>
                        <option value="nis">NIS</option>
                        <option value="gbp">GBP</option>
                        <option value="eur">EUR</option>
                        <option value="yen">YEN</option>
                      </select>
                    </td>
                  </tr>
                  <tr>
                    <th>Price After Loading</th>
                    <td>
                      <input [(ngModel)]="resMaterial.priceLoading" type="text" class="itemInput" />
                    </td>
                  </tr>
                  <tr>
                    <th>Coin After Loading</th>
                    <td>
                      <select [(ngModel)]="resMaterial.coinLoading" class="itemInput">
                        <option value="usd">USD</option>
                        <option value="nis">NIS</option>
                        <option value="gbp">GBP</option>
                        <option value="eur">EUR</option>
                        <option value="yen">YEN</option>
                      </select>
                    </td>
                  </tr>


                  <tr>
                    <th>Material</th>
                    <td>
                      <select #material class="itemInput">
                        <option selected></option>
                        <option value='bottle_Glass'>בקבוק זכוכית</option>
                        <option value='bottle_Plastic'>בקבוק פלסטיק</option>
                        <option value='jar_Glass'>צנצנת זכוכית</option>
                        <option value='jar_Plastic'>צנצנת פלסטיק</option>
                        <option value='cap'>פקק</option>
                        <option value='cover'>מכסה</option>
                        <option value='pump'>משאבה</option>
                        <option value='cosmetic_pump'>משאבה קוסמטית</option>
                        <option value='over_cap'>מכסה עילי</option>
                        <option value='tube'>שפורפרת</option>
                        <option value='colons'>קולונים</option>
                        <option value='hair_life'>היירלייפ</option>
                        <option value='compacts'>קומפקטים</option>
                        <option value='personal_package'>אריזות אישיות</option>
                        <option value='master_carton'>קרטוני מאסטר</option>
                        <option value='newsletter'>עלון לצרכן</option>
                        <option value='irosol_valve'>אירוסול- שסתום</option>
                        <option value='irosol_bottle'>איירוסול- בקבוק</option>
                        <option value='irosol_hectotor'>אירוסול- הקטאטור</option>
                        <option value='irosol_bottle'>איירוסול- בקבוק</option>
                      </select>
                    </td>
                  </tr>

                  <tr>
                    <th>Barcode</th>
                    <td>
                      <input [(ngModel)]="resMaterial.barcode" type="text" class="itemInput" />
                    </td>
                  </tr>

                  <tr>
                    <th>Actual Volume ml</th>
                    <td>
                      <input [(ngModel)]="resMaterial.actualMlCapacity" type="text" class="itemInput" />
                    </td>
                  </tr>


                  <tr>
                    <th>Stock Min Pcs</th>
                    <td>
                      <input [(ngModel)]="resMaterial.minimumStock" type="text" class="itemInput" />
                    </td>
                  </tr>

                  <tr>
                    <th>Month Avg Pcs</th>
                    <td>
                      <input [(ngModel)]="resMaterial.monthAvgPcs" type="text" class="itemInput" />
                    </td>
                  </tr>

                  <tr>
                    <th>MSDS</th>
                    <td> <a target="_blank" [href]="linkDownload"> <img style="height: 30px; width:30px;"
                          src="https://baltic-sea-philharmonic.eu/wp-content/uploads/PDF-Icon.png" alt="PDF" /></a>
                      <input #msdsInput style="display:none" type="file" (change)="onSelectMsds($event)">
                      <br>
                      <button (click)="msdsInput.click()">Select File</button>
                    </td>
                  </tr>

                  <tr>
                    <th>COA Master</th>
                    <td><a target="_blank" [href]="linkDownload"><img style="height: 30px; width:30px;"
                          src="https://baltic-sea-philharmonic.eu/wp-content/uploads/PDF-Icon.png" alt="PDF" /></a>
                      <input #coaMasterInput style="display:none" type="file" (change)="onSelectCoaMaster($event)">
                      <br>
                      <button (click)="coaMasterInput.click()">Select File</button>
                    </td>
                  </tr>



                </div>
                <div style="margin-left:10px; background:rgb(135, 153, 187); width:300px; border:1px solid black;">

                </div>

              </div>


            </tbody>
          </table>

        </div>
        <div *ngIf="!showItemDetails">
          <h5>Item Movements</h5>
          <div *ngIf="itemMovements.length==0">
            <img style="width:50px"
              src="http://avacdn.com/wp-content/uploads/2018/05/motosha-spinner.gif" /><span><b>loading
                movements...</b></span>
            <br />
            <p *ngIf="!loadingMovements  && itemMovements.length==0 " style="font-weight: bold; color: red;">No Item
              Movements !</p>
          </div>
          <table class="table table-stipped" style="direction:ltr;text-align:left ">

            <tr>
              <th>Amount</th>
              <th>Movement Type</th>
              <th>Date</th>
              <th>Shelf</th>
              <th>New Shelf</th>
              <th>WhareHouse</th>
            </tr>
            <tr *ngFor="let itemMovement of itemMovements">
              <td>{{itemMovement.amount}}</td>
              <td>{{itemMovement.movementType}}</td>
              <td>{{itemMovement.movementDate | date: 'dd/MM/yyyy'}}</td>
              <td>{{itemMovement.shell_position_in_whareHouse_Origin}}</td>
              <td>{{itemMovement.shell_position_in_whareHouse_Dest}}</td>
              <td>{{itemMovement.WH_originName}}</td>

            </tr>

          </table>
        </div>
      </div>
      <div id="material-footer" class="modal-footer">
        <button class="btn btn-success" id="newCbtn" (click)="writeNewMaterial()">הקם
          מוצר</button>
        <button class="btn btn-success" id="newCbtn" (click)="clearFields()">Clear</button>
        <button class="btn btn-success" id="updateDataBtn" (click)="editMaterialItemDetails()"
          *ngIf="newItem!='new'">עדכן
          מידע</button>
      </div>
    </div>

  </div> -->

  <div style="height:0px !important" *ngIf="openOrderAmountsModal==true" id="myModal3" class="modal3"
    style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:400px;top:130px;'>

    <!-- Modal content -->
    <div style="width:800px !important" class="modal-content" id='modelC'>
      <div style="width:800px !important;" id="material-header" class="modal-header">
        <span class="close" id="closeId3" (click)="openOrderAmountsModal=false;">&times;</span>
        <h2 style="text-align: center">{{openModalHeader}}</h2><br>
      </div>
      <div style="height: auto !important;width:800px !important;overflow:scroll" class="container" id="material-body"
        class="modal-body">
        <table style="background:white;" class="table table-hover">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Orders</th>
              <th scope="col">Allocated Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of allocatedOrders;let i=index">
              <td>{{i+1}}</td>
              <td>{{order.orderNumber}}</td>
              <td>{{order.allocatedAmount}}</td>
            </tr>
          </tbody>
        </table>

      </div>

    </div>
  </div>

  <div style="height:0px !important" *ngIf="openProductAmountModal==true" id="myModal3" class="modal3"
    style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:400px;top:130px;'>

    <!-- Modal content -->
    <div style="width:800px !important" class="modal-content" id='modelC'>
      <div style="width:800px !important;" id="material-header" class="modal-header">
        <span class="close" id="closeId3" (click)="openProductAmountModal=false;">&times;</span>
        <h2 style="text-align: center">{{openModalHeader}}</h2><br>
      </div>
      <div style="height: auto !important;width:800px !important;overflow:scroll" class="container" id="material-body"
        class="modal-body">
        <table style="background:white;" class="table table-hover">
          <thead>
            <tr>
              <th scope="col">#</th>
              <th scope="col">Orders</th>
              <th scope="col">Allocated Amount</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let order of allocatedProducts;let i=index">
              <td>{{i+1}}</td>
              <td>{{order.orderNumber}}</td>
              <td>{{order.allocatedQuantity}}</td>
            </tr>
          </tbody>
        </table>

      </div>


    </div>
  </div>


  <div style="margin-right:auto !important" *ngIf="newPurchaseRecommendModal"
    class="container border border-info fixNoaStupidStuff bg-white shadow-lg rounded mx-auto my-auto text-center fixed-top p-5">
    <form [formGroup]="newPurchaseRecommendation" class="modal-inner">
      <div class="row mt-2 fixNoaStupidStuff">
        <div class="col-1 fixNoaStupidStuff"></div>
        <div class="col-3 fixNoaStupidStuff"></div>
        <div class="col-4 fixNoaStupidStuff">
          <h2 class="text-info">בקשת רכש חדשה</h2>
        </div>
        <div class="col-3 fixNoaStupidStuff"></div>
        <div class="col-1 fixNoaStupidStuff">
          <i class="fa fa-times" (click)="newPurchaseRecommendModal = false"></i>
        </div>
      </div>

      <span class="float-left"> * Required field</span>

      <div class="row mt-2 fixNoaStupidStuff">
        <div class="col-3">
          <label class="text-info">Date</label>
          <span class="hot-red float-left">*</span>
          <input formControlName="date" class="form-control rounded-pill" type="date" required>
        </div>
        <div class="col-3">
          <label class="text-info">My Email</label>
          <span class="hot-red float-left">*</span>
          <input formControlName="mail" class="form-control rounded-pill" type="text" required>
        </div>
        <div class="col-5">
          <label class="text-info">Remarks</label>
          <input type="text" formControlName="remarks" placeholder="Remarks" class="form-control rounded-pill">
        </div>
      </div>


      <hr>

      <div class="row mt-2 fixNoaStupidStuff">
        <div class="col-4 fixNoaStupidStuff"></div>
        <div class="col-4 fixNoaStupidStuff">
          <h5>Add Item</h5>
        </div>
        <div class="col-4 fixNoaStupidStuff"></div>
      </div>

      <div class="row mt-1 fixNoaStupidStuff">
        <div class="col-2 fixNoaStupidStuff">
          <span class="hot-red float-left">*</span>
          <label class="text-info">Type</label>
          <select formControlName="type" class="form-control rounded-pill" required>
            <option selected="true" disabled="disabled">Choose Type</option>
            <option value="component">Component</option>
            <option value="material">Material</option>
          </select>
        </div>

        <div class="col-2 fixNoaStupidStuff">
          <span class="hot-red float-left">*</span>
          <label class="text-info">Item Number</label>
          <input (focusout)="getStockItemByNumber($event)" [ngModelOptions]="{standalone: true}"
            [(ngModel)]="recommendStockItem.number" class="form-control rounded-pill" type="text"
            placeholder="StockItem Number" required>
        </div>
        <div [ngModelOptions]="{standalone: true}" class="col-3 fixNoaStupidStuff">
          <span class="hot-red float-left">*</span>
          <label class="text-info">Item Name</label>
          <input [ngModelOptions]="{standalone: true}" [(ngModel)]="recommendStockItem.name"
            class="form-control rounded-pill" type="text" placeholder="StockItem Name" required>
        </div>

        <div class="col-2 fixNoaStupidStuff">
          <span class="hot-red float-left">*</span>
          <label class="text-info">Amount</label>
          <input [ngModelOptions]="{standalone: true}" [(ngModel)]="recommendStockItem.quantity"
            class="form-control rounded-pill" type="number" placeholder="amount" (focusout)="itemAmountsData = []"
            required>
        </div>
        <div class="col-2 fixNoaStupidStuff">
          <span class="hot-red float-left">*</span>
          <label class="text-info">Measurement</label>
          <select [ngModelOptions]="{standalone: true}" [(ngModel)]="recommendStockItem.measurement"
            class="form-control rounded-pill" required>
            <option value="kg">kg</option>
            <option value="liter">liter</option>
            <option value="meter">meter</option>
            <option value="ml">ml</option>
            <option value="unit">Unit</option>
            <option value="ton">טון</option>
            <option value="unit">יחידה</option>
            <option value="box">קופסא</option>
          </select>
        </div>
        <div *ngIf="itemAmountsData && itemAmountsData.length > 0" class="col-12">
          <table id='amountsTable' class="table table-striped">
            <thead>
              <tr>
                <th scope="col">כמות</th>
                <th scope="col">מדף</th>
              </tr>
            </thead>
            <tbody id='amountsInWhTbody'>
              <tr *ngFor="let shelfAmount of itemAmountsData">
                <th scope="row">{{shelfAmount.sumShelfAmounts | number}}</th>
                <th scope="row">{{shelfAmount.ps}}</th>
                <!-- <td *ngIf="shelfAmount.whName==whName">{{shelfAmount.batchNumArr}}</td> -->
              </tr>
            </tbody>
          </table>
        </div>
      </div>


      <div class="row mt-1 fixNoaStupidStuff">
        <div class="col-4"></div>
        <div class="col-4">
          <button (click)="addStockItemToRecommend()" class="btn btn-info form-control rounded-pill">
            <i class="fa fa-plus"></i>
          </button>
        </div>
        <div class="col-4"></div>
      </div>

      <div id="print-section" class="row mt-2 fixNoaStupidStuff">
        <div class="col-12">
          <table class="table table-hover table-striped">
            <thead>
              <tr>
                <th class="text-info">StockItem Number</th>
                <th class="text-info">StockItem Name</th>
                <th class="text-info">Quantity</th>
                <th class="text-info">Measurement</th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let stockitem of this.newPurchaseRecommendation.controls.stockitems.value">
                <td>{{stockitem.number}}</td>
                <td>{{stockitem.name}}</td>
                <td>{{stockitem.quantity}}</td>
                <td>{{stockitem.measurement}}</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>


      <div class="row mt-2 fixNoaStupidStuff">
        <div class="col-5 fixNoaStupidStuff"></div>
        <div class="col-2 fixNoaStupidStuff">
          <button (click)="sendRecommandation()" class="btn-success rounded-pill form-control">שלח</button>
        </div>
        <div class="col-2 fixNoaStupidStuff">
          <button printSectionId="print-section" ngxPrint class="btn-success rounded-pill form-control">הדפסה</button>
        </div>
        <div class="col-5 fixNoaStupidStuff"></div>
      </div>
    </form>
  </div>




  <div *ngIf="stockType=='cartons'" class="tableFixHead">
    <table class='table stockTable table-fixed' *ngIf="stockType=='cartons'">
      <thead style="background: rgb(69, 69, 202);z-index: 9999;" class='tableHeader text-white'>
        <tr style="text-align: center;">

          <th></th>
          <th>מספר פריט</th>
          <th>מק"ט פריט ספק</th>
          <th>שם</th>
          <th>כמות</th>
          <th>תמונה</th>
          <th></th>
          <th>צפי הגעה הזמנת רכש</th>
        </tr>

      </thead>


      <tbody id="table_body" class="componentTable">
        <tr *ngFor="let carton of components;let i = index"
          style="box-shadow: inset 1px -1px 2px 0px black; margin-top: 1px;">
          <td>{{i+1}}</td>
          <td>{{carton.componentN}}</td>
          <td>{{carton.componentNs}}</td>
          <td>{{carton.componentName}}</td>
          <td></td>
          <td><img [src]=carton.img></td>
          <td><button (click)="purchaseRecommend(carton)" class="btn-success">המלצה לרכש</button></td>
          <td></td>

        </tr>
      </tbody>
    </table>

  </div>

  <div *ngIf="inventoryNewReqModal == true" style="z-index: 9999;top:50px !important"
    class="fixNoaStupidStuff mx-auto my-auto text-center fixed-top p-4">
    <div class="row">
      <div class="col-10"></div>
      <div class="col-2">
        <i class="fa fa-times text-info" (click)="inventoryNewReqModal = false"></i>
      </div>
    </div>
    <app-inventory-new-request></app-inventory-new-request>
  </div>


  <div *ngIf="invRequestsModal == true"
    style="z-index: 9999;top:0px !important;height: auto;border:2px 2px 2px blue;width: 50%;right:0px !important"
    class="fixNoaStupidStuff border border-info bg-white container fixed-top mx-auto my-auto text-center p-1">
    <app-inventory-requests></app-inventory-requests>
  </div>

  <div *ngIf="itemsMovementModal == true" style="z-index: 9999;top:0px !important;height: auto;border:2px 2px 2px blue;"
    class="fixNoaStupidStuff border border-info bg-white container-fluid fixed-top text-center p-1">

    <div class="row fixNoaStupidStuff">
      <div class="col-12 fixNoaStupidStuff">
        <h1 class="text-info">קבלה / העברת סחורה</h1>
      </div>
    </div>

    <div class="row fixNoaStupidStuff">
      <div class="col-3 fixNoaStupidStuff"></div>
      <div class="col-3 fixNoaStupidStuff">
        <label class="form-control">Type</label>
      </div>
      <div class="col-3 fixNoaStupidStuff">
        <select [(ngModel)]="recieveItemType" class="form-control">
          <option selected="true" disabled="disabled">בחר סוג</option>
          <option value="component">Component</option>
          <option value="material">Material</option>
        </select>
      </div>
      <div class="col-3 fixNoaStupidStuff"></div>
    </div>

    <div *ngIf="recieveItemType == 'material'" class="row fixNoaStupidStuff">
      <app-material-arrival style="width:100%"></app-material-arrival>
    </div>
    <div *ngIf="recieveItemType == 'component'" class="row fixNoaStupidStuff">
      <app-wharehouse style="width:100%"></app-wharehouse>
    </div>

  </div>


  <div *ngIf="customersModal == true" style="z-index: 9999;"
    class="container border border-info fixNoaStupidStuff bg-white shadow-lg rounded mx-auto my-auto text-center fixed-top p-4">
    <div class="row fixNoaStupidStuff">
      <div class="col-4 fixNoaStupidStuff"></div>
      <div class="col-4 fixNoaStupidStuff">
        <h3 class="text-info">רשימת לקוחות</h3>
      </div>
      <div class="col-4 fixNoaStupidStuff">
        <i (click)="customersModal = false;" class="text-info fa fa-times"></i>
      </div>
    </div>

    <div class="row mt-4 fixNoaStupidStuff">
      <div class="col-4 fixNoaStupidStuff"></div>
      <div class="col-4 fixNoaStupidStuff">
        <input list="customers" (change)="addCustomerToPayingList($event)">
        <datalist id="customers">
          <option *ngFor="let customer of allCustomers" [value]="customer.costumerName">{{customer.costumerId}}</option>
        </datalist>


      </div>
      <div class="col-4 fixNoaStupidStuff"></div>
    </div>
  </div>

  <div *ngIf="stockType=='sticker'" class="tableFixHead">
    <table class='table stockTable table-fixed' *ngIf="stockType=='sticker'">
      <thead style="background: rgb(69, 69, 202);z-index: 9999;" class='tableHeader text-white'>
        <tr style="text-align: center;">

          <th></th>
          <th>מספר פריט</th>
          <th>מק"ט פריט ספק</th>
          <th>שם</th>
          <th>כמות</th>
          <th>תמונה</th>
          <th></th>
          <th></th>
          <th></th>
          <th></th>
          <th>צפי הגעה הזמנת רכש</th>
        </tr>

      </thead>


      <tbody id="table_body" class="componentTable">
        <tr *ngFor="let sticker of components;let i = index"
          style="box-shadow: inset 1px -1px 2px 0px black; margin-top: 1px;">
          <td>{{i+1}}</td>
          <td>{{sticker.componentN}}</td>
          <td>{{sticker.componentNs}}</td>
          <td>{{sticker.componentName}}</td>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td><img [src]=sticker.img></td>
          <td><button (click)="purchaseRecommend(sticker)" class="btn-success">המלצה לרכש</button></td>
          <td></td>

        </tr>
      </tbody>
    </table>

  </div>
</div>

<ng-template #printInventoryValue let-modal>
  <div class="modal-header">
    <h4 class="modal-title" id="modal-basic-title">Print Component Value For Money</h4>
    <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <div class="modal-body">
    <table class='table stockTable table-fixed'>
      <thead style="background: rgb(69, 69, 202);z-index: 9999;" class='tableHeader text-white'>
        <tr style="text-align: center;">
          <th>#</th>
          <th>מספר פריט</th>
          <th>מחיר</th>
          <th>כמות במלאי</th>
          <th>ערך</th>
        </tr>
      </thead>
      <tbody id="table_body" class="componentTable">
        <tr style="box-shadow: inset 1px -1px 2px 0px black; margin-top: 1px;"
          *ngFor="let component of components; let i = index; ">
          <ng-container *ngIf="component.itemType == 'component'">
            <td>{{i+1}}</td>
            <td>{{component.componentN}}</td>
            <td>
              <span *ngIf="component.alternativeSuppliers[0]">
                {{ component.alternativeSuppliers[0].price }}
              </span>
              <span *ngIf="component.alternativeSuppliers[1]">
                {{ component.alternativeSuppliers[1].price }}
              </span>
              <span *ngIf="component.alternativeSuppliers[2]">
                {{ component.alternativeSuppliers[2].price }}
              </span>
            </td>
            <td>{{component.amount}}</td>
            <td>
              <span *ngIf="component.alternativeSuppliers[0] && component.alternativeSuppliers[0].price">
                {{component.alternativeSuppliers[0].price*component.amount || 0 }}
              </span>
              <span *ngIf="component.alternativeSuppliers[1] && component.alternativeSuppliers[1].price">
                {{component.alternativeSuppliers[1].price*component.amount || 0 }}
              </span>
              <span *ngIf="component.alternativeSuppliers[2] && component.alternativeSuppliers[2].price">
                {{component.alternativeSuppliers[2].price*component.amount || 0}}
              </span>
            </td>
          </ng-container>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td></td>
          <td></td>
          <td>סה"כ כללי: {{totalComponentsValue}}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="modal-footer">
  </div>
</ng-template>














<!-- <div style="width:100%; padding: 0px">
      <form style="width:100%;" name="filterListFrom">
        <div class="row" style="width:100%;">
          <div class="col-sm-2">
            <label class="fr">מספר קומפוננט</label>
            <input #filterbyNum type="text" class="form-control" placeholder="Component Number"
              (change)="filterRows($event, 'itemNum' )">
         
          </div>
          <div class="col-sm-2">
            <label class="fr">שם פריט</label>
            <input #filterByCmptName type="text" class="form-control" placeholder="Item Name"
              (change)="filterRows($event, 'itemName')">
         
          </div>
          <div *ngIf="stockType=='component'" class="col-sm-2">
            <label class="fr">מק"ט פריט-ספק</label>
            <input #filterBySupplierN type="text" class="form-control" placeholder="Supplier Number..."
              (change)="filterRows($event , 'supplierN')">
           
          </div>
          <div *ngIf="stockType=='component'" class="col-sm-2">
            <label class="fr">מספר פריט</label>
            <input #filterByItem type="text" class="form-control" placeholder="Item Number"
              (change)="filterRows($event , 'itemNumber')">
     
          </div>
  
          <div *ngIf="stockType=='component'" class="col-sm-2">
            <label class="fr">סוג רכיב</label>
            <select #filterByType class="form-control" (change)="filterRows($event , 'type')">
     
              <option selected></option>
              <option value='bottle_Glass'>בקבוק זכוכית</option>
              <option value='bottle_Plastic'>בקבוק פלסטיק</option>
              <option value='jar_Glass'>צנצנת זכוכית</option>
              <option value='jar_Plastic'>צנצנת פלסטיק</option>
              <option value='cap'>פקק</option>
              <option value='cover'>מכסה</option>
              <option value='pump'>משאבה</option>
              <option value='cosmetic_pump'>משאבה קוסמטית</option>
              <option value='over_cap'>מכסה עילי</option>
              <option value='tube'>שפורפרת</option>
              <option value='colons'>קולונים</option>
              <option value='hair_life'>היירלייפ</option>
              <option value='compacts'>קומפקטים</option>
              <option value='personal_package'>אריזות אישיות</option>
              <option value='master_carton'>קרטוני מאסטר</option>
              <option value='newsletter'>עלון לצרכן</option>
              <option value='irosol_valve'>אירוסול- שסתום</option>
              <option value='irosol_bottle'>איירוסול- בקבוק</option>
              <option value='irosol_hectotor'>אירוסול- הקטאטור</option>
              <option value='irosol_bottle'>איירוסול- בקבוק</option>
              <option value='cellophane'>צלופן</option>
              <option value='sticker'>מדבקה</option>
              <option value='sachet'>סאשט</option>
              <option value='plate'>גלופה</option>
       
            </select>
          </div>
          <div *ngIf="stockType=='component'" class="col-sm-1">
            <label class="fr">קטגוריה</label>
            <select #filterByCategory class="form-control" (change)="filterRows($event , 'category')">
         
              <option selected></option>
              <option *ngFor="let cmptCategory of cmptCategoryList">{{cmptCategory}}</option>
            </select>
          </div>
          <div *ngIf="stockType=='component'" class="col-sm-1">
            <label class="fr">ספק</label>
            <select #filterBySupplier class="form-control" (change)="filterRows($event , 'supplier')">
       
              <option selected></option>
              <option *ngFor="let supplier of allSuppliers">{{supplier.suplierName}}</option>
            </select>
          </div>
          <div *ngIf="stockType=='component'" class="col-sm-1">
            <br>
            <button (click)="clearSearchFields()" style="margin-top:7px;" class="btn topBtn btn-warning" type="reset"><b>נקה שדות חיפוש</b></button>
          </div>
        </div>
      </form>
      <h4 *ngIf="!emptyFilterArr" style="color:red; text-align: center">אין תוצאות לחיפוש שנבחר - הטבלה מציגה את כל
        הפריטים</h4>
    </div> -->








<!-- <td style="width:12%;">
              <img src="../../../../assets/images/delivery-clock.png" alt="expectedDelivery"
                style="cursor: pointer; width: 35px; float: right;" (click)="updateExpectedProcurment(component)">
              <button *ngIf="component.procurementSent==true && updateStockItem" class="btn btn-warning" (click)="updateProcurment(component._id,component.componentN,'false')">
              מחק</button>{{component.procurementAmount}} 
              <table>
                <tbody>
                  <tr *ngFor="let expt of component.procurementArr " class="d-flex flex-row-reverse"
                    style="font-size:16px;">
                    <td *ngIf="expt.remarks" class="p-2">:הערות</td>
                    <td class="p-2"><span style="font-weight: bold;">{{expt.remarks}}</span></td>
                    <td class="p-2">:כמות</td>
                    <td class="p-2">{{expt.quantity}}</td>
                    <td [ngClass]="{ expiredDate: expt.expectedDate < today.toISOString() }">{{expt.expectedDate | date :'dd/MM/yyyy'}}</td>
            
                    
                  </tr>
                </tbody>
              </table>
            </td> -->
<!-- <div *ngIf="updateStockItem" style="width: 100%; padding: 0px 0px"> -->
<!-- <input #procurmentInput type="number" (keyup)="inputProcurment($event)" style="width: 50%; padding: 0px"/>
                  <span> <button class="btn btn-success"(click)="updateProcurment(component._id,component.componentN,'true')">עדכן</button></span> -->
<!-- </div> -->
<!-- <button class="btn btn-success" (click)="updateExpectedProcurment(component)">עדכן צפי הגעה</button>        -->











<!-- <div d=*ngIf="openAmountsModal==true" i"myModal3" class="modal3"
      style='border:1px; border-radius:5px;z-index: 1;position: fixed; left:230px;top:130px; box-shadow: 0px 0px 39px 8px rgba(0,0,0,0.3);'>


      <div class="modal-content" style='width:750px' id='modelC'>
        <div class="modal-header">
          <span class="close" id="closeId2" (click)='openAmountsModal=false'>&times;</span>
          <h2 id='div_h3'>{{openModalHeader}}</h2><br>
        </div>



        <div class="modal-body" style="overflow-y:auto">
          <div *ngFor="let whName of itemAmountsWh">
            <div class="container fr justify-content-end">
              <h4 class="fr"><u>{{whName}}</u></h4>
              <table id='amountsTable' class="table fr">
                <tbody id='amountsInWhTbody' align='center'>
                  <tr>
                    <th><b>מדף</b></th>
                    <th><b>כמות</b></th>
            
                  </tr>

                  <tr *ngFor="let shelfAmount of itemAmountsData">
                    <td *ngIf="shelfAmount.whName==whName">{{shelfAmount.ps}}</td>
                    <td *ngIf="shelfAmount.whName==whName">{{shelfAmount.sumShelfAmounts}}</td>
                    <td *ngIf="shelfAmount.whName==whName">{{shelfAmount.batchNumArr}}</td>

                 
                  </tr>

                </tbody>
              </table>

            </div>
          </div>

        
          <div class="container fr addItemshelf">
            <h4 style="text-align: right; border-bottom: gray solid;">שינוי כמויות</h4>

            <div class="fr row justify-content-end" style="width: 100%;">
              <select class="col-sm-3 ml-1 form-control" *ngIf="stockType=='product'" [(ngModel)]="newItemShelfWH"
                (change)="searchItemShelfs()">
                <option value="" selected>בחר מחסן</option>
                <ng-container *ngFor="let wh of whareHouses;">
                  <option *ngIf="wh.name!='Rosh HaAyin' && wh.name!='Kasem'" [value]="wh._id">{{wh.name}}</option>
                </ng-container>
              </select>
              <select class="col-sm-3 ml-1 fr form-control" *ngIf="stockType=='component'" [(ngModel)]="newItemShelfWH"
                (change)="searchItemShelfs()">
                <option value="" selected>בחר מחסן</option>
                <ng-container *ngFor="let wh of whareHouses;">
                  <option *ngIf="wh.name!='Rosh HaAyin products'" [value]="wh._id">{{wh.name}}</option>
                </ng-container>
              </select>
              <label class="col-sm-3 ml-1">בחר מחסן</label>
            </div>


            <div class="fr row justify-content-end">
              <ul class="nav nav-tabs justify-content-end">
                <li class="nav-item">
                  <a class="nav-link" style="cursor:pointer;" (click)="dirSet('shelfChange')"
                    [ngStyle]="{'background-color': sehlfChangeNavBtnColor}">העברת סחורה למדף אחר</a>
                </li>
                <li class="nav-item">
                  <a class="nav-link" style="cursor:pointer;" (click)="dirSet('')"
                    [ngStyle]="{'background-color': amountChangeNavBtnColor}">הוצאת/קבלת סחורה</a>
                </li>
              </ul>
            </div>

            <div class="fr row justify-content-end" *ngIf="amountChangeDir=='shelfChange'">
              <h5>העברת סחורה למדף אחר</h5>
              <div class="fr row justify-content-end">
                <button class="col-sm-1.5 ml-1 btn btn-success" (click)="updateItemStockShelfChange('shelfChange')">בצע
                  העברה</button>
                <input class="col-sm-2 ml-1" type="text" placeholder="מדף חדש" [(ngModel)]="destShelf" />
                <input class="col-sm-2 ml-1" type="number" placeholder="כמות" [(ngModel)]="newItemShelfQnt">
                <input class="col-sm-2 ml-1" type="text" placeholder="מדף נוכחי" [(ngModel)]="newItemShelfPosition" />
              </div>
            </div>
            <div class="fr row justify-content-end" *ngIf="amountChangeDir!='shelfChange'">
              <h5>הוצאת/קבלת סחורה</h5>
              <div class="fr row justify-content-end">
                <button class="col-sm-1.5 ml-1 btn btn-success" (click)="updateItemStock('in')">קבלת סחורה</button>
                <button class="col-sm-1.5 ml-1 btn btn-danger" (click)="updateItemStock('out')">הוצאת סחורה</button>
                <input *ngIf="stockType=='component'" class="col-sm-2 ml-1" type="text" placeholder="תעודת משלוח"
                  [(ngModel)]="relatedOrderNum" />
                <input class="col-sm-2 ml-1" type="text" placeholder="מדף" [(ngModel)]="newItemShelfPosition" />
                <input class="col-sm-2 ml-1" type="number" placeholder="כמות" [(ngModel)]="newItemShelfQnt">

                <select (change)="showBatchExpDate($event)" *ngIf="stockType=='product'" class="col-sm-2 ml-1"
                  type="text" placeholder="אצווה" [(ngModel)]="newItemShelfBatchNumber">
                  <option value="" selected>Batch</option>
                  <option *ngFor="let batch of ItemBatchArr" [value]="batch.batchNumber">{{batch.batchNumber}}</option>

                </select>


              </div>
              <div>
                <label>Exp Date: {{expirationBatchDate}}</label>
              </div>
            </div>
            <div class="fr row justify-content-end">
              <div class="col-sm-12">
                <label class="fr">הפריט נמצא על המדפים</label>&nbsp;<br>
              </div>
              <ng-container *ngFor="let itemShelf of currItemShelfs">
                <div class="col-sm-3" (click)="loadShelfToInput(itemShelf.position, $event)"
                  style="border: grey solid; border-style: outset; margin-left:5px; cursor:pointer; padding: 3px; ">
                  <span><u>{{itemShelf.position}}</u>: <b>{{itemShelf.amount}}</b> units </span>&nbsp;<br>
                  <span *ngIf="itemShelf.arrivalDate!='undefined' && itemShelf.itemType=='product' ">Batch:
                    {{itemShelf.batchNumber }}</span>&nbsp;<br>
  
                </div>
              </ng-container>

            </div>

          </div>
         

        </div>
    
      </div>

      <div class="modal-footer">

      </div>
   
    </div> -->