<nav ngbNav #nav="ngbNav" class="nav-tabs">
  <ng-container ngbNavItem>
    <a ngbNavLink>pH Meter: טופס כיול שבועי</a>
    <ng-template ngbNavContent>
      <div class="container bg-light rounded shadow-sm text-center p-2">
        <div class="row">
          <div class="col-12">
            <h1 style="text-shadow: 2px 2px 4px #000000" class="text-info">
              pH Meter: טופס כיול שבועי
            </h1>
          </div>
        </div>

        <div class="row p-2 text-center">
          <div class="col-3">
            <label>מד PH מספר: </label>
          </div>
          <div class="col-3">
            <label>שנה:</label>
          </div>
          <div class="col-3">
            <label>דגם המכשיר: </label>
          </div>
          <div class="col-3">
            <label>מיקום המכשיר:</label>
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-3">
            <select
              #calWeekPH
              list="phCalibList"
              class="form-control"
              [(ngModel)]="calibrationWeek.phNumber"
              (change)="fillFormFields($event)"
              id="phCalibList"
            >
              <option value="PH01">PH01</option>
              <option value="PH02">PH02</option>
              <option value="PH03">PH03</option>
              <option value="PH04">PH04</option>
              <option value="PH05">PH05</option>
            </select>
          </div>
          <div class="col-3">
            <input
              #calWeekYear
              class="form-control"
              [(ngModel)]="calibrationWeek.year"
              type="text"
            />
          </div>
          <div class="col-3">
            <input
              #calWeekToolModel
              class="form-control"
              [(ngModel)]="calibrationWeek.toolModel"
              type="text"
            />
          </div>
          <div class="col-3">
            <input
              #calWeektToolPlace
              class="form-control"
              [(ngModel)]="calibrationWeek.toolPlace"
              type="text"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12 text-center">
            <h5 class="text-danger">
              לאחר ביצוע הכיול ושעבר בהצלחה, יש לבצע אימות כיול במצב "מדידה"
              לבופר PH=7.00 ולרשום תוצאת מדידה
            </h5>
          </div>
        </div>

        <hr />

        <div class="row text-center p-2">
          <div class="col-3">
            <label>Date</label>
          </div>
          <div class="col-2">
            <label>PH 7</label>
          </div>
          <div class="col-2">
            <label>PH 4</label>
          </div>
          <div class="col-2">
            <label>PH 10</label>
          </div>
          <div class="col-1">
            <label>Normalcy</label>
          </div>
          <div class="col-2">
            <label>Signature</label>
          </div>
        </div>
        <div class="row text-center p-2">
          <div class="col-3">
            <input
              type="date"
              class="form-control"
              [(ngModel)]="calibrationWeek.date"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationWeek.phSeven"
              placeholder="PH=7  +-גבולות 0.2"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationWeek.phFour"
              placeholder="PH=4  +-גבולות 0.2"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationWeek.phTen"
              placeholder="PH=10  +-גבולות 0.2"
            />
          </div>
          <div class="col-1">
            <input
              type="checkbox"
              class="form-control"
              [(ngModel)]="calibrationWeek.normalcy"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationWeek.signature"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <button (click)="saveTest()" class="form-control btn btn-info">
              Add Test
            </button>
          </div>
        </div>

        <div class="row text-center">
          <div class="col-3"></div>
          <div class="col-3">
            <labal class="form-control"><b>To</b></labal>
            <input
              (change)="filterByDate('calibrationWeek')"
              type="date"
              class="form-control"
              #toDate
            />
          </div>
          <div class="col-3">
            <label class="form-control">From</label>
            <input type="date" class="form-control" #fromDate />
          </div>
          <div class="col-3">
            <img
              src="../../../../assets/images/excel.png"
              alt="export to excel"
              style="width: 40px"
              (click)="exportAsXLSX('calibrationWeek')"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <table class="table table-hover table-striped">
              <thead class="bg-info text-white">
                <tr style="box-shadow: inset 0px 0px 4px 1px black">
                  <th>תאריך</th>
                  <th>PH 4</th>
                  <th>PH 7</th>
                  <th>PH 10</th>
                  <th>תקינות</th>
                  <th>חתימה</th>
                  <th>הערות</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  *ngFor="let calibWeek of calibrationWeekTests"
                >
                  <td>{{ calibWeek.date | date: "dd/MM/yyyy" }}</td>
                  <td>{{ calibWeek.phFour }}</td>
                  <td>{{ calibWeek.phSeven }}</td>
                  <td>{{ calibWeek.phTen }}</td>
                  <td>{{ calibWeek.normalcy }}</td>
                  <td>{{ calibWeek.signature }}</td>
                  <td
                    *ngIf="calibWeek._id !== EditRowId"
                    style="width: 300px"
                    (click)="edit(calibWeek._id)"
                  >
                    {{ calibWeek.remarks }}
                  </td>
                  <td
                    *ngIf="calibWeek._id === EditRowId"
                    style="width: 300px"
                    (click)="edit(calibWeek._id)"
                  >
                    <input [(ngModel)]="calibWeekRemarks" type="text" />
                  </td>
                  <td *ngIf="calibWeek._id === EditRowId">
                    <button
                      class="btn btn-info"
                      (click)="updateCalibWeekTest(calibWeek._id)"
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <ng-container ngbNavItem>
    <a ngbNavLink>טופס אימות כיול מאזניים</a>
    <ng-template ngbNavContent>
      <div dir="rtl" class="container bg-light rounded shadow-sm">
        <div class="row text-center">
          <div class="col-12">
            <h1 style="text-shadow: 2px 2px 4px #000000" class="text-info">
              טופס אימות כיול מאזניים
            </h1>
          </div>
        </div>

        <div class="row">
          <div class="col-1">
            <button
              (click)="clearLibraFields()"
              class="form-control btn btn-info"
            >
              Clear
            </button>
          </div>
          <div class="col-2">
            <label class="form-control">מאזניים מספר:</label>

            <label class="form-control">דגם המאזניים:</label>
            <label class="form-control">שם היצרן:</label>
            <label class="form-control"> כושר שקילה</label>
            <label class="form-control"> משקולת 1 (גרם)</label>
            <label class="form-control"> גבולות מ.1:(גרם)</label>
          </div>
          <div class="col-3">
            <div>
              <input
                #libra
                list="libraList"
                [(ngModel)]="clearLibra"
                class="form-control"
                (change)="getLibraByNumber($event)"
              />
              <datalist id="libraList">
                <option
                  *ngFor="let libra of allLibraList"
                  [value]="libra.balanceSerialNum"
                >
                  {{ libra.balanceSerialNum }}
                </option>
              </datalist>
            </div>

            <div>
              <input
                #libraModel
                class="form-control"
                [(ngModel)]="libraCalibration.libraModel"
                type="text"
              />
            </div>
            <div>
              <input
                #libraManuName
                class="form-control"
                [(ngModel)]="libraCalibration.manufacturerName"
                type="text"
              />
            </div>
            <div>
              <input
                #libraMinCarryCap
                class="form-control"
                [(ngModel)]="libraCalibration.minCarryCapacity"
                type="text"
              />
            </div>
            <div>
              <input
                #libraWeightOne
                class="form-control"
                [(ngModel)]="libraCalibration.weightNumOne"
                type="text"
              />
            </div>
            <div>
              <input
                #libraLimitsOne
                class="form-control"
                [(ngModel)]="libraCalibration.limitsWeightOne"
                type="text"
              />
            </div>
          </div>
          <div class="col-2">
            <label class="form-control">מועד כיול אחרון:</label>
            <label class="form-control">מועד כיול הבא:</label>
            <label class="form-control">משקולת 2:(גרם)</label>
            <label class="form-control"> גבולות מ.2:(גרם)</label>
            <label class="form-control">שם חברה מכיילת:</label>
            <label class="form-control">מיקום המאנזיים:</label>
          </div>
          <div class="col-3">
            <input
              #libraLastCalibDate
              class="form-control"
              [(ngModel)]="libraCalibration.lastCalibDate"
              type="text"
            />
            <input
              #libraFutureCalibDate
              class="form-control"
              [(ngModel)]="libraCalibration.nextCalibDate"
              type="text"
            />
            <input
              #libraWeightTwo
              class="form-control"
              [(ngModel)]="libraCalibration.weightNumTwo"
              type="text"
            />
            <input
              #libraLimitsTwo
              class="form-control"
              [(ngModel)]="libraCalibration.limitsWeightTwo"
              type="text"
            />
            <input
              #libraCalibCompany
              class="form-control"
              [(ngModel)]="libraCalibration.calibCompany"
              type="text"
            />
            <input
              #libraLocation
              class="form-control"
              [(ngModel)]="libraCalibration.libraLocation"
              type="text"
            />
          </div>
          <div class="col-1">
            <button (click)="addNewLibra()" class="form-control btn btn-info">
              Add Libra
            </button>
            <button (click)="saveLibra()" class="form-control btn btn-info">
              Save Libra
            </button>
          </div>
        </div>
        <div class="row mt-2">
          <div class="col-12">
            <input
              #libraRemarks
              type="text"
              placeholder="הערות"
              class="form-control"
              [(ngModel)]="libraCalibration.remarks"
            />
          </div>
        </div>
        <hr />

        <div class="row text-center p-2">
          <div class="col-3">
            <input
              class="form-control"
              [(ngModel)]="libraCalibrationDetails.date"
              style="margin: 2px"
              type="date"
              placeholder="תאריך"
            />
          </div>
          <div class="col-2">
            <input
              class="form-control"
              [(ngModel)]="libraCalibrationDetails.resultWeightOne"
              style="margin: 2px"
              type="text"
              placeholder="משקולת 1 - תוצאה"
            />
          </div>
          <div class="col-2">
            <input
              class="form-control"
              [(ngModel)]="libraCalibrationDetails.resultWeightTwo"
              style="margin: 2px"
              type="text"
              placeholder="משקולת 2 - תוצאה"
            />
          </div>
          <div class="col-2">
            <label class="form-control">תקינות:</label>
          </div>
          <div class="col-1">
            <input
              class="form-control"
              [(ngModel)]="libraCalibrationDetails.normalcy"
              style="margin: 2px"
              type="checkbox"
            />
          </div>
          <div class="col-2">
            <input
              class="form-control"
              [(ngModel)]="libraCalibrationDetails.signature"
              style="margin: 2px"
              type="text"
              placeholder="חתימה"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <button
              class="btn btn-info form-control"
              (click)="addNewLibraCalibrationTest()"
            >
              הוסף בדיקה
            </button>
          </div>
        </div>

        <hr />

        <div class="row text-center">
          <div class="col-2"></div>
          <div class="col-1">
            <button
              (click)="getAllLibraCalibTests()"
              style="height: 70px"
              class="btn btn-info form-control"
            >
              All Tests
            </button>
          </div>
          <div class="col-3">
            <labal class="form-control"><b>To</b></labal>
            <input
              (change)="filterByDate('libraCalibration')"
              type="date"
              class="form-control"
              #toDate
            />
          </div>
          <div class="col-3">
            <label class="form-control">From</label>
            <input type="date" class="form-control" #fromDate />
          </div>
          <div class="col-3">
            <img
              src="../../../../assets/images/excel.png"
              alt="export to excel"
              style="width: 40px"
              (click)="exportAsXLSX('libraCalibration')"
            />
          </div>
        </div>

        <div class="row mt-4">
          <div class="col-12">
            <table class="table table-hover table-striped">
              <thead class="bg-info text-white">
                <tr style="box-shadow: inset 0px 0px 4px 1px black">
                  <th>תאריך</th>
                  <th>משקולת 1 - תוצאה</th>
                  <th>משקולת 2 - תוצאה</th>
                  <th>תקינות</th>
                  <th>חתימה</th>
                  <th>הערות</th>
                </tr>
              </thead>

              <tbody>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  *ngFor="let test of libraCalibrationTests"
                >
                  <td>{{ test.date | date: "dd/MM/yyyy" }}</td>
                  <td>{{ test.resultWeightOne }}</td>
                  <td>{{ test.resultWeightTwo }}</td>
                  <td>{{ test.normalcy }}</td>
                  <td>{{ test.signature }}</td>
                  <td
                    *ngIf="test._id !== EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    {{ test.remarks }}
                  </td>
                  <td
                    *ngIf="test._id === EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    <input [(ngModel)]="calibrationTestRemarks" type="text" />
                  </td>
                  <td *ngIf="test._id === EditRowId">
                    <button
                      class="btn btn-info"
                      (click)="updateCalibTest(test._id)"
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <ng-container ngbNavItem>
    <a ngbNavLink>טופס בדיקת מים מטופלים RO - מערכת ישנה</a>
    <ng-template ngbNavContent>
      <div class="container p-2 rounded shadow-sm bg-light">
        <div class="row p-2 text-center">
          <div class="col-12">
            <h1 style="text-shadow: 2px 2px 4px #000000" class="text-info">
              טופס בדיקת מים מטופלים RO - מערכת ישנה
            </h1>
          </div>
        </div>

        <div class="row p-2">
          <div class="col-1"></div>
          <div class="col-2">
            <label class="form-control">תאריך</label>
            <label class="form-control">בדיקת TDS</label>
            <label class="form-control">בדיקת PH</label>
            <label class="form-control">הימצאות מלח במיכל</label>
          </div>
          <div class="col-3">
            <input
              class="form-control"
              [(ngModel)]="waterTest.date"
              type="date"
            />
            <input
              class="form-control"
              [(ngModel)]="waterTest.tdsCheck"
              type="text"
            />
            <input
              class="form-control"
              [(ngModel)]="waterTest.phCheck"
              type="text"
            />
            <select class="form-control" [(ngModel)]="waterTest.saltInTank">
              <option value="exist">קיים</option>
              <option value="notExist">לא קיים</option>
            </select>
          </div>
          <div class="col-2">
            <label class="form-control">בדיקת צלילות וצבע</label>
            <label class="form-control">בדיקת קשיות</label>
            <label class="form-control">חתימה</label>
          </div>
          <div class="col-3">
            <select class="form-control" [(ngModel)]="waterTest.clearAndColor">
              <option value="ok">תקין</option>
              <option value="notOk">לא תקין</option>
            </select>
            <input
              class="form-control"
              [(ngModel)]="waterTest.hardness"
              type="text"
            />
            <input
              class="form-control"
              [(ngModel)]="waterTest.signature"
              type="text"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <button
              (click)="addOldWaterTest()"
              class="btn btn-info form-control"
            >
              הוסף בדיקה
            </button>
          </div>
        </div>

        <hr />

        <div class="row text-center">
          <div class="col-3"></div>

          <div class="col-3">
            <labal class="form-control"><b>To</b></labal>
            <input
              (change)="filterByDate('oldSystemWater')"
              type="date"
              class="form-control"
              #toDate
            />
          </div>
          <div class="col-3">
            <label class="form-control">From</label>
            <input type="date" class="form-control" #fromDate />
          </div>
          <div class="col-3">
            <img
              src="../../../../assets/images/excel.png"
              alt="export to excel"
              style="width: 40px"
              (click)="exportAsXLSX('oldWaterSystem')"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <table dir="rtl" class="table table-striped table-hover">
              <thead class="bg-info text-white">
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  class="border border-white"
                >
                  <th style="font-weight: bold; border-bottom: none"></th>
                  <th style="font-weight: bold">בדיקת TDS במערכת-ייצור</th>
                  <th style="font-weight: bold">בדיקת המצאות מלח במיכל</th>
                  <th style="font-weight: bold">בדיקת צלילות וצבע</th>
                  <th style="font-weight: bold">בדיקת קשיות (אחת לשבוע)</th>
                  <th style="font-weight: bold">בדיקת PH</th>
                  <th style="font-weight: bold; border-bottom: none"></th>
                  <th style="font-weight: bold; border-bottom: none"></th>
                  <th></th>
                </tr>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  class="border border-white"
                >
                  <th style="border-top: none; border-bottom: none">תאריך</th>
                  <th>PPM/inch<sup>3</sup></th>
                  <th>(ויזואלי)</th>
                  <th>(ויזואלי)</th>
                  <th>Mol/m<sup>3</sup></th>
                  <th></th>
                  <th style="border-top: none; border-bottom: none">חתימה</th>
                  <th style="border-top: none; border-bottom: none">הערות</th>
                  <th></th>
                </tr>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  class="border border-white"
                >
                  <th style="border-top: none"></th>
                  <th>50></th>
                  <th>קיים</th>
                  <th>Clear,Colorless</th>
                  <th>0.7></th>
                  <th>6.0-8.0</th>
                  <th style="border-top: none"></th>
                  <th style="border-top: none"></th>
                  <th></th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let test of oldSystemWater">
                  <td>{{ test.date | date: "dd/MM/yyyy" }}</td>
                  <td>{{ test.tdsCheck }}</td>
                  <td>{{ test.saltInTank }}</td>
                  <td>{{ test.clearAndColor }}</td>
                  <td>{{ test.hardness }}</td>
                  <td>{{ test.pressureTest }}</td>
                  <td>{{ test.phCheck }}</td>
                  <td>{{ test.signature }}</td>
                  <td
                    *ngIf="test._id !== EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    {{ test.remarks }}
                  </td>
                  <td
                    *ngIf="test._id === EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    <input [(ngModel)]="waterTestRemarks" type="text" />
                  </td>
                  <td *ngIf="test._id === EditRowId">
                    <button
                      class="btn btn-info"
                      (click)="updateWaterTest(test._id)"
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <ng-container ngbNavItem>
    <a ngbNavLink>טופס בדיקת מים מטופלים RO - מערכת חדשה</a>
    <ng-template ngbNavContent>
      <div class="container p-2 rounded shadow-sm bg-light">
        <div class="row p-2 text-center">
          <div class="col-12">
            <h1 style="text-shadow: 2px 2px 4px #000000" class="text-info">
              טופס בדיקת מים מטופלים RO - מערכת חדשה
            </h1>
          </div>
        </div>

        <div class="row p-2">
          <div class="col-1"></div>
          <div class="col-2">
            <label class="form-control">תאריך</label>
            <label class="form-control">בדיקת TDS</label>
            <label class="form-control">בדיקת PH</label>
            <label class="form-control">הימצאות מלח במיכל</label>
          </div>
          <div class="col-3">
            <input
              class="form-control"
              [(ngModel)]="waterTest.date"
              type="date"
            />
            <input
              class="form-control"
              [(ngModel)]="waterTest.tdsCheck"
              type="text"
            />
            <input
              class="form-control"
              [(ngModel)]="waterTest.phCheck"
              type="text"
            />
            <select class="form-control" [(ngModel)]="waterTest.saltInTank">
              <option value="exist">קיים</option>
              <option value="notExist">לא קיים</option>
            </select>
          </div>
          <div class="col-2">
            <label class="form-control">בדיקת צלילות וצבע</label>
            <label class="form-control">בדיקת קשיות</label>
            <label class="form-control">בדיקת מוליכות</label>
            <label class="form-control">חתימה</label>
          </div>
          <div class="col-3">
            <select class="form-control" [(ngModel)]="waterTest.clearAndColor">
              <option value="ok">תקין</option>
              <option value="notOk">לא תקין</option>
            </select>
            <input
              class="form-control"
              [(ngModel)]="waterTest.hardness"
              type="text"
            />
            <input
              class="form-control"
              [(ngModel)]="waterTest.pressureTest"
              type="text"
            />
            <input
              class="form-control"
              [(ngModel)]="waterTest.signature"
              type="text"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <button
              (click)="addNewWaterTest()"
              class="btn btn-info form-control"
            >
              הוסף בדיקה
            </button>
          </div>
        </div>
        <hr />

        <div class="row text-center">
          <div class="col-3"></div>

          <div class="col-3">
            <labal class="form-control"><b>To</b></labal>
            <input
              (change)="filterByDate('newSystemWater')"
              type="date"
              class="form-control"
              #toDate
            />
          </div>
          <div class="col-3">
            <label class="form-control">From</label>
            <input type="date" class="form-control" #fromDate />
          </div>
          <div class="col-3">
            <img
              src="../../../../assets/images/excel.png"
              alt="export to excel"
              style="width: 40px"
              (click)="exportAsXLSX('newWaterSystem')"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <table dir="rtl" class="table table-striped table-hover">
              <thead
                style="box-shadow: inset 0px 0px 4px 1px black"
                class="bg-info text-white"
              >
                <tr class="border border-white">
                  <th style="font-weight: bold; border-bottom: none"></th>
                  <th style="font-weight: bold">בדיקת TDS במערכת-ייצור</th>
                  <th style="font-weight: bold">בדיקת המצאות מלח במיכל</th>
                  <th style="font-weight: bold">בדיקת צלילות וצבע</th>
                  <th style="font-weight: bold">בדיקת קשיות (אחת לשבוע)</th>
                  <th style="font-weight: bold">בדיקת מוליכות</th>
                  <th style="font-weight: bold">בדיקת PH</th>
                  <th style="font-weight: bold; border-bottom: none"></th>
                  <th style="font-weight: bold; border-bottom: none"></th>
                </tr>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  class="border border-white"
                >
                  <th style="border-top: none; border-bottom: none">תאריך</th>
                  <th>PPM/inch<sup>3</sup></th>
                  <th>(ויזואלי)</th>
                  <th>(ויזואלי)</th>
                  <th>Mol/m<sup>3</sup></th>
                  <th>MΩ*CM</th>
                  <th></th>
                  <th style="border-top: none; border-bottom: none">חתימה</th>
                  <th style="border-top: none; border-bottom: none">הערות</th>
                </tr>
                <tr class="border border-white">
                  <th style="border-top: none"></th>
                  <th>50></th>
                  <th>קיים</th>
                  <th>Clear,Colorless</th>
                  <th>0.7></th>
                  <th>50></th>
                  <th>6.0-8.0</th>
                  <th style="border-top: none"></th>
                  <th style="border-top: none"></th>
                </tr>
              </thead>

              <tbody>
                <tr *ngFor="let test of newSystemWater">
                  <td>{{ test.date | date: "dd/MM/yyyy" }}</td>
                  <td>{{ test.tdsCheck }}</td>
                  <td>{{ test.saltInTank }}</td>
                  <td>{{ test.clearAndColor }}</td>
                  <td>{{ test.hardness }}</td>
                  <td>{{ test.pressureTest }}</td>
                  <td>{{ test.phCheck }}</td>
                  <td>{{ test.signature }}</td>
                  <td
                    *ngIf="test._id !== EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    {{ test.remarks }}
                  </td>
                  <td
                    *ngIf="test._id === EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    <input [(ngModel)]="waterTestRemarks" type="text" />
                  </td>
                  <td *ngIf="test._id === EditRowId">
                    <button
                      class="btn btn-info"
                      (click)="updateWaterTest(test._id)"
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <ng-container ngbNavItem>
    <a ngbNavLink>טופס בקרת טמפרטורה</a>
    <ng-template ngbNavContent>
      <div class="container bg-light rounded shadow-sm">
        <div class="row text-center p-2">
          <div class="col-12">
            <h1 style="text-shadow: 2px 2px 4px #000000" class="text-info">
              טופס בקרת טמפרטורה
            </h1>
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <label class="text-danger">גבולות נדרשים: רגעי: 15°C-30°C </label>
          </div>
        </div>
        <div class="row text-center p-2">
          <div class="col-3">
            <label class="form-control">תאריך</label>
            <label class="form-control">מד טמפ' מח' מילוי</label>
            <label class="form-control">מחסן מלאי</label>
          </div>
          <div class="col-3">
            <input
              class="form-control"
              type="date"
              [(ngModel)]="temperatureTest.date"
            />
            <input
              class="form-control"
              type="text"
              [(ngModel)]="temperatureTest.fillingDepartTemp"
            />
            <input
              class="form-control"
              type="text"
              [(ngModel)]="temperatureTest.packingDepartTemp"
            />
          </div>
          <div class="col-3">
            <label class="form-control">מד טמפ' מחסן חוג</label>
            <label class="form-control">מינימום מח' ייצור</label>
            <label class="form-control">מקסימום מח' ייצור</label>
          </div>
          <div class="col-3">
            <input
              class="form-control"
              type="text"
              [(ngModel)]="temperatureTest.materialStorageTemp"
            />
            <input
              class="form-control"
              type="text"
              [(ngModel)]="temperatureTest.minWeekProduction"
            />
            <input
              class="form-control"
              type="text"
              [(ngModel)]="temperatureTest.maxWeekProduction"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-6">
            <input
              class="form-control"
              type="text"
              [(ngModel)]="temperatureTest.signature"
              placeholder="חתימה"
            />
          </div>
          <div class="col-6">
            <button
              class="btn btn-info form-control"
              (click)="addNewTempTest()"
            >
              הוסף בדיקה
            </button>
          </div>
        </div>
        <hr />

        <div class="row text-center">
          <div class="col-3"></div>

          <div class="col-3">
            <labal class="form-control"><b>To</b></labal>
            <input
              (change)="filterByDate('temperatureTest')"
              type="date"
              class="form-control"
              #toDate
            />
          </div>
          <div class="col-3">
            <label class="form-control">From</label>
            <input type="date" class="form-control" #fromDate />
          </div>
          <div class="col-3">
            <img
              src="../../../../assets/images/excel.png"
              alt="export to excel"
              style="width: 40px"
              (click)="exportAsXLSX('temperatureTest')"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <table class="table table-striped table-hover">
              <thead
                style="box-shadow: inset 0px 0px 4px 1px black"
                class="bg-info text-white"
              >
                <tr>
                  <th>תאריך</th>
                  <th>מד טמפ' מח' מילוי</th>
                  <th>מחסן מלאי</th>
                  <th>מד טמפ' מחסן חו"ג</th>
                  <th>מינימום מח' ייצור</th>
                  <th>מקסימום מח' ייצור</th>
                  <th>חתימה</th>
                  <th>הערות</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  *ngFor="let test of allTempTests"
                >
                  <td>{{ test.date | date: "dd/MM/yyyy" }}</td>
                  <td>{{ test.fillingDepartTemp }}</td>
                  <td>{{ test.packingDepartTemp }}</td>
                  <td>{{ test.materialStorageTemp }}</td>
                  <td>{{ test.minWeekProduction }}</td>
                  <td>{{ test.maxWeekProduction }}</td>
                  <td>{{ test.signature }}</td>
                  <td
                    *ngIf="test._id !== EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    {{ test.remarks }}
                  </td>
                  <td
                    *ngIf="test._id === EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    <input [(ngModel)]="tempTestRemarks" type="text" />
                  </td>
                  <td *ngIf="test._id === EditRowId">
                    <button
                      class="btn btn-info"
                      (click)="updateTempTest(test._id)"
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <ng-container ngbNavItem>
    <a ngbNavLink>טופס אימות כיול PH מטר</a>
    <ng-template ngbNavContent>
      <div class="container bg-light rounded shadow-sm">
        <div class="row text-center p-2">
          <div class="col-12">
            <h1 style="text-shadow: 2px 2px 4px #000000" class="text-info">
              טופס אימות כיול PH מטר
            </h1>
          </div>
        </div>

        <div class="row">
          <div class="col-1"></div>
          <div class="col-2">
            <label class="form-control">מד PH מספר:</label>
            <label class="form-control">דגם המכשיר:</label>
          </div>
          <div class="col-3">
            <select
              class="form-control"
              (change)="fillCalibDayDetails($event)"
              [(ngModel)]="calibrationDayTest.phNumber"
            >
              <option value="PH01">PH01</option>
              <option value="PH02">PH02</option>
              <option value="PH03">PH03</option>
              <option value="PH04">PH04</option>
              <option value="PH05">PH05</option>
            </select>
            <input
              class="form-control"
              [(ngModel)]="calibrationDayTest.deviceModel"
              type="text"
            />
          </div>
          <div class="col-2">
            <label class="form-control">מיקום המכשיר:</label>
            <label class="form-control">שנה:</label>
          </div>
          <div class="col-3">
            <input
              class="form-control"
              [(ngModel)]="calibrationDayTest.deviceLocation"
              type="text"
            />
            <input
              class="form-control"
              [(ngModel)]="calibrationDayTest.year"
              type="text"
            />
          </div>
          <div class="col-1"></div>
        </div>

        <div class="row text-center p-2">
          <div class="col-3">
            <label>תאריך</label>
          </div>
          <div class="col-2">
            <label>PH Seven</label>
          </div>
          <div class="col-2">
            <label>PH Four</label>
          </div>
          <div class="col-2">
            <label>PH Ten</label>
          </div>
          <div class="col-1">
            <label>תקינות</label>
          </div>
          <div class="col-2">
            <label>חתימה</label>
          </div>
        </div>
        <div class="row text-center p-2">
          <div class="col-3">
            <input
              type="date"
              class="form-control"
              [(ngModel)]="calibrationDayTest.date"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationDayTest.phSeven"
              placeholder="PH=7 +-גבולות 0.2"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationDayTest.phFour"
              placeholder="PH=4  +-גבולות 0.2"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationDayTest.phTen"
              placeholder="PH=10  +-גבולות 0.2"
            />
          </div>
          <div class="col-1">
            <input
              type="checkbox"
              class="form-control"
              [(ngModel)]="calibrationDayTest.normalcy"
            />
          </div>
          <div class="col-2">
            <input
              type="text"
              class="form-control"
              [(ngModel)]="calibrationDayTest.signature"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <button
              class="btn btn-info form-control"
              (click)="addNewCalibDayTest()"
            >
              הוסף בדיקה
            </button>
          </div>
        </div>
        <hr />

        <div class="row text-center">
          <div class="col-3"></div>

          <div class="col-3">
            <labal class="form-control"><b>To</b></labal>
            <input
              (change)="filterByDate('calibrationDayTest')"
              type="date"
              class="form-control"
              #toDate
            />
          </div>
          <div class="col-3">
            <label class="form-control">From</label>
            <input type="date" class="form-control" #fromDate />
          </div>
          <div class="col-3">
            <img
              src="../../../../assets/images/excel.png"
              alt="export to excel"
              style="width: 40px"
              (click)="exportAsXLSX('calibrationDayTest')"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <table class="table table-hover table-striped">
              <thead
                style="box-shadow: inset 0px 0px 4px 1px black"
                class="bg-info text-white"
              >
                <tr>
                  <th>תאריך</th>
                  <th>PH 4</th>
                  <th>PH 7</th>
                  <th>PH 10</th>
                  <th>תקינות</th>
                  <th>חתימה</th>
                  <th>הערות</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  *ngFor="let test of allCalibrationDayTests"
                >
                  <td>{{ test.date | date: "dd/MM/yyyy" }}</td>
                  <td>{{ test.phFour }}</td>
                  <td>{{ test.phSeven }}</td>
                  <td>{{ test.phTen }}</td>
                  <td>{{ test.normalcy }}</td>
                  <td>{{ test.signature }}</td>
                  <td
                    *ngIf="test._id !== EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    {{ test.remarks }}
                  </td>
                  <td
                    *ngIf="test._id === EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    <input [(ngModel)]="calibDayRemarks" type="text" />
                  </td>
                  <td *ngIf="test._id === EditRowId">
                    <button
                      class="btn btn-info form-control"
                      (click)="updateCalibDayTest(test._id)"
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>

  <ng-container ngbNavItem>
    <a ngbNavLink>מעקב בדיקת PH למי ביוב</a>
    <ng-template ngbNavContent>
      <div class="container bg-light rounded shadow-sm">
        <div class="row text-center p-2">
          <div class="col-12">
            <h1 style="text-shadow: 2px 2px 4px #000000" class="text-info">
              מעקב בדיקת PH למי ביוב
            </h1>
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <label class="text text-danger">limits pH=6.0-7.5</label>
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-4">
            <label class="form-control">תאריך</label>
          </div>
          <div class="col-4">
            <label class="form-control">PH</label>
          </div>
          <div class="col-4">
            <label class="form-control">חתימה</label>
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-4">
            <input
              class="form-control"
              type="date"
              [(ngModel)]="sewerPhTest.date"
            />
          </div>
          <div class="col-4">
            <input
              class="form-control"
              type="text"
              [(ngModel)]="sewerPhTest.pH"
            />
          </div>
          <div class="col-4">
            <input
              class="form-control"
              type="text"
              [(ngModel)]="sewerPhTest.signature"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <button
              class="btn btn-info form-control"
              (click)="addNewSewerPHTest()"
            >
              הוסף בדיקה
            </button>
          </div>
        </div>

        <hr />

        <div class="row text-center">
          <div class="col-3"></div>

          <div class="col-3">
            <labal class="form-control"><b>To</b></labal>
            <input
              (change)="filterByDate('sewerPhTest')"
              type="date"
              class="form-control"
              #toDate
            />
          </div>
          <div class="col-3">
            <label class="form-control">From</label>
            <input type="date" class="form-control" #fromDate />
          </div>
          <div class="col-3">
            <img
              src="../../../../assets/images/excel.png"
              alt="export to excel"
              style="width: 40px"
              (click)="exportAsXLSX('sewerPhTest')"
            />
          </div>
        </div>

        <div class="row text-center p-2">
          <div class="col-12">
            <table class="table table-striped table-hover">
              <thead
                style="box-shadow: inset 0px 0px 4px 1px black"
                class="bg-info text-white"
              >
                <tr>
                  <th>תאריך</th>
                  <th>PH</th>
                  <th>חתימה</th>
                  <th>הערות</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  style="box-shadow: inset 0px 0px 4px 1px black"
                  *ngFor="let test of allSewerPHTests"
                >
                  <td>{{ test.date | date: "dd/MM/yyyy" }}</td>
                  <td>{{ test.pH }}</td>
                  <td>{{ test.signature }}</td>
                  <td
                    *ngIf="test._id !== EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    {{ test.remarks }}
                  </td>
                  <td
                    *ngIf="test._id === EditRowId"
                    style="width: 300px"
                    (click)="edit(test._id)"
                  >
                    <input [(ngModel)]="sewerTestRemarks" type="text" />
                  </td>
                  <td *ngIf="test._id === EditRowId">
                    <button
                      class="form-control btn btn-info"
                      (click)="updateSewerTest(test._id)"
                    >
                      Save
                    </button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </ng-template>
  </ng-container>
</nav>

<div [ngbNavOutlet]="nav" class="mt-2"></div>
