


<nav ngbNav #nav="ngbNav" class="nav-tabs">
    <ng-container ngbNavItem>
      <a ngbNavLink>Purchase Orders</a>
      <ng-template ngbNavContent>
        <div class="container-fluid bg-white text-center">
            <div class="row">
              <div class="col-4"></div>
              <div class="col-4 border border-primary rounded-pill">
                <h3 class="p-2 text-primary">Purchase Orders</h3>
              </div>
              <div class="col-4"></div>
            </div>
            <div class="row mt-4">
              <div class="col-3">
                <button (click)="orderDetailsModal = true" class="btn btn-warning rounded-pill">New Purchase - F2</button>
              </div>
              <div class="col-2"></div>
              <div class="col-2"></div>
              <div class="col-2"></div>
              <div class="col-3">
                <button (click)="purchaseRecommendationsModal = true" class="btn btn-warning rounded-pill">Recommendations - F4</button>
              </div>
            </div>
    
    
            <div class="row mt-4">
              <div class="col-3"><input type="text " class="form-control rounded-pill" placeholder="Search By Order Number"
                  (change)="searchNumber($event)" /></div>
              <div class="col-3">
                <input type="text" class="form-control rounded-pill" list="suppliers" placeholder="Search By Supplier Name"
                  (change)="searchBySupplier($event)" />
                <datalist id="suppliers">
                  <option *ngFor="let supplier of allSuppliers" value="{{supplier.suplierName}}">{{supplier.suplierNumber}}
                  </option>
                </datalist>
              </div>
              <div class="col-3"><input type="text" class="form-control rounded-pill" placeholder="Search By Item Number"
                  (change)="searchByItem($event)" /></div>
              <div class="col-3"><input type="text" class="form-control rounded-pill" placeholder="Search By Reference Number"
                  (change)="searchByReference($event)" /></div>
            </div>
    
            <div class="row mt-4">
              <div class="col-3"></div>
              <div class="col-3"></div>
              <div class="col-3"></div>
              <div class="col-3"></div>
            </div>
    
    
            <div class="row mt-4">
              <div class="col-2">
                חפש לפי סטטוס <select (change)="filterByStatus($event,'purchases')" class="form-control rounded-pill">
                  <option selected="true" disabled="disabled">בחר סטטוס</option>
                  <option value="allOrders">כל ההזמנות</option>
                  <option value="ongoing">בטיפול</option>
                  <option value="closed">הזמנות סגורות</option>
                  <option value="material">חומרי גלם</option>
                  <option value="component">קומפוננטים</option>
                </select>
              </div>
              <div class="col-2">
                חפש לפי קטגוריה <select (change)="filterByCategory($event,'category')" class="form-control rounded-pill">
                  <option selected="true" disabled="disabled">בחר קטגוריה</option>
                  <option value='bottle_Glass'>בקבוק זכוכית</option>
                  <option value='bottle_Plastic'>בקבוק פלסטיק</option>
                  <option value='jar_Glass'>צנצנת זכוכית</option>
                  <option value='jar_Plastic'>צנצנת פלסטיק</option>
                  <option value='cap'>פקק</option>
                  <option value='cover'>מכסה</option>
                  <option value='pump'>משאבה</option>
                  <option value='cosmetic_pump'>משאבה קוסמטית</option>
                  <option value='over_cap'>מכסה עילי</option>
                  <option value='tube'>שפורפרת</option>
                  <option value='colons'>קולונים</option>
                  <option value='hair_life'>היירלייפ</option>
                  <option value='compacts'>קומפקטים</option>
                  <option value='personal_package'>אריזות אישיות</option>
                  <option value='master_carton'>קרטוני מאסטר</option>
                  <option value='newsletter'>עלון לצרכן</option>
                  <option value='irosol_valve'>אירוסול- שסתום</option>
                  <option value='irosol_bottle'>איירוסול- בקבוק</option>
                  <option value='irosol_hectotor'>אירוסול- הקטאטור</option>
                  <option value='irosol_bottle'>איירוסול- בקבוק</option>
                  <option value='cellophane'>צלופן</option>
                  <option value='sticker'>מדבקה</option>
                  <option value='sachet'>סאשט</option>
                </select>
              </div>
              <div class="col-1">
                טען את כל הפריטים
                <button (click)="loadPurchasesItems()" class="btn btn-primary form-control">Load Items</button>
              </div>
    
              <div class="col-2">
                <img src="../../../../assets/images/excel.png" alt="export to excel" style="width: 40px;"
                  (click)="exportAsXLSX('purchaseData')">
                <button [printStyle]="{td : {'border': '1px solid black'}, tr : {'border': 'solid 1px black'}}"
                  style="background: none;border:none" printSectionId="print-section" ngxPrint><img
                    src="../../../../assets/images/print.png" alt="Print" style="width: 55px;"></button>
              </div>
              <div class="col-3"></div>
              <div class="col-1">
                From: <input class="form-control rounded-pill" (change)="dateChange()" #fromDateStr type="date">
              </div>
              <div class="col-1">
                To: <input class="form-control rounded-pill" (change)="dateChange()" #toDateStr type="date">
              </div>
            </div>
    
            
    
            <div id="print-section" class="row">
              <div class="col-12">
                <table class="table table-hover text-center">
                  <thead style="box-shadow: inset 0x 0x 4px 1px black !important" class="bg-primary text-white">
                    <tr>
                      <th><b>#</b></th>
                      <th><b>Purchase Number</b></th>
                      <th><b>Supplier Name</b></th>
                      <th><b>Supplier Number</b></th>
                      <th><b>Creation Date</b></th>
                      <th><b>Arrival Date</b></th>
                      <th><b>Remarks</b></th>
                      <th><b>Status</b></th>
                      <th></th>
                      <th>User</th>
                    </tr>
                  </thead>
                  <tbody id="table_body">
                    <tr style="margin-top: 1px;box-shadow: inset 0x 0x 4px 1px black !important"
                      *ngFor="let line of procurementData; let i = index" [style.background-color]="line.color"
                      >
                      <td>{{i+1}}</td>
                      <td class="click"  (click)="viewOrderDetails(i)" style="cursor: pointer;" ><span
                          style="color:blue;">{{line.orderNumber}}</span>
                      </td>
                      <td>{{ line.supplierName }}</td>
                      <td>{{ line.supplierNumber }}</td>
                      <td>{{ line.creationDate | date: 'dd/MM/yyyy' }}</td>
                      <td *ngIf="EditRowId != line.orderNumber">
                        {{ line.arrivalDate | date: 'dd/MM/yyyy' }}</td>
                      <td *ngIf="EditRowId == line.orderNumber">
                        <input (change)="updateArrivalDate($event,line.orderNumber)" type="date" class="form-control">
                      </td>
                      <td *ngIf="EditRowId != line.orderNumber">{{line.remarks}}
                      </td>
                      <td *ngIf="EditRowId == line.orderNumber">
                        <textarea [value]="line.remarks" #purchaseRemarks></textarea>
                      </td>
                      <!-- <td><i (click)="orderSentToClient(line.orderNumber)" class="fa fa-paper-plane" aria-hidden="true"></i></td>
                    <td><i (click)="clientGotTheOrder(line.orderNumber)" class="fa fa-check-square" aria-hidden="true"></i></td> -->
    
                      <td><label class="form-control">{{line.status}}</label></td>
                      <td><button class="btn btn-primary" (click)="printOrder(line)">Print</button></td>
                      <!-- <td>
                        <input [(ngModel)]="line.paymentStatus" (change)="changePaymentStatus($event,line.orderNumber)"
                          list="payments" class="form-control">
                        <datalist id="payments">
                          <option value=" "> </option>
                          <option value="fullyPaid">שולם במלואו</option>
                          <option value="partlyPaid">שולם חלקית</option>
                          <option value="advancePaid">שולם מקדמה</option>
    
                        </datalist>
                      </td>
                      <td><label class="form-control">{{line.paymentRemark}}</label></td> -->
    
    
                      <!-- <td><button class="btn btn-info form-control" (click)="orderInput.click()">O</button></td> -->
    
                      <!-- <td><button class="btn btn-info" (click)="sendOrder(line)">Send Order</button></td> -->
                      <!-- <td>   <a style="display:block" target="_blank" (click)="setLinkDownlowd(line._id)" [href]="linkDownload"><img style="height: 30px; width:30px;"
                    src="../../../../assets/images/pdf.png" alt="PDF" /></a>
    
                <input class="form-control" #orderInput style="display:none" type="file"
                  (change)="onSelectOrderBill($event,line.orderNumber)"></td>
    
                  <td><button class="btn btn-info form-control" (click)="swiftInput.click()">S</button></td>
                  <td>
                    <a style="display:block" target="_blank" (click)="setLinkDownlowdTwo(line._id)" [href]="linkDownload"> <img style="height: 30px; width:30px;"
                      src="../../../../assets/images/pdf.png" alt="PDF" /></a>
                  <input class="form-control" #swiftInput style="display:none" type="file" (change)="onSelectSwift($event,line.orderNumber)">
                  </td> -->
                      <td>{{line.user}}</td>
                    </tr>
                  </tbody>
                </table>
                <div *ngIf="showLoader" class="smallLoader mx-auto my-auto"></div>
              </div>
            </div>
    
          </div>
      </ng-template>
    </ng-container>
  </nav>
  <div [ngbNavOutlet]="nav" class="mt-2"></div>

<div *ngIf="showInfoModal == true" style="top:150px"
  class="container border border-primary bg-white fixed-top text-center rounded shadow mx-auto my-auto p-2">
  <div class="row">
    <div class="col-4">

    </div>
    <div class="col-4">
      <h3>הוסף צפי תאריך / כמות ששולמה</h3>
    </div>
    <div class="col-4">
      <i (click)="showInfoModal = false" class="fa fa-times"></i>
    </div>
  </div>
  <div class="row">

    <div class="col-2"></div>
    <div class="col-4">
      <input type="text" class="form-control" [(ngModel)]="infoToStatus">
    </div>
    <div class="col-4">
      <button (click)="addMoreInfo()" class="form-control btn btn-primary">Add</button>
    </div>
    <div class="col-2"></div>

  </div>

</div>


<div id="bill-section" *ngIf="priceAlert == true" style="top:300px"
  class="container bg-danger fixed-top text-center rounded shadow mx-auto my-auto p-2">
  <div class="row">
    <div class="col-12">
      <h2 class="text-white">שים לב המחיר הסופי אינו תואם !</h2>
    </div>
  </div>
  <div class="row">
    <div class="col-4"></div>
    <div class="col-4">
      <button (click)="priceAlert=false;" class="form-control btn">אישור</button>
    </div>
    <div class="col-4"></div>
  </div>
</div>
<div id="bill-section" *ngIf="bill == true" style="top:150px"
  class="container bg-white fixed-top text-center rounded shadow mx-auto my-auto p-2">
  <div class="row mt-2">
    <div class="col-4">
      <button [printStyle]="{td : {'border': '1px solid black'}, tr : {'border': 'solid 1px black'}}"
        style="background: none;border:none;cursor: pointer;" printSectionId="bill-section" ngxPrint><img
          src="../../../../assets/images/print.png" alt="Print" style="width: 30px;"></button>
    </div>
    <div class="col-4">
      <h3 class="text-primary">Bill</h3>
    </div>
    <div class="col-4">
      <i (click)="bill = false" style="cursor: pointer;" class="fa fa-times" aria-hidden="true"></i>
    </div>
  </div>

  <div class="row mt-2">
    <div class="col-12">
      <table class="table table-striped table-hover">
        <thead class="text-white bg-primary">
          <tr>
            <th>Item Number</th>
            <th>Price</th>
            <th>Comax Number</th>
            <th>Reference Number</th>
            <th>Arrived Amount</th>
            <th>Arrival Date</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let bill of billToPrint">
            <td>{{bill.itemNumber}}</td>
            <td>{{bill.price}}</td>
            <td>{{bill.comaxNumber}}</td>
            <td>{{bill.referenceNumber}}</td>
            <td>{{bill.arrivedAmount}}</td>
            <td>{{bill.arrivalDate | date: 'dd/MM/yyyy'}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>


</div>



<div *ngIf="printBill==true" id="myModal3" class="modal3 position-fixed"
  style='border:1px; border-radius:5px;z-index: 1; left:300px;top:160px;font-size:20px;'>
  <div id="billing-section">
    <div class="modal-content" id='modelC'>
      <div style="display: inline-block;" id="material-header" class="modal-header">

        <div class="row">
          <div class="col-5">
            <img src="../../../../assets/images/logo.png">
          </div>
          <div class="col-6">
            <p style="font-size: 12px;">Amal 17 Street, Afek Industry Park,Rosh Haayin 4809256</p>
            <p style="font-size: 12px;">Tel:+972-3-9024055 Fax: +972-3-9024015 </p>
            <p style="font-size: 12px;">Email: Office2@peerpharm.com</p>
          </div>

          <div class="col-1">
            <span class="close" id="closeId3" (click)="printBill=false;">&times;</span>
          </div>
        </div>

      </div>
      <hr>

      <div class="row">
        <div class="col-4">
        </div>

        <div class="col-4">
          <button style="border:none;background: none;margin-left:100px;font-size: 25px;" ngxPrint
            printSectionId="billing-section"
            [printStyle]="{th : {'border': '1px solid black'}, td : {'border': '1px solid black'},tr : {'border': '1px solid black'}}"><b>Order:{{currentOrder.orderNumber}}</b></button>
          <p style="margin-left:300px;">Order Date:{{orderDate | date: 'dd/MM/yyyy'}}</p>
        </div>

        <div class="col-4">

        </div>
      </div>

      <div class="row">
        <div class="col-4">
          <p>{{currentOrder.supplierName}} - {{currentOrder.supplierNumber}}</p>
        </div>

        <div class="col-4"></div>

        <div class="col-4"></div>
      </div>

      <div class="row">
        <div class="col-4">
          <p>{{currentSupplier.address}}</p>
        </div>

        <div class="col-4"></div>

        <div class="col-4"></div>
      </div>

      <div class="row">
        <div class="col-4">
          <p *ngIf="currentSupplier.phoneNum">Tel:{{currentSupplier.phoneNum}}</p>
        </div>

        <div class="col-4"></div>

        <div class="col-4"></div>
      </div>

      <div class="row">
        <div class="col-4">
          <p *ngIf="currentSupplier.faxNum">Fax:{{currentSupplier.faxNum}}</p>
        </div>

        <div class="col-4"></div>

        <div class="col-4"></div>
      </div>



      <p>Order Details:</p>
      <div class="container" id="material-body" class="modal-body">
        <table class="table table-striped">
          <thead>
            <tr>
              <th>#</th>
              <th *ngIf="showImage == true">Image</th>
              <th>Item</th>
              <th>SupplierN</th>
              <th>Item Name</th>
              <th>Remarks</th>
              <th>Qty</th>
              <th>Unit Price</th>
              <th>Amount</th>

            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let item of currentItems;let i = index;">
              <td>{{i+1}}</td>
              <td *ngIf="showImage == true"><img style="width:50px;" alt="Item Image" [src]="item.img"></td>
              <td>{{item.number}}</td>
              <td>{{item.componentNs}}</td>
              <td>{{item.name}}</td>
              <td>{{item.itemRemarks}}</td>
              <td>{{item.quantity | number}}</td>
              <td>{{item.price}}
                <span *ngIf="item.coin == 'nis'">&#8362;</span>
                <span *ngIf="item.coin == 'euro'">&#8364;</span>
                <span *ngIf="item.coin == 'eur'">&#8364;</span>
                <span *ngIf="item.coin == 'usd'">$</span>
              </td>
              <td>{{item.itemPrice | number}}</td>

            </tr>
            <tr *ngIf="country == true">
              <td></td>
              <td *ngIf="showImage == true"></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td><b>{{totalAmount}}</b></td>
              <td></td>
              <td><b>{{totalPrice}}{{currCoin}}</b></td>
            </tr>
            <tr *ngIf="country == false">
              <td></td>
              <td *ngIf="showImage == true"></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td><b>{{totalAmount}}</b></td>
              <td></td>
              <td dir="rtl"><b>סה"כ לפני מע"מ: {{totalPrice}}{{currCoin}}</b></td>
            </tr>

            <tr *ngIf="country == false">
              <td></td>
              <td *ngIf="showImage == true"></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td><b>{{totalAmount}}</b></td>
              <td></td>
              <td dir="rtl"><b>17% מע"מ: {{priceTaxes}}{{currCoin}}</b></td>
            </tr>
            <tr *ngIf="country == false">
              <td></td>
              <td *ngIf="showImage == true"></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td></td>
              <td dir="rtl"><b>סה"כ כולל מע"מ: {{totalPriceWithTaxes}}{{currCoin}}</b></td>
            </tr>


          </tbody>

        </table>

        <div class="row">
          <div style="display: inline-block;" class="col-6">
            <!-- <p style="margin-left:480px;font-size: 15px;display: inline-block;">Total Amont: {{totalAmount}}</p> &nbsp;
            &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;
            <p style="font-size: 15px;display: inline-block;">Total Price: {{totalPrice}}</p> -->
          </div>
          <div style="display: inline-block;" class="col-6">

          </div>
        </div>

        <div class="row">
          <div class="col-6">
            {{outOfCountry}}
          </div>
          <br>
          <div class="col-6">
            {{importantRemarks}}
          </div>
        </div>
        <div class="row">
          <div class="col-12">
            <p>This order must be confirmed by supplier.</p>
          </div>

        </div>

      </div>

    </div>
  </div>
</div>

<div *ngIf="orderDetailsModal==true" class="container fixed-top mx-auto my-auto text-center">
  <app-new-procurement (closeOrderModal)='orderDetailsModal=$event; isEdit=$event' [requestToPurchase]="requestToPurchase" (newProcurementSaved)="showLoader = true;getAllProcurementOrders();getAllPurchaseRecommends()" [isEdit]="isEdit"  [purchaseData]="purchaseData"></app-new-procurement>
</div>


<!-- <div *ngIf="newPurchaseModal == true"
  class="new-purchase-modal border bg-white container fixed-top text-center p-1">
    <div class="col-1">
      <i (click)="newPurchaseModal = false" class="big click fa fa-times bg-white"></i>
    </div>
  <app-new-procurement  (newProcurementSaved)="showLoader = true; getAllProcurementOrders()"></app-new-procurement>
</div> -->

<div *ngIf="purchaseRecommendationsModal == true"
  style="z-index: 9999;top:50px !important;height: auto"
  class="border border-primary bg-white shadow-lg rounded container-fluid fixed-top mx-auto my-auto text-center p-1">

  <div class="row mt-2">
    <div class="col-1"></div>
    <div class="col-10">
      <h1 class="text-success">בקשות רכש</h1>
    </div>
    <div class="col-1">
      <i (click)="purchaseRecommendationsModal = false" class="fa fa-times"></i>
  </div>
</div>

<div class="row mt-1">
  <div class="col-3">
  <select (change)="filterRecByType($event)" class="form-control rounded-pill">
    <option selected="true" disabled="disabled">Choose Type</option>   
    <option value="all">All</option> 
    <option value="components">Components</option> 
    <option value="materials">Materials</option> 
  </select>
  </div>
  <div class="col-3">
  <input (change)="filterRecByNumber($event)" type="text" class="form-control rounded-pill" placeholder="Search By Number">
  </div>
  <div class="col-3">

  </div>
  <div class="col-3">
    <img (click)="getAllPurchaseRecommends()" style="width:50px" src="../../../../assets/images/refreshData.png">
  </div>
</div>

  <div class="row mt-1">
    <div style="height:700px;overflow-y: scroll;" class="col-12">
      <table class="table table-hover">
        <thead class="bg-warning text-white">
          <tr>
            <!-- <th></th> -->
            <th>#</th>
            <th>Type</th>
            <th>StockItems</th>
            <th>Recommendation Date</th>
            <th>Remarks</th>
            <th>User</th>
            <th></th>
            <th></th>
            <th></th>
          </tr>
        </thead>
        <tbody *ngFor="let recommend of purchaseRecommendations" >
          <ng-container>
            <tr >            
              <!-- <td><input type="checkbox" (change)="isSelected($event,recommend._id)"></td> -->
              <td (click)="expandRecommend(recommend.recommendNumber)" class="text-info underline click">{{recommend.recommendNumber}}</td>
              <td>{{recommend.type}}</td>
              <td class="text-info">{{recommend.stockitems.length}}</td>
              <td>{{recommend.date | date: 'dd/MM/yyyy'}}</td>
              <td>{{recommend.remarks}}</td>
              <td>{{recommend.user}}</td>
              <td><button (click)="moveToNewPurchase(recommend)" class="btn btn-success form-control rounded-pill">Order</button></td>
              <td><button (click)="setRecommendAsDone(recommend._id)" class="btn btn-warning form-control rounded-pill">Done</button></td>
              <td><button (click)="printRecommend(recommend)" class="btn btn-primary form-control rounded-pill">Print</button>
                <button #printRecommendBtn  [printStyle]="{td : {'border': '1px solid black'}, th : {'border': 'solid 1px black'}}" ngxPrint printSectionId="printRecommend" class="d-none"></button>
              </td>
            </tr>
            <tr  *ngIf="recommendStockItemsCollapse && expandNumber == recommend.recommendNumber">
              <td class="border border-info" colspan="3">
              <table>
                <tbody>
                  <tr *ngFor="let stockitem of recommend.stockitems">
                    <td>{{stockitem.number}}</td>
                    <td>{{stockitem.name}}</td>
                    <td>{{stockitem.amount}}</td>
                    <td *ngIf="stockitem.threatment" [ngClass]="dangerColor(stockitem.threatment)" >{{stockitem.threatment}}</td>
                  </tr>
                </tbody>
              </table>
            </td>
            </tr>
          </ng-container>
      
        </tbody>
      </table>
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-2"></div>
    <div class="col-8">
      <button (click)="moveToNewPurchase(selectedArr,'multi')" class="btn btn-success form-control">Order Multiple</button>
    </div>
    <div class="col-2"></div>
  </div>

</div>

<div id="printRecommend" *ngIf="currRecommend" class="container p-3 bg-white d-none">
  <div class="row m-1">
    <div class="col-4">
      Date: {{currRecommend.date | date: 'dd/MM/yyyy'}}
    </div>
    <div class="col-4">
      <h3>Recommend - {{currRecommend.recommendNumber}}</h3>
    </div>
    <div class="col-4">
      Supplier: {{currRecommend.supplierName}}
    </div>
  </div>
  <br>
  <hr>
  <br>
  <div class="row">
    <div class="col-12">
      <table class="table table-striped table-bordered">
        <thead>
          <tr>
            <th>Number</th>
            <th>Name</th>
            <th>Amount</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let stockitem of currRecommend.stockitems">
            <td>{{stockitem.stockitemNumber}}</td>
            <td>{{stockitem.stockitemName}}</td>
            <td>{{stockitem.amount}}</td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
  <br>
  <hr>
  <br>
  <div class="row mt-2">
    <div class="col-12">
      <span>Importrant Remarks: {{currRecommend.remarks}}</span>
    </div>
  </div>

</div>

<div *ngIf="invoiceModal == true" style="top:200px;"
  class="container bg-white fixed-top text-center rounded shadow mx-auto my-auto p-2">
  <div class="row">
    <div class="col-4">

    </div>
    <div class="col-4">
      <button [printStyle]="{td : {'border': '1px solid black'}, tr : {'border': 'solid 1px black'}}"
        style="border:none;background:transparent;font-size: 30px;" printSectionId="invoice-section" ngxPrint>אישור
        חשבונית</button>
    </div>
    <div class="col-4">
      <i (click)="invoiceModal = false;" class="fa fa-times text-primary"></i>
    </div>
  </div>

  <div id="invoice-section" class="row">
    <div class="col-12">
      <table class="table table-bordered">
        <thead>
          <tr>
            <th>מספר פריט</th>
            <th>שם פריט</th>
            <th>כמות</th>
            <th>מחיר</th>
            <th>סכום</th>
            <th>פער כמות</th>
            <th>פער מחיר</th>
            <th>חיוב לקוח</th>
          </tr>
        </thead>
        <tbody>
          <ng-container *ngFor="let item of currentInvoice.invoices">
            <tr *ngIf="item.changedQuantity || item.changedItemPrice">
              <td>{{item.itemNumber}}</td>
              <td>{{item.itemName}}</td>
              <td>{{item.quantity}} <small class="text-success font-weight-bold"><u>{{item.changedQuantity}}</u></small>
              </td>
              <td>{{item.supplierPrice}} <small
                  class="text-success font-weight-bold"><u>{{item.changedItemPrice}}</u></small></td>
              <td>{{item.price}}</td>
              <td class="text-success">{{item.fixedQuantity}}</td>
              <td>{{item.fixedPrice}}</td>
              <td>{{item.chargeSupplier}}</td>
            </tr>
            <tr *ngIf="!item.changedQuantity && !item.changedItemPrice">
              <td>{{item.itemNumber}}</td>
              <td>{{item.itemName}}</td>
              <td>{{item.quantity}}</td>
              <td>{{item.supplierPrice}}</td>
              <td>{{item.price}}</td>
              <td class="text-success">{{item.fixedQuantity}}</td>
              <td>{{item.fixedPrice}}</td>
              <td>{{item.chargeSupplier}}</td>
            </tr>

          </ng-container>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="font-weight-bold" dir="rtl">סה"כ לפני מע"מ: {{sumCharge}}</td>
          </tr>
          <tr>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td class="font-weight-bold" dir="rtl">סה"כ אחרי מע"מ: {{sumChargeTaxes}} </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>