<div class="container-fluid bg-light text-center">
  <div class="row">
    <div class="col-12">
      <h1 style="text-shadow: 2px 2px 4px #000000;" class="text-info p-2">ITEMS LIST</h1>
    </div>
  </div>

 


  <!-- <div *ngIf="!hasMoreItemsToload" class="row mt-4">
    <div class="col-1"></div>
    <div class="col-2">
      <label class="form-control text-info"></label>
    </div>
    <div class="col-2">
      <label class="form-control text-info"></label>
    </div>
    <div class="col-2">
      <label class="form-control text-info"></label>
    </div>
    <div class="col-2">
      <label class="form-control text-info"></label>
    </div>
    <div class="col-2">
      <label class="form-control text-info"></label>
    </div>
    <div class="col-1"></div>
  </div> -->

  <div *ngIf="!hasMoreItemsToload" class="row">
    <div class="col-2">
      <input (change)="filterByNumber($event)" type="text" class="form-control" placeholder="Search By Number">
    </div>
    <div class="col-2">
      <input (change)="filterByComponent($event)" type="text" class="form-control" placeholder="Search By Component">
    </div>
    <div class="col-2">
      <input matInput class="form-control" (change)="changeText($event)" placeholder="Search By Name">
    </div>
    <div class="col-2">
      <select class="form-control" (change)="filterByStatus($event)">
        <option value="">Filter By Status</option>
        <option value="active">פעיל</option>
        <option value="notActive">לא פעיל</option>
        <option value="perfect">מושלם</option>
      </select>
    </div>
    <div class="col-2">
      <select class="form-control" (change)="filterByLanguage($event)">
        <option value="">Filter By Language</option>
        <option value="Hebrew">Hebrew</option>
        <option value="English">English</option>
      </select>
    </div>
    <div class="col-3"></div>
  </div>



  <div *ngIf="hasMoreItemsToload" class="row">
    <div class="col-12">
      <span class="text-danger h5"><b>Loading Items , Please Wait..</b></span> <img style="width:50px"
        src="http://avacdn.com/wp-content/uploads/2018/05/motosha-spinner.gif" />
    </div>
  </div>

  <div class="row mt-3">
    <div class="col-12">

      <span class="text-danger h5"><b>Showing {{ items.length }} Items</b></span>
      <div class="col-1">
        <button style="float: right; background: none;" (click)="getCurrListToExcel()" data-toggle="tooltip"
          title="get cuurent item list">
          <label style="float: right; line-height: 30px; margin-left: 5px"><b>Export List</b></label>
          <img src="../../../assets/images/excel.png" alt="excel export" style="width: 35px; float: right;" />
        </button>
      </div>
      <table class="table table-hover table-striped table-fixed mt-2">
        <thead style="box-shadow: inset 0px 0px 4px 1px black;" class="bg-info text-white">
          <tr>
            <th>#</th>
            <th>Item number</th>
            <th>Name</th>
            <th>Volume/Net Weight</th>
            <!-- <th style="width:7%; padding:5px">Net Weight</th> -->
            <th>Sticker</th>
            <th>Barcode</th>
            <th>Limited License</th>
            <th>licsense Number</th>
            <th>licsense Date</th>
            <th>Pallet 1</th>
            <th>Pallet 2</th>
            <th>Pallet 3</th>
            <th></th>
            <!-- <th style="padding:5px">Pallet 2</th>
    <th style="padding:5px">Pallet 3</th> -->
          </tr>
        </thead>
        <tbody id="table_body">
          <tr style="box-shadow: inset 0px 0px 4px 1px black; margin-top: 1px;"
            *ngFor="let item of items; let i = index">
            <td style="color:black">{{ i + 1 }}</td>
            <td style="color:black">
              <a style="color:black;text-decoration: underline;" target="_blank" routerLink="/peerpharm/items/itemDetails/{{ item.itemNumber }}">
                {{ item.itemNumber }}
              </a>
            </td>
            <td style="color:black">{{ item.itemFullName }}</td>
            <td style="color:black">
              <div *ngIf="item.volumeKey">{{ item.volumeKey }} ml</div>
              <div *ngIf="item.volumeKey == null && item.netWeightK">
                {{ item.netWeightK }} gr
              </div>
            </td>
            <td  style="word-wrap:normal;color:black">
              {{ item.stickerNumber }}<br /><span style="word-break: break-word;">{{
          item.StickerLanguageK
        }}</span>
            </td>
            <td style="word-wrap: break-word;color:black">{{ item.barcodeK }}</td>
            <td>
              <!-- <img
          *ngIf="
            item.licenceItemsQuotaLimit &&
            item.licenceItemsQuotaLimit < item.licenceCurrItemsQnt
          "
          style="width: 25px; height: 25px;"
          src="../../../../assets/images/alert2.png"
          alt=""
        /> -->
              <!-- <input *ngIf="item.licenceItemsQuotaLimit" [(ngModel)]="item.licenceHasItemsQuotaLimition" type="checkbox" (change)="updateLicenseQuotaLimitation($event,item.itemNumber,item.licsensNumber,item.licenceCurrItemsQnt,item.licenceExprationDate, item.licenceFileLink,item.licenceLastUpdateDate, item.licenceLastUpdateUser, item.licenceNotifaction)" style="float: right; width:45%;"> -->
              <!-- <input
          *ngIf="item.licenceItemsQuotaLimit"
          [(ngModel)]="item.licenceItemsQuotaLimit"
          type="number"
          style="width: 65px; float: left;"
          (focusout)="
            updateLicenseQuotaLimitation(
              $event,
              item.itemNumber,
              item.licsensNumber,
              item.licenceCurrItemsQnt,
              item.licenceExprationDate,
              item.licenceFileLink,
              item.licenceLastUpdateDate,
              item.licenceLastUpdateUser,
              item.licenceNotifaction
            )
          "
          min="1"
        /> -->
              <!-- <input *ngIf="!item.licenceItemsQuotaLimit" type="checkbox" (change)="updateLicenseQuotaLimitation($event,item.itemNumber,item.licsensNumber,item.licenceCurrItemsQnt,item.licenceExprationDate, item.licenceFileLink,item.licenceLastUpdateDate, item.licenceLastUpdateUser, item.licenceNotifaction)" style="float: right; width:45%;"> -->
              <!-- <input
          *ngIf="!item.licenceItemsQuotaLimit"
          type="number"
          style="width: 65px; float: left;"
          (focusout)="
            updateLicenseQuotaLimitation(
              $event,
              item.itemNumber,
              item.licsensNumber,
              item.licenceCurrItemsQnt,
              item.licenceExprationDate,
              item.licenceFileLink,
              item.licenceLastUpdateDate,
              item.licenceLastUpdateUser,
              item.licenceNotifaction
            )
          "
          min="1"
        /> -->

            </td>
            <td style="color:black" (click)="edit(item._id)" *ngIf="item._id != EditRowId">{{ item.licsensNumber }}</td>
            <td style="color:black" (click)="edit(item._id)" *ngIf="item._id == EditRowId">
              <input #itemLicenseNum [value]="item.licsensNumber" style="width:150px" type="text">
            </td>

            <td style="color:black" (click)="edit(item._id)" *ngIf="item._id != EditRowId">{{ item.licsensDate}}</td>
            <td style="color:black" (click)="edit(item._id)" *ngIf="item._id == EditRowId">
              <input #itemLicenseDate [value]="item.licsensDate" style="width:150px" type="date">
            </td>

            <td style="color:black">{{ item.pallet }}</td>
            <td style="color:black">{{ item.pallet2 }}</td>
            <td style="color:black">{{ item.pallet3 }}</td>
            <td *ngIf="item._id == EditRowId" style="width:3%"><i (click)="saveEdit(item._id)" class="fa fa-check"></i>
            </td>
            <!-- <td>{{item.pallet2}}</td>
    <td>{{item.pallet3}}</td> -->
          </tr>
        </tbody>
      </table>


    </div>
  </div>

</div>
<div>



</div>
<div class="curtain" *ngIf="showCurtain">
  <h1 style="color:#FFF; margin:0px">
    PLEASE WAIT...
    <br />
    A database backup is being made before the update.
    <br />this can take some time
  </h1>
</div>
<!-- &nbsp;&nbsp; <input *ngIf="!hasMoreItemsToload" matInput  placeholder="Item name" (change)="changeText($event)" /> -->




<!-- 

<input class="form-control" (change)="sendExcelToData($event)" type="file" />
<label class="form-control">Upload Excel</label> -->